(()=>{"use strict";var e,a,t,n,l={12:(e,a,t)=>{function n(e,a){[...a.querySelectorAll("input")].forEach((a=>{a.value=e[a.dataset.name]}))}t.d(a,{Z:()=>n})},90:(e,a,t)=>{function n(e,a){const t=a.closest("dialog"),n=t.querySelector(".alert");n&&(n.textContent=null),t.close()}t.d(a,{p:()=>n})},233:(e,a,t)=>{t.a(e,(async(e,n)=>{try{t.d(a,{_d:()=>S,lQ:()=>f});var l=t(301),o=t(339),s=t(495),r=t(790),c=t(739),d=t(90),i=t(446),u=t(660),p=t(535),y=e([c,u]);[c,u]=y.then?(await y)():y;const b=document.querySelectorAll("input.input-disabled"),_=document.querySelector(".personal-data"),m=document.querySelector(".legal-data"),v=document.querySelector("#company-dialog"),f=document.querySelector("#company-dialog-save"),h=document.querySelector("#bank-dialog"),S=document.querySelector("#bank-dialog-save");document.querySelector("li.log-logout").style.display="none";const q=(await(0,s.y)(_,m)).personalData;(0,l.q)(),document.querySelector("#new-company").addEventListener("click",(e=>{v.showModal(),(0,i.Y)(v)})),v.querySelector("form").addEventListener("submit",(async e=>{await(0,c.s)(e,v)})),v.querySelector("form").addEventListener("reset",(e=>{(0,d.p)(e,v)})),f.querySelector("form").addEventListener("submit",(async e=>{await(0,r.J)(e,f)})),f.querySelector("form").addEventListener("reset",(async e=>{(0,d.p)(e,f)})),document.querySelectorAll("#new-bank").forEach((e=>{e.addEventListener("click",(e=>{const a=e.target.closest(".company").dataset.id;h.querySelector("form").dataset.companyId=a,h.showModal(),(0,i.Y)(h)}))})),h.querySelector("form").addEventListener("submit",(async e=>{const a=e.target.dataset.companyId;await(0,u.V)(e,h,a)})),h.querySelector("form").addEventListener("reset",(e=>{(0,d.p)(e,h)})),S.querySelector("form").addEventListener("submit",(async e=>{await(0,p.w)(e,S)})),S.querySelector("form").addEventListener("reset",(e=>{(0,d.p)(e,S)})),await(0,o.I)(_,q,"#first_name","personal"),[...b].forEach((e=>{e.addEventListener("mousedown",(a=>{e.classList.remove("alert-border"),e.closest("form").querySelector(".alert").textContent=""}))})),n()}catch(e){n(e)}}),1)},301:(e,a,t)=>{function n(){[...document.querySelectorAll(".input-disabled")].forEach((e=>{e.disabled=!0}))}t.d(a,{q:()=>n})},339:(e,a,t)=>{t.d(a,{I:()=>o});var n=t(12),l=t(591);async function o(e,a,t,o){const s=e.querySelector(".btn__neutral"),r=e.querySelector(".btn__save"),c=e.querySelector(".btn__cancel");s.addEventListener("click",(a=>{!function(e){const a=e.querySelector(".personal-data__change"),t=e.querySelector(".personal-data__save");a.classList.toggle("item-hidden"),t.classList.toggle("item-hidden"),[...e.querySelectorAll(".input-disabled")].forEach((e=>{e.disabled=!1})),e.querySelector(".alert").textContent=""}(e),e.querySelector(t).focus()})),c.addEventListener("click",(t=>{!function(e,a){const t=a.querySelector(".personal-data__change"),l=a.querySelector(".personal-data__save");t.classList.toggle("item-hidden"),l.classList.toggle("item-hidden"),[...a.querySelectorAll(".input-disabled")].forEach((e=>{e.disabled=!0,e.classList.remove("alert-border")})),e&&(0,n.Z)(e,a),a.querySelector(".alert").textContent=""}(a,e)})),r.addEventListener("click",(async a=>{await async function(e,a){const t="/cabinet/save/"+a,n=await(0,l.h)(t,e);"ok"===n.status?window.location.reload():(e.querySelector(".alert").textContent=n.message,n.field&&e.querySelector(`#${n.field}`).classList.add("alert-border"))}(e,o)}))}},446:(e,a,t)=>{function n(e){let a,t,n=!1;e.querySelector(".login__title").addEventListener("mousedown",(l=>{n=!0,a=l.clientX-e.offsetLeft,t=l.clientY-e.offsetTop,e.style.cursor="grabbing"})),document.addEventListener("mousemove",(l=>{n&&(e.style.left=l.clientX-a+"px",e.style.top=l.clientY-t+"px")})),document.addEventListener("mouseup",(()=>{n=!1,e.style.cursor="grab"}))}t.d(a,{Y:()=>n})},495:(e,a,t)=>{t.d(a,{y:()=>u});var n=t(12),l=t(964);const o='\n            <details class="company" id="company-detail-0">\n                <summary class="company__summary">\n                        <div class="personal-data__block">\n                            <label for="company-name-0" class="personal-data__label"></label>\n                            <input type="text" id="company-name-0" \n                                   class="personal-data__input"\n                                   data-name="name"\n                                   disabled>\n                        </div>\n                        <div class="personal-data__change legal-data__change">\n                                    <button class="btn btn__neutral legal-btn"\n                                            type="button"\n                                            data-id="company-0">Изменить\n                                    </button>\n                        </div>\n                        <div class="personal-data__save company__data-save item-hidden">\n                            <div class="company__save">\n                                <button class="btn btn__save personal-btn"\n                                        type="button"\n                                        data-id="company-0">Сохранить\n                                </button>\n                                <button class="btn btn__cancel personal-btn"\n                                        type="button" data-id="company-0">Отменить\n                                </button>\n                            </div>\n                            <div class="alert company-alert"></div>\n                        </div>\n                </summary>\n                <div class="legal-data__inputs">\n                    <div class="personal-data__inputs">\n                        <form id="company-0" class="legal-data__block">\n                        <input type="text" data-name="id" name="id" hidden>\n                            <div class="personal-data__block">\n                                <label for="inn-0" class="personal-data__label">ИНН</label>\n                                <input type="text" id="inn-0"\n                                       class="personal-data__input input-disabled"\n                                       name="inn"\n                                       data-name="inn">\n                            </div>\n                            <div class="personal-data__block">\n                                <label for="company-kpp-0" class="personal-data__label">КПП</label>\n                                <input type="text" \n                                       id="company-kpp-0" \n                                       class="personal-data__input" \n                                       data-name="kpp" \n                                       disabled>\n                            </div>\n                            <div class="personal-data__block">\n                                <input type="checkbox" id="company-vat-0"\n                                       class="input-disabled check"\n                                       name="vat" \n                                       data-name="vat">\n                                <label for="vat-0" class="personal-data__label">с НДС</label>\n                            </div>\n                        </form>\n                        <div class="personal-data__block">\n                            <label for="company-address-0" class="personal-data__label">Адрес</label>\n                            <input type="text" \n                                   id="company-address-0" \n                                   class="personal-data__input" \n                                   data-name="address" \n                                   disabled>\n                        </div>\n                        <div class="legal-data__title">\n                            <h4>Банковские реквизиты</h4>\n                            <div></div>\n                            <button class="btn btn__cancel legal-btn" type="button" id="new-bank">Добавить</button>\n                        </div>\n                        <div id="company-bank-0"></div>\n                    </div>\n                    <div class="personal-data__inputs">\n            </details>\n',s='\n                    <hr>\n                    <details class="bank " id="bank-0">\n                        <summary class="">\n\x3c!--                            <label for="bank-name-0" class="personal-data__label">Название</label>--\x3e\n\x3c!--                            <p>--\x3e\n                            <input type="text" \n                            id="bank-name-0" \n                            class="bank__name"\n                            data-name="name" \n                            disabled>\n\x3c!--                            </p>--\x3e\n                        </summary>\n                        <form class="legal-data__inputs">\n                        <input type="text" data-name="id" name="id" hidden>\n                        <div class="personal-data__inputs">\n                            <div class="personal-data__block">\n                                <label for="account-0" class="personal-data__label">Счет</label>\n                                <input type="text" id="account-0"\n                                       class="personal-data__input input-disabled"\n                                       name="account_no" \n                                       data-name="account_no">\n                            </div>\n                            <div class="legal-data__block">\n                                <div class="personal-data__block">\n                                    <label for="bic-0" class="personal-data__label">БИК</label>\n                                    <input type="text" id="bic-0"\n                                           class="personal-data__input input-disabled"\n                                           name="bic" \n                                           data-name="bic">\n                                </div>\n                                <div class="personal-data__block">\n                                    <label for="city-0" class="personal-data__label">Город</label>\n                                    <input type="text" id="city" \n                                           class="personal-data__input" \n                                           data-name="city"\n                                           disabled>\n                                </div>\n                            </div>\n                            <div class="personal-data__block">\n                                <label for="corr-account-0" class="personal-data__label">Кор. счет</label>\n                                <input type="text" \n                                       id="corr-account-0" \n                                       class="personal-data__input" \n                                       data-name="corr_account" \n                                       disabled>\n                            </div>\n                        </div>\n                        <div class="personal-data__inputs">\n                            <div class="personal-data__change legal-data__change">\n                                <button class="btn btn__neutral legal-btn"\n                                    type="button"\n                                    data-id="company-0">Изменить\n                                </button>\n                            </div>\n                            <div class="personal-data__save item-hidden">\n                            <button class="btn btn__save personal-btn"\n                                    type="button"\n                                    data-id="company-0">Сохранить\n                            </button>\n                            <button class="btn btn__cancel personal-btn"\n                                    type="button" data-id="company-0">Отменить\n                            </button>\n                            <div class="alert company-alert"></div>\n                        </div>\n                        </div>\n\n                        </form>\n                    </details>\n';function r(e){const a=e.querySelector(".personal-data__change"),t=e.querySelector(".personal-data__save");a.classList.toggle("item-hidden"),t.classList.toggle("item-hidden"),[...e.querySelector("form").querySelectorAll(".input-disabled")].forEach((e=>{e.disabled=!1})),e.querySelector(".alert").textContent=""}function c(e,a){const t=a.querySelector(".personal-data__change"),l=a.querySelector(".personal-data__save");t.classList.toggle("item-hidden"),l.classList.toggle("item-hidden");const o=a.querySelector("form");[...o.querySelectorAll(".input-disabled")].forEach((e=>{e.disabled=!0,e.classList.remove("alert-border")})),e&&(0,n.Z)(e,o),a.querySelector(".alert").textContent=""}var d=t(591);async function i(e,a){const t=e.querySelector("form"),n="/cabinet/save/"+a,l=await(0,d.h)(n,t);"ok"===l.status?window.location.reload():(e.querySelector(".alert").textContent=l.message,l.field&&t.querySelector(`input[data-name="${l.field}"`).classList.add("alert-border"))}async function u(e,a){const t=await fetch("/cabinet_data/",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":(0,l.m)()}}).then((e=>e.json()));return"ok"===t.status&&((0,n.Z)(t.data.personalData,e),function(e,a){e.length&&e.forEach((e=>{const t=o.replaceAll("-0","-"+e.id);a.insertAdjacentHTML("beforeend",t);const n=a.lastElementChild,l=document.createElement("hr");n.insertAdjacentElement("beforebegin",l),l.classList.add("hr"),[...n.querySelectorAll("input")].forEach((a=>{"checkbox"===a.type?a.checked=e[a.dataset.name]:a.value=e[a.dataset.name]})),n.querySelector("button.btn__neutral").addEventListener("click",(()=>{r(n)})),n.querySelector("button.btn__cancel").addEventListener("click",(()=>{c(e,n)})),n.querySelector("button.btn__save").addEventListener("click",(async()=>{await i(n,"company")}));const d=n.querySelector(`#company-bank-${e.id}`);e.bank.length&&e.bank.forEach((e=>{const a=s.replaceAll("-0","-"+e.id);d.insertAdjacentHTML("beforeend",a);const t=d.lastElementChild;t.querySelector("button.btn__neutral").addEventListener("click",(()=>{r(t)})),t.querySelector("button.btn__cancel").addEventListener("click",(()=>{c(e,t)})),t.querySelector("button.btn__save").addEventListener("click",(async()=>{await i(e,t)})),[...t.querySelectorAll("input")].forEach((a=>{a.value=e[a.dataset.name]}))}))}))}(t.data.legalData,a)),t.data}},535:(e,a,t)=>{t.d(a,{w:()=>l});var n=t(591);async function l(e,a){e.preventDefault();const t=a.querySelector("form"),l=await(0,n.h)("/save_bank_account/",t);"ok"===l.status?(a.close(),window.location.reload()):a.querySelector(".alert").textContent=l.message}},591:(e,a,t)=>{t.d(a,{h:()=>l});var n=t(964);async function l(e,a){const t=new FormData(a),l=await fetch(e,{method:"POST",body:t,headers:{"X-CSRFToken":(0,n.m)()}});return await l.json()}},660:(e,a,t)=>{t.a(e,(async(e,n)=>{try{t.d(a,{V:()=>c});var l=t(591),o=t(233),s=t(446),r=e([o]);async function c(e,a,t){e.preventDefault();const n=a.querySelector("form"),r=await(0,l.h)("/check_bank/",n);"ok"===r.status?([...o._d.querySelectorAll("input")].forEach((e=>{"hidden"===e.type?e.value=t:e.value=r.bank[e.name]})),a.close(),o._d.showModal(),(0,s.Y)(o._d)):a.querySelector(".alert").textContent=r.message}o=(r.then?(await r)():r)[0],n()}catch(d){n(d)}}))},739:(e,a,t)=>{t.a(e,(async(e,n)=>{try{t.d(a,{s:()=>c});var l=t(591),o=t(233),s=t(446),r=e([o]);async function c(e,a){e.preventDefault();const t=a.querySelector("form"),n=await(0,l.h)("/check_company/",t);"ok"===n.status?([...o.lQ.querySelectorAll("input")].forEach((e=>{"checkbox"===e.type?e.checked=n.company[e.name]:(e.type,e.value=n.company[e.name])})),a.close(),o.lQ.showModal(),(0,s.Y)(o.lQ)):a.querySelector(".alert").textContent=n.message}o=(r.then?(await r)():r)[0],n()}catch(d){n(d)}}))},790:(e,a,t)=>{t.d(a,{J:()=>l});var n=t(591);async function l(e,a){e.preventDefault();const t=a.querySelector("form"),l=await(0,n.h)("/save_new_company/",t);"ok"===l.status?(a.close(),window.location.reload()):a.querySelector(".alert").textContent=l.message}},964:(e,a,t)=>{function n(){return document.cookie.split("; ").find((e=>e.startsWith("csrftoken=")))?.split("=")[1]}t.d(a,{m:()=>n})}},o={};function s(e){var a=o[e];if(void 0!==a)return a.exports;var t=o[e]={exports:{}};return l[e](t,t.exports,s),t.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",a="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",t="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},s.a=(l,o,s)=>{var r;s&&((r=[]).d=-1);var c,d,i,u=new Set,p=l.exports,y=new Promise(((e,a)=>{i=a,d=e}));y[a]=p,y[e]=e=>(r&&e(r),u.forEach(e),y.catch((e=>{}))),l.exports=y,o((l=>{var o;c=(l=>l.map((l=>{if(null!==l&&"object"==typeof l){if(l[e])return l;if(l.then){var o=[];o.d=0,l.then((e=>{s[a]=e,n(o)}),(e=>{s[t]=e,n(o)}));var s={};return s[e]=e=>e(o),s}}var r={};return r[e]=e=>{},r[a]=l,r})))(l);var s=()=>c.map((e=>{if(e[t])throw e[t];return e[a]})),d=new Promise((a=>{(o=()=>a(s)).r=0;var t=e=>e!==r&&!u.has(e)&&(u.add(e),e&&!e.d&&(o.r++,e.push(o)));c.map((a=>a[e](t)))}));return o.r?d:s()}),(e=>(e?i(y[t]=e):d(p),n(r)))),r&&r.d<0&&(r.d=0)},s.d=(e,a)=>{for(var t in a)s.o(a,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:a[t]})},s.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a),s(233)})();