(()=>{"use strict";var a,e,n,t,l={12:(a,e,n)=>{function t(a,e){[...e.querySelectorAll("input")].forEach((e=>{e.value=a[e.dataset.name]}))}n.d(e,{Z:()=>t})},233:(a,e,n)=>{n.a(a,(async(a,e)=>{try{var t=n(301),l=n(339),s=n(495);const a=document.querySelectorAll("input.input-disabled"),o=document.querySelector(".personal-data"),c=document.querySelector(".legal-data");document.querySelector("li.log-logout").style.display="none";const r=(await(0,s.y)(o,c)).personalData;(0,t.q)(),await(0,l.I)(o,r,"#first_name","personal"),[...a].forEach((a=>{a.addEventListener("mousedown",(e=>{a.classList.remove("alert-border"),a.closest("form").querySelector(".alert").textContent=""}))})),e()}catch(a){e(a)}}),1)},301:(a,e,n)=>{function t(){[...document.querySelectorAll(".input-disabled")].forEach((a=>{a.disabled=!0}))}n.d(e,{q:()=>t})},339:(a,e,n)=>{n.d(e,{I:()=>s});var t=n(12),l=n(591);async function s(a,e,n,s){const o=a.querySelector(".btn__neutral"),c=a.querySelector(".btn__save"),r=a.querySelector(".btn__cancel");o.addEventListener("click",(e=>{!function(a){const e=a.querySelector(".personal-data__change"),n=a.querySelector(".personal-data__save");e.classList.toggle("item-hidden"),n.classList.toggle("item-hidden"),[...a.querySelectorAll(".input-disabled")].forEach((a=>{a.disabled=!1})),a.querySelector(".alert").textContent=""}(a),a.querySelector(n).focus()})),r.addEventListener("click",(n=>{!function(a,e){const n=e.querySelector(".personal-data__change"),l=e.querySelector(".personal-data__save");n.classList.toggle("item-hidden"),l.classList.toggle("item-hidden"),[...e.querySelectorAll(".input-disabled")].forEach((a=>{a.disabled=!0,a.classList.remove("alert-border")})),a&&(0,t.Z)(a,e),e.querySelector(".alert").textContent=""}(e,a)})),c.addEventListener("click",(async e=>{await async function(a,e){const n="/cabinet/save/"+e,t=await(0,l.h)(n,a);"ok"===t.status?window.location.reload():(a.querySelector(".alert").textContent=t.message,t.field&&a.querySelector(`#${t.field}`).classList.add("alert-border"))}(a,s)}))}},495:(a,e,n)=>{n.d(e,{y:()=>u});var t=n(12),l=n(964);const s='\n            <details class="company" id="company-detail-0">\n                <summary class="company__summary">\n                        <div class="personal-data__block">\n                            <label for="company-name-0" class="personal-data__label"></label>\n                            <input type="text" id="company-name-0" \n                                   class="personal-data__input"\n                                   data-name="name"\n                                   disabled>\n                        </div>\n                        <div class="personal-data__change legal-data__change">\n                                    <button class="btn btn__neutral legal-btn"\n                                            type="button"\n                                            data-id="company-0">Изменить\n                                    </button>\n                        </div>\n                        <div class="personal-data__save company__data-save item-hidden">\n                            <div class="company__save">\n                                <button class="btn btn__save personal-btn"\n                                        type="button"\n                                        data-id="company-0">Сохранить\n                                </button>\n                                <button class="btn btn__cancel personal-btn"\n                                        type="button" data-id="company-0">Отменить\n                                </button>\n                            </div>\n                            <div class="alert company-alert"></div>\n                        </div>\n                </summary>\n                <div class="legal-data__inputs">\n                    <div class="personal-data__inputs">\n                        <form id="company-0" class="legal-data__block">\n                        <input type="text" data-name="id" name="id" hidden>\n                            <div class="personal-data__block">\n                                <label for="inn-0" class="personal-data__label">ИНН</label>\n                                <input type="text" id="inn-0"\n                                       class="personal-data__input input-disabled"\n                                       name="inn"\n                                       data-name="inn">\n                            </div>\n                            <div class="personal-data__block">\n                                <label for="company-kpp-0" class="personal-data__label">КПП</label>\n                                <input type="text" \n                                       id="company-kpp-0" \n                                       class="personal-data__input" \n                                       data-name="kpp" \n                                       disabled>\n                            </div>\n                            <div class="personal-data__block">\n                                <input type="checkbox" id="company-vat-0"\n                                       class="input-disabled check"\n                                       name="vat" \n                                       data-name="vat">\n                                <label for="vat-0" class="personal-data__label">с НДС</label>\n                            </div>\n                        </form>\n                        <div class="personal-data__block">\n                            <label for="company-address-0" class="personal-data__label">Адрес</label>\n                            <input type="text" \n                                   id="company-address-0" \n                                   class="personal-data__input" \n                                   data-name="address" \n                                   disabled>\n                        </div>\n                        <div class="legal-data__title">\n                            <h4>Банковские реквизиты</h4>\n                            <div></div>\n                            <button class="btn btn__cancel legal-btn" type="button">Добавить</button>\n                        </div>\n                        <div id="company-bank-0"></div>\n                    </div>\n                    <div class="personal-data__inputs">\n            </details>\n',o='\n                    <hr>\n                    <details class="bank " id="bank-0">\n                        <summary class="">\n\x3c!--                            <label for="bank-name-0" class="personal-data__label">Название</label>--\x3e\n\x3c!--                            <p>--\x3e\n                            <input type="text" \n                            id="bank-name-0" \n                            class="bank__name"\n                            data-name="name" \n                            disabled>\n\x3c!--                            </p>--\x3e\n                        </summary>\n                        <form class="legal-data__inputs">\n                        <input type="text" data-name="id" name="id" hidden>\n                        <div class="personal-data__inputs">\n                            <div class="personal-data__block">\n                                <label for="account-0" class="personal-data__label">Счет</label>\n                                <input type="text" id="account-0"\n                                       class="personal-data__input input-disabled"\n                                       name="account_no" \n                                       data-name="account_no">\n                            </div>\n                            <div class="legal-data__block">\n                                <div class="personal-data__block">\n                                    <label for="bic-0" class="personal-data__label">БИК</label>\n                                    <input type="text" id="bic-0"\n                                           class="personal-data__input input-disabled"\n                                           name="bic" \n                                           data-name="bic">\n                                </div>\n                                <div class="personal-data__block">\n                                    <label for="city-0" class="personal-data__label">Город</label>\n                                    <input type="text" id="city" \n                                           class="personal-data__input" \n                                           data-name="city"\n                                           disabled>\n                                </div>\n                            </div>\n                            <div class="personal-data__block">\n                                <label for="corr-account-0" class="personal-data__label">Кор. счет</label>\n                                <input type="text" \n                                       id="corr-account-0" \n                                       class="personal-data__input" \n                                       data-name="corr_account" \n                                       disabled>\n                            </div>\n                        </div>\n                        <div class="personal-data__inputs">\n                            <div class="personal-data__change legal-data__change">\n                                <button class="btn btn__neutral legal-btn"\n                                    type="button"\n                                    data-id="company-0">Изменить\n                                </button>\n                            </div>\n                            <div class="personal-data__save item-hidden">\n                            <button class="btn btn__save personal-btn"\n                                    type="button"\n                                    data-id="company-0">Сохранить\n                            </button>\n                            <button class="btn btn__cancel personal-btn"\n                                    type="button" data-id="company-0">Отменить\n                            </button>\n                            <div class="alert company-alert"></div>\n                        </div>\n                        </div>\n\n                        </form>\n                    </details>\n';function c(a){const e=a.querySelector(".personal-data__change"),n=a.querySelector(".personal-data__save");e.classList.toggle("item-hidden"),n.classList.toggle("item-hidden"),[...a.querySelector("form").querySelectorAll(".input-disabled")].forEach((a=>{a.disabled=!1})),a.querySelector(".alert").textContent=""}function r(a,e){const n=e.querySelector(".personal-data__change"),l=e.querySelector(".personal-data__save");n.classList.toggle("item-hidden"),l.classList.toggle("item-hidden");const s=e.querySelector("form");[...s.querySelectorAll(".input-disabled")].forEach((a=>{a.disabled=!0,a.classList.remove("alert-border")})),a&&(0,t.Z)(a,s),e.querySelector(".alert").textContent=""}var d=n(591);async function i(a,e){const n=a.querySelector("form"),t="/cabinet/save/"+e,l=await(0,d.h)(t,n);"ok"===l.status?window.location.reload():(a.querySelector(".alert").textContent=l.message,l.field&&n.querySelector(`input[data-name="${l.field}"`).classList.add("alert-border"))}async function u(a,e){const n=await fetch("/cabinet_data/",{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":(0,l.m)()}}).then((a=>a.json()));return"ok"===n.status&&((0,t.Z)(n.data.personalData,a),function(a,e){a.length&&a.forEach((a=>{const n=s.replaceAll("-0","-"+a.id);e.insertAdjacentHTML("beforeend",n);const t=e.lastElementChild,l=document.createElement("hr");t.insertAdjacentElement("beforebegin",l),l.classList.add("hr"),[...t.querySelectorAll("input")].forEach((e=>{"checkbox"===e.type?e.checked=a[e.dataset.name]:e.value=a[e.dataset.name]})),t.querySelector("button.btn__neutral").addEventListener("click",(()=>{c(t)})),t.querySelector("button.btn__cancel").addEventListener("click",(()=>{r(a,t)})),t.querySelector("button.btn__save").addEventListener("click",(async()=>{await i(t,"company")}));const d=t.querySelector(`#company-bank-${a.id}`);a.bank.length&&a.bank.forEach((a=>{const e=o.replaceAll("-0","-"+a.id);d.insertAdjacentHTML("beforeend",e);const n=d.lastElementChild;n.querySelector("button.btn__neutral").addEventListener("click",(()=>{c(n)})),n.querySelector("button.btn__cancel").addEventListener("click",(()=>{r(a,n)})),n.querySelector("button.btn__save").addEventListener("click",(async()=>{await i(a,n)})),[...n.querySelectorAll("input")].forEach((e=>{e.value=a[e.dataset.name]}))}))}))}(n.data.legalData,e)),n.data}},591:(a,e,n)=>{n.d(e,{h:()=>l});var t=n(964);async function l(a,e){const n=new FormData(e),l=await fetch(a,{method:"POST",body:n,headers:{"X-CSRFToken":(0,t.m)()}});return await l.json()}},964:(a,e,n)=>{function t(){return document.cookie.split("; ").find((a=>a.startsWith("csrftoken=")))?.split("=")[1]}n.d(e,{m:()=>t})}},s={};function o(a){var e=s[a];if(void 0!==e)return e.exports;var n=s[a]={exports:{}};return l[a](n,n.exports,o),n.exports}a="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",e="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",t=a=>{a&&a.d<1&&(a.d=1,a.forEach((a=>a.r--)),a.forEach((a=>a.r--?a.r++:a())))},o.a=(l,s,o)=>{var c;o&&((c=[]).d=-1);var r,d,i,u=new Set,p=l.exports,b=new Promise(((a,e)=>{i=e,d=a}));b[e]=p,b[a]=a=>(c&&a(c),u.forEach(a),b.catch((a=>{}))),l.exports=b,s((l=>{var s;r=(l=>l.map((l=>{if(null!==l&&"object"==typeof l){if(l[a])return l;if(l.then){var s=[];s.d=0,l.then((a=>{o[e]=a,t(s)}),(a=>{o[n]=a,t(s)}));var o={};return o[a]=a=>a(s),o}}var c={};return c[a]=a=>{},c[e]=l,c})))(l);var o=()=>r.map((a=>{if(a[n])throw a[n];return a[e]})),d=new Promise((e=>{(s=()=>e(o)).r=0;var n=a=>a!==c&&!u.has(a)&&(u.add(a),a&&!a.d&&(s.r++,a.push(s)));r.map((e=>e[a](n)))}));return s.r?d:o()}),(a=>(a?i(b[n]=a):d(p),t(c)))),c&&c.d<0&&(c.d=0)},o.d=(a,e)=>{for(var n in e)o.o(e,n)&&!o.o(a,n)&&Object.defineProperty(a,n,{enumerable:!0,get:e[n]})},o.o=(a,e)=>Object.prototype.hasOwnProperty.call(a,e),o(233)})();