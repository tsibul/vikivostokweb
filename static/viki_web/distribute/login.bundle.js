(()=>{"use strict";var e,t,o,r,n={66:(e,t,o)=>{o.d(t,{j:()=>n});var r=o(964);async function n(e){e.preventDefault();const t=await fetch("/log-out/",{method:"POST",headers:{"X-CSRFToken":(0,r.m)(),"Content-Type":"application/json"}});"ok"===(await t.json()).status&&(window.history.replaceState(null,"",window.location.pathname),window.location.reload())}},144:(e,t,o)=>{o.a(e,(async(e,t)=>{try{var r=o(242),n=o(66),a=o(621),l=o(669),c=o(446),i=o(286);const e=document.querySelector("nav.menu__cabinet .log-login"),u=document.querySelector("nav.menu__cabinet .log-logout"),s=document.querySelector("nav.menu__cabinet .log-register"),d=document.querySelector("dialog.log-logout"),y=d.querySelector(".btn__save"),m=document.querySelector("dialog.log-register"),p=m.querySelector("form"),f=document.querySelector("dialog.log-login"),v=f.querySelector("form"),S=document.querySelector("dialog.log-temporary").querySelector("form"),g=document.querySelectorAll("dialog .btn__cancel"),w=[...document.querySelectorAll("dialog .login__title")].map((e=>e.lastElementChild)),_=document.querySelectorAll("dialog .login__input");e&&e.addEventListener("click",(()=>{f.showModal(),(0,c.Y)(f)})),u&&u.addEventListener("click",(()=>{d.showModal(),(0,c.Y)(d),y.focus()})),s&&s.addEventListener("click",(()=>{m.showModal(),m.querySelector(".btn__save").textContent="Зарегистрироваться",m.querySelector(".login__title").firstElementChild.textContent="Регистрация",m.querySelector("input.user-type").value="new",(0,c.Y)(m)})),w.forEach((e=>{e.addEventListener("click",r.z)})),g.forEach((e=>{e.addEventListener("click",r.z)})),y.addEventListener("click",await n.j),v.addEventListener("submit",(async e=>{await(0,a.q)(e,"/log-in/")})),v.querySelector(".login__btn_forget").addEventListener("click",(async e=>{f.close(),(0,i.B)(m)})),S.addEventListener("submit",(async e=>{await(0,a.q)(e,"/log-temp/")})),p.addEventListener("submit",(async e=>{await(0,l.k)(e)})),[..._].forEach((e=>{e.addEventListener("mousedown",(e=>{e.target.closest("form").querySelector(".alert").textContent=""}))})),t()}catch(e){t(e)}}),1)},235:(e,t,o)=>{function r(e){e.querySelectorAll("input").forEach((e=>{e.value=null}))}o.d(t,{c:()=>r})},242:(e,t,o)=>{o.d(t,{z:()=>n});var r=o(235);function n(e){const t=e.target.closest("dialog");(0,r.c)(t),t.close()}},286:(e,t,o)=>{o.d(t,{B:()=>n});var r=o(446);function n(e){e.showModal(),e.querySelector(".btn__save").textContent="Восстановить",e.querySelector(".login__title").firstElementChild.textContent="Восстановление пароля",e.querySelector("input.user-type").value="old",e.showModal(),(0,r.Y)(e)}},446:(e,t,o)=>{function r(e){let t,o,r=!1;e.querySelector(".login__title").addEventListener("mousedown",(n=>{r=!0,t=n.clientX-e.offsetLeft,o=n.clientY-e.offsetTop,e.style.cursor="grabbing"})),document.addEventListener("mousemove",(n=>{r&&(e.style.left=n.clientX-t+"px",e.style.top=n.clientY-o+"px")})),document.addEventListener("mouseup",(()=>{r=!1,e.style.cursor="grab"}))}o.d(t,{Y:()=>r})},591:(e,t,o)=>{o.d(t,{h:()=>n});var r=o(964);async function n(e,t){const o=new FormData(t),n=await fetch(e,{method:"POST",body:o,headers:{"X-CSRFToken":(0,r.m)()}});return await n.json()}},621:(e,t,o)=>{o.d(t,{q:()=>a});var r=o(591),n=o(235);async function a(e,t){e.preventDefault();const o=e.target,a=await(0,r.h)(t,o);"ok"===a.status?((0,n.c)(o),window.history.replaceState(null,"",window.location.pathname),window.location.reload()):o.querySelector(".alert").textContent=a.message}},669:(e,t,o)=>{o.d(t,{k:()=>l});var r=o(591),n=o(446),a=o(235);async function l(e){e.preventDefault();const t=e.target,o=await(0,r.h)("/send-password/",t);if("ok"===o.status){const e=t.closest("dialog"),o=document.querySelector("dialog.log-temporary");o.querySelector("#temp-mail").value=t.querySelector("#register-mail").value,o.querySelector("#temp-password").value=null,o.querySelector(".user-type").value=t.querySelector(".user-type").value,o.querySelector(".alert").textContent="",(0,a.c)(e),e.close(),o.showModal(),o.querySelector("#temp-mail").focus(),(0,n.Y)(o)}else t.querySelector(".alert").textContent=o.message}},964:(e,t,o)=>{function r(){return document.cookie.split("; ").find((e=>e.startsWith("csrftoken=")))?.split("=")[1]}o.d(t,{m:()=>r})}},a={};function l(e){var t=a[e];if(void 0!==t)return t.exports;var o=a[e]={exports:{}};return n[e](o,o.exports,l),o.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},l.a=(n,a,l)=>{var c;l&&((c=[]).d=-1);var i,u,s,d=new Set,y=n.exports,m=new Promise(((e,t)=>{s=t,u=e}));m[t]=y,m[e]=e=>(c&&e(c),d.forEach(e),m.catch((e=>{}))),n.exports=m,a((n=>{var a;i=(n=>n.map((n=>{if(null!==n&&"object"==typeof n){if(n[e])return n;if(n.then){var a=[];a.d=0,n.then((e=>{l[t]=e,r(a)}),(e=>{l[o]=e,r(a)}));var l={};return l[e]=e=>e(a),l}}var c={};return c[e]=e=>{},c[t]=n,c})))(n);var l=()=>i.map((e=>{if(e[o])throw e[o];return e[t]})),u=new Promise((t=>{(a=()=>t(l)).r=0;var o=e=>e!==c&&!d.has(e)&&(d.add(e),e&&!e.d&&(a.r++,e.push(a)));i.map((t=>t[e](o)))}));return a.r?u:l()}),(e=>(e?s(m[o]=e):u(y),r(c)))),c&&c.d<0&&(c.d=0)},l.d=(e,t)=>{for(var o in t)l.o(t,o)&&!l.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l(144)})();