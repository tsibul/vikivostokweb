(()=>{"use strict";var e,t,n,r,o={342:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var r=n(720);await(0,r.R)(),t()}catch(e){t(e)}}),1)},720:(e,t,n)=>{function r(e,t,n){const r=e.closest(".product").querySelector(`div.product-hor__image-frame[data-id="${n}"]`);e.closest(".color-padding").querySelector(`input[id="${e.htmlFor}"]`).checked=!0;const o=r.querySelector("img");if(r!==t){o.complete?(r.classList.remove("item-hidden"),setTimeout((()=>{r.classList.remove("item-opaque")}),1),t.classList.add("item-opaque"),setTimeout((()=>{t.classList.add("item-hidden")}),400)):(o.removeAttribute("loading"),o.addEventListener("load",(()=>{r.classList.remove("item-hidden"),setTimeout((()=>{r.classList.remove("item-opaque")}),1),t.classList.add("item-opaque"),setTimeout((()=>{t.classList.add("item-hidden")}),400)})));const n=r.dataset.article,i=r.dataset.price,c=r.dataset.description,a=e.closest(".product");a.querySelector(".product-hor__color-description").textContent=c,a.querySelector(".price").textContent=i,a.querySelector(".article").textContent=n}}function o(e){const t=this.querySelector(".color-label__check"),n=[...this.closest(".product").querySelectorAll("div.product-hor__image-frame")].find((e=>!e.classList.contains("item-hidden")));if(""===t.style.display){const t=e.target.closest(".color-padding");[...t.querySelectorAll("div.color-label__check")].forEach((e=>{e.removeAttribute("style")})),t.querySelector(`div.color-label__check[data-id="${e.target.dataset.id}"]`).style.display="block",r(this,n,e.target.dataset.id)}}function i(e){const t=e.target.closest(".tab-btn-block"),n=t.closest(".product-frame").querySelector(".tab-content").querySelectorAll(".tab"),r=[...n].find((t=>t.dataset.id===e.target.dataset.id));t.querySelectorAll(".tab-btn").forEach((e=>{e.classList.remove("tab-active")})),e.target.classList.add("tab-active"),n.forEach((e=>{e.classList.remove("tab-show")})),r.classList.add("tab-show")}function c(e){const t=JSON.parse(this.dataset.list),n=[...this.closest(".product-frame").querySelectorAll("div.product-hor__image-frame")].find((e=>!e.classList.contains("item-hidden"))),o=t.indexOf(t.find((e=>e.toString()===n.dataset.id))),i=o===t.length-1?t[0]:t[o+1],c=this.closest(".product").querySelector(`label.color-label[data-id="${i}"]`);[...c.closest(".color-padding").querySelectorAll("div.color-label__check")].forEach((e=>{e.removeAttribute("style")})),c.querySelector(".color-label__check").setAttribute("style","display: block;"),t.length>1&&r(c,n,i)}function a(e){const t=e.target.value;e.target.nextElementSibling.textContent="до "+t}function s(e){const t=document.querySelectorAll('.filter input[type="checkbox"]'),n=document.querySelectorAll(".filter__content_data_color .color-label__check"),r=document.querySelector(".filter"),o=document.querySelector(".filter .input-range"),i=document.querySelector(".filter .input-range__value");t.forEach((e=>{e.checked=!1})),n.forEach((e=>{e.removeAttribute("style")})),o.value=o.max,i.textContent="до "+o.max,r.removeAttribute("open"),[...document.querySelectorAll(".product")].forEach((e=>{e.removeAttribute("style");const t=e.querySelectorAll(".product-hor__image-frame"),n=[...t].map((e=>parseInt(e.dataset.id))),r=Math.round(Math.random()*(t.length-1));e.querySelector(".chev-next").dataset.list=e.querySelector(".chev-next").dataset.listInitial,[...t].forEach(((e,t)=>{e.removeAttribute("style")})),e.querySelector(`.color-padding label.color-label[data-id="${n[r]}"]`).click()})),[...document.querySelectorAll(".products .color-label")].forEach((e=>{e.removeAttribute("style")}));const c=document.querySelector(".filter-badge");c.removeAttribute("style"),c.textContent=""}async function l(e){e.preventDefault();const t="/filter",n=[...document.querySelectorAll(".product")].reduce(((e,t)=>(e[t.getAttribute("data-id")]=t,e)),{}),r=document.querySelectorAll(".product-hor__image-frame"),o=[...r].reduce(((e,t)=>(e[t.getAttribute("data-id")]=t,e)),{});let i,c,a,s;const l=document.querySelector(".filter"),p=d(l.querySelectorAll('.filter__content_data_filter input[type="checkbox"]'));p.length>0&&(i=await m(u(p),Object.keys(n),t,"filter"));const _=d(l.querySelectorAll('.filter__content_data_print input[type="checkbox"]'));_.length>0&&(c=await m(u(_),Object.keys(n),t,"print"));const y=d(l.querySelectorAll('.filter__content_data_color input[type="checkbox"]'));y.length>0&&(a=await m(u(y),Object.keys(o),t,"color"));const f=l.querySelector(".filter .input-range");f.value<=f.max-.1&&(s=function(e,t){const n=[],r=[];return[...t].forEach((t=>{parseFloat(t.dataset.price)<=parseFloat(e)&&(r.push(t.dataset.id),n.includes(t.dataset.goods)||n.push(t.dataset.goods))})),{goods:n,item:r}}(f.value,r)),function(e,t,n,r,o,i,c){let a,s,l,d,u,m;const p=[],_=[];a=e||Object.keys(o),s=t||Object.keys(o),l=n?n.goods:Object.keys(o),u=n&&n.item?n.item:Object.keys(c),d=r?r.goods:Object.keys(o),m=r&&r.item?r.item:Object.keys(c),Object.keys(o).forEach((e=>{a.includes(e)&&s.includes(e)&&l.includes(e)&&d.includes(e)?(o[e].removeAttribute("style"),p.push(o[e])):o[e].setAttribute("style","display:none")})),(n||r)&&(Object.keys(c).forEach((e=>{u.includes(e)&&m.includes(e)?(c[e].removeAttribute("style"),_.push(c[e])):c[e].setAttribute("style","display:none")})),[...document.querySelectorAll(".products .color-label")].forEach((e=>{e.removeAttribute("style"),u.includes(e.dataset.id)&&m.includes(e.dataset.id)||e.setAttribute("style","display:none")})),p.forEach((e=>{const t=[...[...e.querySelectorAll(".product-hor__image-frame")].filter((e=>_.includes(e)))].map((e=>parseInt(e.dataset.id)));e.querySelector(".chev-next").dataset.list=JSON.stringify(t);const n=t.length>1?Math.round(Math.random()*(t.length-1)):0;e.querySelector(`.color-padding label.color-label[data-id="${t[n]}"]`).click()})))}(i,c,a,s,n,0,o),document.querySelector(".filter").removeAttribute("open")}function d(e){return[...e].filter((e=>e.checked))}function u(e){return[...e].map((e=>e.getAttribute("data-id")))}async function m(e,t,n,r){const o=n+"/"+r,i=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goods_id:t,filter_id:e})});return(await i.json()).idList}function p(e,t){let n=[...e].filter((e=>e.checked)).length;t.value<t.max-.1&&n++;const r=document.querySelector(".filter-badge");n?(r.textContent=n,r.style.display="block"):(r.removeAttribute("style"),r.textContent="")}function _(e){let t,n,r;const o=e.target.closest(".product");let i;e.target.closest(".product-frame");const c=o.querySelector(".product-hor__image-frame:not(.item-hidden)")||o.querySelector(".product-sqr__image-frame:not(.item-hidden)");c&&(i=c.dataset.id);const a=o.getAttribute("data-article-set");if(!i||!a)return void console.error("Constructor error: Missing required data attributes",{itemId:i,articleSetAttr:a});const s=JSON.parse(a),l=document.createElement("dialog");l.classList.add("simple-constructor");const d=document.createElement("form");d.id="constructor",d.classList.add("simple-constructor__items"),l.appendChild(d),s.forEach((e=>{r=document.createElement("div"),d.appendChild(r),n=document.createElement("h4"),r.appendChild(n),t=document.createElement("div"),r.appendChild(t),Object.keys(e).includes("option")?(n.textContent="опция",t.classList.add("simple-constructor__option"),function(e,t,n){e.option.forEach((e=>{const r=document.createElement("div");r.classList.add("simple-constructor__option_element"),t.appendChild(r);const o=document.createElement("input");o.type="radio",o.name="option",o.id=e.option_article,o.value=e.option_article,r.appendChild(o);const i=document.createElement("label");i.textContent=e.name,i.htmlFor=e.option_article,r.appendChild(i),o.addEventListener("change",(e=>{n.querySelector(".simple-constructor__alert").textContent=""}))}))}(e,t,l)):(n.textContent=e.parts_description__name,t.classList.add("simple-constructor__color"),function(e,t,n,r){e.color.forEach((o=>{const i=document.createElement("input");i.type="radio",i.name=e.position,i.id=o.name+o.code+e.position+"_"+n,i.value=o.code,i.hidden=!0,t.appendChild(i);const c=document.createElement("div");c.classList.add("simple-constructor__square_frame");const a=document.createElement("label");a.classList.add("simple-constructor__square","tooltip"),a.style.backgroundColor=o.hex,a.htmlFor=o.name+o.code+e.position+"_"+n;const s=document.createElement("div");s.classList.add("tooltip-text"),s.textContent=o.name,a.appendChild(s),c.appendChild(a),t.appendChild(c),i.addEventListener("change",(e=>{r.querySelector(".simple-constructor__alert").textContent="",[...t.querySelectorAll(".simple-constructor__square_frame")].forEach((e=>{e.style.visibility="hidden"})),c.style.visibility="visible"}))}))}(e,t,i,l))}));const u=document.createElement("div");u.classList.add("simple-constructor__footer");const m=document.createElement("div");m.classList.add("simple-constructor__alert"),u.appendChild(m);const p=document.createElement("div");p.classList.add("btn-block"),u.appendChild(p),l.appendChild(u);const _=document.createElement("button");_.classList.add("btn","btn__save"),_.textContent="Применить",_.addEventListener("click",(()=>{!function(e,t){const n=e.querySelector("form"),r=new FormData(n),o=Object.fromEntries(r.entries()),i=parseInt(t.getAttribute("data-article-length")),c=Object.keys(o).includes("option")?Object.keys(o).length-1:Object.keys(o).length;if(c===i){let n=t.getAttribute("data-goods-article");for(let e=1;e<=c;e++)n=n+"."+o[e];o.option&&(n=n+"."+o.option);const r=t.querySelector(".product-hor__image-frame:not(.item-hidden)")||t.querySelector(".product-sqr__image-frame:not(.item-hidden)"),i=t.querySelector(`.product-hor__image-frame[data-article="${n}"]`)||t.querySelector(`.product-sqr__image-frame[data-article="${n}"]`);if(i)r&&r.classList.add("item-hidden","item-opaque"),i.classList.remove("item-hidden","item-opaque"),e.remove();else{const t=r?r.dataset.price:"";e.querySelector(".simple-constructor__alert").textContent="Для заказа этого товара обратитесь к менеджеру. Цена: "+t}}else e.querySelector(".simple-constructor__alert").textContent="Отметьте все элементы"}(l,o)}));const y=document.createElement("button");y.classList.add("btn","btn__cancel"),y.textContent="Закрыть",y.addEventListener("click",(()=>{!function(e){e.close(),e.remove()}(l)})),p.appendChild(y),p.appendChild(_),document.body.appendChild(l),l.showModal()}function y(){try{return JSON.parse(localStorage.getItem("cart")||"[]")}catch(e){return console.error("Error getting cart from storage:",e),[]}}function f(e){try{localStorage.setItem("cart",JSON.stringify(e)),document.dispatchEvent(new CustomEvent("cart:updated",{detail:{cart:e}}))}catch(e){console.error("Error saving cart to storage:",e)}}function h(e,t=!1,n=3e3){try{const r=document.createElement("div");r.className="success-notification active",r.innerHTML=t?`\n                <i class="fa-solid fa-info success-notification__icon"></i>\n                <div class="success-notification__content">\n                    <h4 class="success-notification__title">Товар уже в корзине</h4>\n                    <p class="success-notification__message">\n                        ${e.name}\n                        <br>\n                        Артикул: ${e.article}\n                        <br>\n                        Количество: ${e.quantity}\n                    </p>\n                </div>\n                <button class="success-notification__close">×</button>\n            `:`\n                <i class="fa-solid fa-check success-notification__icon"></i>\n                <div class="success-notification__content">\n                    <h4 class="success-notification__title">Товар добавлен в корзину</h4>\n                    <p class="success-notification__message">\n                        ${e.name}\n                        <br>\n                        Артикул: ${e.article}\n                    </p>\n                </div>\n                <button class="success-notification__close">×</button>\n            `,document.body.appendChild(r),setTimeout((()=>{r.classList.remove("active"),setTimeout((()=>r.remove()),300)}),n),r.querySelector(".success-notification__close").addEventListener("click",(()=>{r.classList.remove("active"),setTimeout((()=>r.remove()),300)}))}catch(e){console.error("Error showing notification:",e)}}function v(e,t=3e3){try{const n=document.createElement("div");n.className="success-notification active",n.innerHTML=`\n            <i class="fa-solid fa-exclamation-triangle success-notification__icon"></i>\n            <div class="success-notification__content">\n                <h4 class="success-notification__title">Ошибка</h4>\n                <p class="success-notification__message">${e}</p>\n            </div>\n            <button class="success-notification__close">×</button>\n        `,document.body.appendChild(n),setTimeout((()=>{n.classList.remove("active"),setTimeout((()=>n.remove()),300)}),t),n.querySelector(".success-notification__close").addEventListener("click",(()=>{n.classList.remove("active"),setTimeout((()=>n.remove()),300)}))}catch(e){console.error("Error showing error notification:",e)}}n.d(t,{R:()=>x});const g=new Map;async function b(e){try{if(!e||!e.id)return v("Невозможно добавить товар в корзину: отсутствует ID товара"),null;const n=(t=e.id)&&y().find((e=>e.id===t))||null;if(n)return h(n,!0),n;const r=e.price||0,o={id:e.id,goodsId:e.goodsId||e.id,name:e.name||"Товар",article:e.article||"",description:e.description||"",image:e.image||"/static/viki_web/icons/logo.svg",price:r,quantity:1,branding:[],promotion:!!e.promotion};!function(e){if(!e||!e.id)return console.error("Invalid item data, ID is required"),y();const t=y(),n=t.findIndex((t=>t.id===e.id));-1!==n?t[n]=e:t.push(e),f(t)}(o),h(o,!1),document.dispatchEvent(new CustomEvent("product:added_to_cart",{detail:{product:o}}));try{const e=await async function(e){if(g.has(e))return g.get(e);try{const t=await fetch(`/api/get-item-price/${e}/`);if(!t.ok)throw new Error("Failed to fetch product price");const n=await t.json();return n.success?(g.set(e,n),n):(console.error("Error fetching product price:",n.error||"Unknown error"),null)}catch(e){return console.error("Error fetching product price:",e),null}}(o.id);if(e&&e.success){const t=function(e,t){if(!e)return 0;if(e.standard_price)return e.price;if(e.prices&&e.prices.length>0){const n=[...e.prices].sort(((e,t)=>e.quantity-t.quantity));let r=n[0].price;for(let e=0;e<n.length&&t>=n[e].quantity;e++)r=e+1<n.length?n[e+1].price:n[e].price;return r}return 0}(e,1);t!==o.price&&(o.price=t,function(e){if(!e||!e.id)return console.error("Invalid item data, ID is required"),null;const t=y(),n=t.findIndex((t=>t.id===e.id));-1===n?console.warn("Item not found in cart, cannot update"):(t[n]=e,f(t))}(o))}}catch(e){console.warn("Could not fetch price data, using original price:",e)}return o}catch(e){return console.error("Error adding product to cart:",e),v("Ошибка при добавлении товара в корзину"),null}var t}let q=!1;function S(){q||(document.addEventListener("click",(async function(e){const t=e.target.closest(".add-to-cart");if(t){e.preventDefault();try{const e=function(e){try{const t=e.closest(".product, .detail-page__content, .recently-viewed__item");if(!t)return console.error("Product container not found"),null;let n={quantity:1,branding:[]};return t.classList.contains("recently-viewed__item")?function(e,t){const n=e.querySelector("img:not(.item-hidden)");if(!n)throw new Error("Active image not found in recently viewed item");const r=e.querySelector('.square[style*="outline: 1px solid"]'),o=r?r.querySelector(".tooltip-text")?.textContent.trim():"";return{...t,id:n.dataset.id,goodsId:e.dataset.id,name:e.querySelector(".recently-viewed__name")?.textContent.trim()||"",article:e.querySelector(".recently-viewed__article")?.textContent.trim().replace("Артикул:","").trim()||"",price:parseFloat(e.querySelector(".recently-viewed__price")?.textContent.replace(/[^\d.,]/g,"").replace(",","."))||0,image:n.src||"/static/viki_web/icons/logo.svg",description:e.querySelector(".recently-viewed__description")?.textContent.trim()||o||"",colorDescription:o}}(t,n):t.querySelector(".detail-page__main-image")?function(e,t){const n=e.querySelector(".detail-page__main-image img:not(.item-hidden)");if(!n)throw new Error("Active image not found in detail page");return{...t,id:n.dataset.id,goodsId:e.dataset.id,name:e.querySelector("h1, h2, h3")?.textContent.trim()||"",article:n.dataset.article||"",price:parseFloat(n.dataset.price)||0,image:n.src||"/static/viki_web/icons/logo.svg",description:n.dataset.description||e.querySelector(".detail-page__color-description")?.textContent.trim()||""}}(t,n):function(e,t){const n=e.querySelector(".product-hor__image-frame:not(.item-hidden), .product-sqr__image-frame:not(.item-hidden)");if(!n)throw new Error("Active image frame not found in catalog product");const r=n.querySelector("img")||n;return{...t,id:n.dataset.id,goodsId:e.dataset.id,name:e.querySelector("h3")?.textContent.trim()||"",article:n.dataset.article||"",price:parseFloat(n.dataset.price)||0,image:"IMG"===r.tagName?r.src:"/static/viki_web/icons/logo.svg",description:n.dataset.description||e.querySelector(".product-hor__color-description")?.textContent.trim()||""}}(t,n)}catch(e){return console.error("Error extracting product data:",e),null}}(t);if(!e)return void v("Не удалось получить данные о товаре");await b(e)}catch(e){console.error("Error handling add to cart click:",e),v("Ошибка при добавлении товара в корзину")}}})),q=!0)}class E{static init(){const e=document.querySelector(".recently-viewed__items");if(!e)return;e.innerHTML="";const t=this.getRecentlyViewedProducts();t&&t.length>0&&(t.forEach((t=>{const n=this.createProductElement(JSON.parse(t.data));e.appendChild(n)})),this.initEventListeners(),S())}static getRecentlyViewedProducts(){try{const e=localStorage.getItem("recentlyViewed");return e?JSON.parse(e):[]}catch(e){return console.error("Error retrieving recently viewed products:",e),[]}}static createProductElement(e){const t=e.goods_item||{},n=e.random_item||{},r=n.item||{},o=e.price||0,i=e.price_volume||!1,c=e.promotion_price||n.promotion_price||!1,a=document.createElement("div");a.className="recently-viewed__item",a.dataset.id=t.id,r.image;const s=r.item_article||t.article||"",l=this.createColorElements(e.colors||[]),d=n.price&&"0"!==n.price&&""!==n.price?n.price:o||"0";let u="";return e.item_list.forEach((t=>{const n=t.price&&"0"!==t.price&&""!==t.price?t.price:e.price||"0",r=t.promotion_price||e.promotion_price||!1;t.item.id!=e.id_random?u+=`<img src="/static/viki_web_cms/files/item_photo/${t.item.image}" \n                      alt="${t.item.name||""}" \n                      class="item-hidden item-opaque"\n                      loading="lazy"\n                      data-id="${t.item.id}"\n                      data-article="${t.item.item_article||""}"\n                      data-price="${n}"\n                      data-promotion="${r?"true":"false"}"\n                      data-color-description="${t.color_description||""}" />`:u+=`<img src="/static/viki_web_cms/files/item_photo/${t.item.image}" \n                      alt="${t.item.name||""}" \n                      data-id="${t.item.id}"\n                      data-article="${t.item.item_article||""}"\n                      data-price="${n}"\n                      data-promotion="${r?"true":"false"}"\n                      data-color-description="${t.color_description||""}" />`})),a.innerHTML=`\n      <div class="recently-viewed__img">\n       <button class="recently-viewed__nav-button recently-viewed__nav-button--prev">\n          <i class="fa-solid fa-chevron-left"></i>\n       </button>\n       <button class="recently-viewed__nav-button recently-viewed__nav-button--next">\n          <i class="fa-solid fa-chevron-right"></i>\n       </button>\n       ${u}\n      </div>\n      <div class="recently-viewed__info">\n        <div class="recently-viewed__name">${t.name||""}</div>\n        <div class="recently-viewed__article" data-name="article">Артикул: ${s}</div>\n        <div class="recently-viewed__description" data-name="description">${n.color_description||""}</div>\n        <div class="recently-viewed__price" data-name="price">\n            <span>Цена${i?" от":""}:</span> ${d} руб.\n            ${c?'<span class="product-promotion-badge">Акция</span>':""}\n        </div>\n        <div class="recently-viewed__colors">\n          ${l}\n        </div>\n      </div>\n      <button class="recently-viewed__cart-btn btn btn__save add-to-cart">\n        <i class="fa-solid fa-cart-shopping"></i>&nbsp; В корзину\n      </button>\n      <a class="btn-hor"\n         href="/product/${t.slug}">\n         <button class="btn btn__cancel btn-sqr">\n            <div>Подробнее&nbsp;</div>\n            <i class="fa-solid fa-arrow-right"></i>\n        </button>\n      </a>\n    `,a}static createColorElements(e){return e&&0!==e.length?e.map((e=>{const t=e.main_color__hex||"#FFFFFF",n=e.main_color__name||"Цвет";return`\n        <div class="square square-small tooltip" \n             style="background-color: ${t};"  \n             data-id="${e.id}">\n          <span class="tooltip-text">${n}</span>\n        </div>\n      `})).join(""):""}static navigateRecentlyViewedImages(e,t){const n=Array.from(e.querySelectorAll(".recently-viewed__img img"));if(n.length<=1)return;const r=n.find((e=>!e.classList.contains("item-hidden")));if(!r)return;const o=n.indexOf(r);let i;i="prev"===t?o>0?o-1:n.length-1:o<n.length-1?o+1:0;const c=n[i];r.classList.add("item-hidden"),c.classList.remove("item-hidden","item-opaque");const a=c.dataset.id;e.querySelectorAll(".recently-viewed__colors .square").forEach((e=>{e.style.outline="none",e.style.outlineOffset="0",e.dataset.id===a&&(e.style.outline="1px solid #009EA3",e.style.outlineOffset="2px")}));const s=e.querySelector(".recently-viewed__article");s&&(s.textContent=`Артикул: ${c.dataset.article}`);const l=e.querySelector(".recently-viewed__price");if(l){const t=c.dataset.price||"0",n=e.querySelector(".recently-viewed__price span").textContent.includes("от"),r="true"===c.dataset.promotion;l.innerHTML=`<span>Цена${n?" от":""}:</span> ${t} руб.\n                            ${r?'<span class="product-promotion-badge">Акция</span>':""}`}const d=e.querySelector(".recently-viewed__description");d&&(d.textContent=c.getAttribute("data-color-description")||"")}static initEventListeners(){document.querySelectorAll(".recently-viewed__colors .square").forEach((e=>{const t=e.closest(".recently-viewed__item"),n=[...t.querySelectorAll(".recently-viewed__img img")].find((e=>!e.classList.contains("item-hidden")));n&&t.querySelectorAll(`.square[data-id="${n.dataset.id}"]`).forEach((e=>{e.style.outline="1px solid #009EA3",e.style.outlineOffset="2px"})),e.addEventListener("click",(function(){const e=this.closest(".recently-viewed__item"),t=this.dataset.id,n=e.querySelectorAll(".recently-viewed__img img");e.querySelectorAll(".recently-viewed__colors .square").forEach((e=>{e.style.outline="none",e.style.outlineOffset="0"})),this.style.outline="1px solid #009EA3",this.style.outlineOffset="2px";const r=[...n].find((e=>!e.classList.contains("item-hidden")));if(!r)return;const o=[...n].find((e=>e.dataset.id===t));if(!o||r===o)return;r.classList.add("item-hidden"),o.classList.remove("item-hidden","item-opaque");const i=e.querySelector(".recently-viewed__article");i&&(i.textContent=`Артикул: ${o.dataset.article}`);const c=e.querySelector(".recently-viewed__price");if(c){const t=o.dataset.price||"0",n=e.querySelector(".recently-viewed__price span").textContent.includes("от"),r="true"===o.dataset.promotion;c.innerHTML=`<span>Цена${n?" от":""}:</span> ${t} руб.\n                                ${r?'<span class="product-promotion-badge">Акция</span>':""}`}const a=e.querySelector(".recently-viewed__description");a&&(a.textContent=o.getAttribute("data-color-description")||"")}))}));const e=document.querySelectorAll(".recently-viewed__nav-button--prev"),t=document.querySelectorAll(".recently-viewed__nav-button--next");e.forEach((e=>{e.addEventListener("click",(function(){const e=this.closest(".recently-viewed__item");E.navigateRecentlyViewedImages(e,"prev")}))})),t.forEach((e=>{e.addEventListener("click",(function(){const e=this.closest(".recently-viewed__item");E.navigateRecentlyViewedImages(e,"next")}))}))}}const w=E;async function x(){document.addEventListener("DOMContentLoaded",(async()=>{const e=document.querySelectorAll(".filter .product-header__filter-content_checkbox-hidden"),t=document.querySelectorAll(".products label.color-label"),n=document.querySelectorAll(".tab-btn"),r=document.querySelectorAll(".chev-next"),d=document.querySelector(".filter .input-range"),u=document.querySelector(".filter .btn__save"),m=document.querySelector(".filter .btn__cancel"),y=document.querySelectorAll(".filter input[type='checkbox']"),f=document.querySelectorAll(".btn-multicolor");e.forEach((e=>{e.addEventListener("change",(t=>{const n=document.querySelector(`label[for="${e.id}"]`).querySelector(".color-label__check");e.checked?n.style.display="block":n.removeAttribute("style")}))})),t.forEach((e=>{e.addEventListener("click",o)})),n.forEach((e=>{e.addEventListener("click",i)})),r.forEach((e=>{e.addEventListener("click",c)})),d.addEventListener("input",a),d.addEventListener("input",(e=>{p(y,d)})),m.addEventListener("click",s),u.addEventListener("click",await l),y.forEach((e=>{e.addEventListener("change",(e=>{p(y,d)}))})),f.forEach((e=>{e.addEventListener("click",_)})),document.querySelector(".recently-viewed__items")&&w.init()}))}}},i={};function c(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={exports:{}};return o[e](n,n.exports,c),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(o,i,c)=>{var a;c&&((a=[]).d=-1);var s,l,d,u=new Set,m=o.exports,p=new Promise(((e,t)=>{d=t,l=e}));p[t]=m,p[e]=e=>(a&&e(a),u.forEach(e),p.catch((e=>{}))),o.exports=p,i((o=>{var i;s=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var i=[];i.d=0,o.then((e=>{c[t]=e,r(i)}),(e=>{c[n]=e,r(i)}));var c={};return c[e]=e=>e(i),c}}var a={};return a[e]=e=>{},a[t]=o,a})))(o);var c=()=>s.map((e=>{if(e[n])throw e[n];return e[t]})),l=new Promise((t=>{(i=()=>t(c)).r=0;var n=e=>e!==a&&!u.has(e)&&(u.add(e),e&&!e.d&&(i.r++,e.push(i)));s.map((t=>t[e](n)))}));return i.r?l:c()}),(e=>(e?d(p[n]=e):l(m),r(a)))),a&&a.d<0&&(a.d=0)},c.d=(e,t)=>{for(var n in t)c.o(t,n)&&!c.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(342)})();