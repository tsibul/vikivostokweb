(()=>{"use strict";var e,t,o,r,c={342:(e,t,o)=>{o.a(e,(async(e,t)=>{try{var r=o(705);await(0,r.R)(),t()}catch(e){t(e)}}),1)},705:(e,t,o)=>{function r(e,t,o){const r=e.closest(".product").querySelector(`div.product-hor__image-frame[data-id="${o}"]`);e.closest(".color-padding").querySelector(`input[id="${e.htmlFor}"]`).checked=!0;const c=r.querySelector("img");if(r!==t){c.complete?(r.classList.remove("item-hidden"),setTimeout((()=>{r.classList.remove("item-opaque")}),1),t.classList.add("item-opaque"),setTimeout((()=>{t.classList.add("item-hidden")}),400)):(c.removeAttribute("loading"),c.addEventListener("load",(()=>{r.classList.remove("item-hidden"),setTimeout((()=>{r.classList.remove("item-opaque")}),1),t.classList.add("item-opaque"),setTimeout((()=>{t.classList.add("item-hidden")}),400)})));const o=r.dataset.article,l=r.dataset.price,n=r.dataset.description,a=e.closest(".product");a.querySelector(".product-hor__color-description").textContent=n,a.querySelector(".price").textContent=l,a.querySelector(".article").textContent=o}}function c(e){const t=this.querySelector(".color-label__check"),o=[...this.closest(".product").querySelectorAll("div.product-hor__image-frame")].find((e=>!e.classList.contains("item-hidden")));if(""===t.style.display){const t=e.target.closest(".color-padding");[...t.querySelectorAll("div.color-label__check")].forEach((e=>{e.removeAttribute("style")})),t.querySelector(`div.color-label__check[data-id="${e.target.dataset.id}"]`).style.display="block",r(this,o,e.target.dataset.id)}}function l(e){const t=e.target.closest(".tab-btn-block"),o=t.closest(".product-frame").querySelector(".tab-content").querySelectorAll(".tab"),r=[...o].find((t=>t.dataset.id===e.target.dataset.id));t.querySelectorAll(".tab-btn").forEach((e=>{e.classList.remove("tab-active")})),e.target.classList.add("tab-active"),o.forEach((e=>{e.classList.remove("tab-show")})),r.classList.add("tab-show")}function n(e){const t=JSON.parse(this.dataset.list),o=[...this.closest(".product-frame").querySelectorAll("div.product-hor__image-frame")].find((e=>!e.classList.contains("item-hidden"))),c=t.indexOf(t.find((e=>e.toString()===o.dataset.id))),l=c===t.length-1?t[0]:t[c+1],n=this.closest(".product").querySelector(`label.color-label[data-id="${l}"]`);[...n.closest(".color-padding").querySelectorAll("div.color-label__check")].forEach((e=>{e.removeAttribute("style")})),n.querySelector(".color-label__check").setAttribute("style","display: block;"),t.length>1&&r(n,o,l)}function a(e){const t=e.target.value;e.target.nextElementSibling.textContent="до "+t}function i(e){const t=document.querySelectorAll('.filter input[type="checkbox"]'),o=document.querySelectorAll(".filter__content_data_color .color-label__check"),r=document.querySelector(".filter"),c=document.querySelector(".filter .input-range"),l=document.querySelector(".filter .input-range__value");t.forEach((e=>{e.checked=!1})),o.forEach((e=>{e.removeAttribute("style")})),c.value=c.max,l.textContent="до "+c.max,r.removeAttribute("open"),[...document.querySelectorAll(".product")].forEach((e=>{e.removeAttribute("style");const t=e.querySelectorAll(".product-hor__image-frame"),o=[...t].map((e=>parseInt(e.dataset.id))),r=Math.round(Math.random()*(t.length-1));e.querySelector(".chev-next").dataset.list=e.querySelector(".chev-next").dataset.listInitial,[...t].forEach(((e,t)=>{e.removeAttribute("style")})),e.querySelector(`.color-padding label.color-label[data-id="${o[r]}"]`).click()})),[...document.querySelectorAll(".products .color-label")].forEach((e=>{e.removeAttribute("style")}));const n=document.querySelector(".filter-badge");n.removeAttribute("style"),n.textContent=""}async function s(e){e.preventDefault();const t=`./${e.target.dataset.url}`,o=[...document.querySelectorAll(".product")].reduce(((e,t)=>(e[t.getAttribute("data-id")]=t,e)),{}),r=document.querySelectorAll(".product-hor__image-frame"),c=[...r].reduce(((e,t)=>(e[t.getAttribute("data-id")]=t,e)),{});let l,n,a,i;const s=document.querySelector(".filter"),m=d(s.querySelectorAll('.filter__content_data_filter input[type="checkbox"]'));m.length>0&&(l=await p(u(m),Object.keys(o),t,"filter"));const y=d(s.querySelectorAll('.filter__content_data_print input[type="checkbox"]'));y.length>0&&(n=await p(u(y),Object.keys(o),t,"print"));const h=d(s.querySelectorAll('.filter__content_data_color input[type="checkbox"]'));h.length>0&&(a=await p(u(h),Object.keys(c),t,"color"));const b=s.querySelector(".filter .input-range");b.value<=b.max-.1&&(i=function(e,t){const o=[],r=[];return[...t].forEach((t=>{parseFloat(t.dataset.price)<=parseFloat(e)&&(r.push(t.dataset.id),o.includes(t.dataset.goods)||o.push(t.dataset.goods))})),{goods:o,item:r}}(b.value,r)),function(e,t,o,r,c,l,n){let a,i,s,d,u,p;const m=[],y=[];a=e||Object.keys(c),i=t||Object.keys(c),s=o?o.goods:Object.keys(c),u=o&&o.item?o.item:Object.keys(n),d=r?r.goods:Object.keys(c),p=r&&r.item?r.item:Object.keys(n),Object.keys(c).forEach((e=>{a.includes(e)&&i.includes(e)&&s.includes(e)&&d.includes(e)?(c[e].removeAttribute("style"),m.push(c[e])):c[e].setAttribute("style","display:none")})),(o||r)&&(Object.keys(n).forEach((e=>{u.includes(e)&&p.includes(e)?(n[e].removeAttribute("style"),y.push(n[e])):n[e].setAttribute("style","display:none")})),[...document.querySelectorAll(".products .color-label")].forEach((e=>{e.removeAttribute("style"),u.includes(e.dataset.id)&&p.includes(e.dataset.id)||e.setAttribute("style","display:none")})),m.forEach((e=>{const t=[...[...e.querySelectorAll(".product-hor__image-frame")].filter((e=>y.includes(e)))].map((e=>parseInt(e.dataset.id)));e.querySelector(".chev-next").dataset.list=JSON.stringify(t);const o=t.length>1?Math.round(Math.random()*(t.length-1)):0;e.querySelector(`.color-padding label.color-label[data-id="${t[o]}"]`).click()})))}(l,n,a,i,o,0,c),document.querySelector(".filter").removeAttribute("open")}function d(e){return[...e].filter((e=>e.checked))}function u(e){return[...e].map((e=>e.getAttribute("data-id")))}async function p(e,t,o,r){const c=o+"/"+r,l=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({goods_id:t,filter_id:e})});return(await l.json()).idList}function m(e,t){let o=[...e].filter((e=>e.checked)).length;t.value<t.max-.1&&o++;const r=document.querySelector(".filter-badge");o?(r.textContent=o,r.style.display="block"):(r.removeAttribute("style"),r.textContent="")}function y(e){let t,o,r;const c=e.target.closest(".product"),l=e.target.closest(".product-frame"),n=l.dataset.id,a=JSON.parse(c.dataset.articleSet),i=document.createElement("dialog");i.classList.add("simple-constructor");const s=document.createElement("form");s.id="constructor",s.classList.add("simple-constructor__items"),i.appendChild(s),a.forEach((e=>{r=document.createElement("div"),s.appendChild(r),o=document.createElement("h4"),r.appendChild(o),t=document.createElement("div"),r.appendChild(t),Object.keys(e).includes("option")?(o.textContent="опция",t.classList.add("simple-constructor__option"),function(e,t,o){e.option.forEach((e=>{const r=document.createElement("div");r.classList.add("simple-constructor__option_element"),t.appendChild(r);const c=document.createElement("input");c.type="radio",c.name="option",c.id=e.option_article,c.value=e.option_article,r.appendChild(c);const l=document.createElement("label");l.textContent=e.name,l.htmlFor=e.option_article,r.appendChild(l),c.addEventListener("change",(e=>{o.querySelector(".simple-constructor__alert").textContent=""}))}))}(e,t,i)):(o.textContent=e.parts_description__name,t.classList.add("simple-constructor__color"),function(e,t,o,r){e.color.forEach((c=>{const l=document.createElement("input");l.type="radio",l.name=e.position,l.id=c.name+c.code+e.position+"_"+o,l.value=c.code,l.hidden=!0,t.appendChild(l);const n=document.createElement("div");n.classList.add("simple-constructor__square_frame");const a=document.createElement("label");a.classList.add("simple-constructor__square","tooltip"),a.style.backgroundColor=c.hex,a.htmlFor=c.name+c.code+e.position+"_"+o;const i=document.createElement("div");i.classList.add("tooltip-text"),i.textContent=c.name,a.appendChild(i),n.appendChild(a),t.appendChild(n),l.addEventListener("change",(e=>{r.querySelector(".simple-constructor__alert").textContent="",[...t.querySelectorAll(".simple-constructor__square_frame")].forEach((e=>{e.style.visibility="hidden"})),n.style.visibility="visible"}))}))}(e,t,n,i))}));const d=document.createElement("div");d.classList.add("simple-constructor__footer");const u=document.createElement("div");u.classList.add("simple-constructor__alert"),d.appendChild(u);const p=document.createElement("div");p.classList.add("btn-block"),d.appendChild(p),i.appendChild(d);const m=document.createElement("button");m.classList.add("btn","btn__save"),m.textContent="Применить",m.addEventListener("click",(()=>{!function(e,t,o){const r=e.querySelector("form"),c=new FormData(r),l=Object.fromEntries(c.entries()),n=parseInt(t.dataset.articleLength),a=Object.keys(l).includes("option")?Object.keys(l).length-1:Object.keys(l).length;if(a===n){let r=t.dataset.goodsArticle;for(let e=1;e<=a;e++)r=r+"."+l[e];l.option&&(r=r+"."+l.option);const c=t.querySelector(`div.product-frame[data-article="${r}"]`);c?(o.classList.add("item-hidden","item-opaque"),c.classList.remove("item-hidden","item-opaque"),e.remove()):e.querySelector(".simple-constructor__alert").textContent="Для заказа этого товара обратитесь к менеджеру. Цена: "+o.dataset.price}else e.querySelector(".simple-constructor__alert").textContent="Отметьте все элементы";console.log()}(i,c,l)}));const y=document.createElement("button");y.classList.add("btn","btn__cancel"),y.textContent="Закрыть",y.addEventListener("click",(()=>{!function(e){e.close(),e.remove()}(i)})),p.appendChild(y),p.appendChild(m),document.body.appendChild(i),i.showModal()}async function h(){const e=document.querySelectorAll(".filter .product-header__filter-content_checkbox-hidden"),t=document.querySelectorAll(".products label.color-label"),o=document.querySelectorAll(".tab-btn"),r=document.querySelectorAll(".chev-next"),d=document.querySelector(".filter .input-range"),u=document.querySelector(".filter .btn__save"),p=document.querySelector(".filter .btn__cancel"),h=document.querySelectorAll(".filter input[type='checkbox']"),b=document.querySelectorAll(".btn-multicolor");e.forEach((e=>{e.addEventListener("change",(t=>{const o=document.querySelector(`label[for="${e.id}"]`).querySelector(".color-label__check");e.checked?o.style.display="block":o.removeAttribute("style")}))})),t.forEach((e=>{e.addEventListener("click",c)})),o.forEach((e=>{e.addEventListener("click",l)})),r.forEach((e=>{e.addEventListener("click",n)})),d.addEventListener("input",a),d.addEventListener("input",(e=>{m(h,d)})),p.addEventListener("click",i),u.addEventListener("click",await s),h.forEach((e=>{e.addEventListener("change",(e=>{m(h,d)}))})),b.forEach((e=>{e.addEventListener("click",y)}))}o.d(t,{R:()=>h})}},l={};function n(e){var t=l[e];if(void 0!==t)return t.exports;var o=l[e]={exports:{}};return c[e](o,o.exports,n),o.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",o="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},n.a=(c,l,n)=>{var a;n&&((a=[]).d=-1);var i,s,d,u=new Set,p=c.exports,m=new Promise(((e,t)=>{d=t,s=e}));m[t]=p,m[e]=e=>(a&&e(a),u.forEach(e),m.catch((e=>{}))),c.exports=m,l((c=>{var l;i=(c=>c.map((c=>{if(null!==c&&"object"==typeof c){if(c[e])return c;if(c.then){var l=[];l.d=0,c.then((e=>{n[t]=e,r(l)}),(e=>{n[o]=e,r(l)}));var n={};return n[e]=e=>e(l),n}}var a={};return a[e]=e=>{},a[t]=c,a})))(c);var n=()=>i.map((e=>{if(e[o])throw e[o];return e[t]})),s=new Promise((t=>{(l=()=>t(n)).r=0;var o=e=>e!==a&&!u.has(e)&&(u.add(e),e&&!e.d&&(l.r++,e.push(l)));i.map((t=>t[e](o)))}));return l.r?s:n()}),(e=>(e?d(m[o]=e):s(p),r(a)))),a&&a.d<0&&(a.d=0)},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(342)})();