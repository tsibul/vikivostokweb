(()=>{"use strict";var e,t,a,n,d={35:(e,t,a)=>{a.d(t,{a:()=>d});var n=a(9712);function d(e,t,a){const n=document.querySelector(".dictionary-frame__header"),d=n.cloneNode(!0);n.parentNode.replaceChild(d,n);const c=d.querySelector('input[type="checkbox"]'),o=c.cloneNode(!0);c.parentNode.replaceChild(o,c);const r=d.querySelector(".dictionary-frame__input"),s=r.cloneNode(!0);r.parentNode.replaceChild(s,r);const l=d.querySelector(".btn__save"),p=l.cloneNode(!0);l.parentNode.replaceChild(p,l);const u=d.querySelector(".btn__cancel"),m=u.cloneNode(!0);u.parentNode.replaceChild(m,u),o.addEventListener("change",(async()=>{const n=s.value;await i(n,o.checked,e,t,a)})),p.addEventListener("click",(async()=>{const n=s.value;await i(n,o.checked,e,t,a)})),m.addEventListener("click",(async()=>{s.value="",await i("",o.checked,e,t,a)})),s.addEventListener("keypress",(async n=>{if("Enter"===n.key){const n=s.value;await i(n,o.checked,e,t,a)}}))}async function i(e,t,a,d,i){let c=document.querySelector(".dictionary-content__rows");c.innerHTML="",await(0,n.O)(c,0,e,t,a,d,i)}},304:(e,t,a)=>{a.d(t,{I:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t.step="0.0001",t}},449:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{p:()=>s});var d=a(4708),i=a(4189),c=a(5800),o=a(8833),r=e([i,c,o]);async function s(e,t,a){switch(t){case"1":return(0,i.N)(e,(0,d.Z)(a));case"2":return(0,c.s)(e,(0,d.Z)(a));case"3":return(0,o.h)(e,(0,d.Z)(a))}}[i,c,o]=r.then?(await r)():r,n()}catch(l){n(l)}}))},483:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{X4:()=>s,n6:()=>l,nA:()=>r});var d=a(7310),i=a(3757),c=a(816),o=e([d,c]);async function r(){const e=d.e+"dropdown_list/Price";return l(await(0,i.D)(e))}function s(e,t,a,n){t.innerHTML="",e.forEach((d=>{(0,c.p)(d,t,a,n),a.value=e[0].value,n.value=e[0].id}))}function l(e){const t=document.createElement("div");t.classList.add("price-dropdown");const a=document.createElement("div");a.classList.add("price-dropdown__frame");const n=document.createElement("input");n.classList.add("price-dropdown__input"),n.readOnly=!0,a.appendChild(n),n.insertAdjacentHTML("afterend",'<i class="fa-solid fa-chevron-down"></i>');const d=document.createElement("input");d.hidden=!0,d.type="text",d.name="priceDateId",t.appendChild(a),t.appendChild(d);const i=document.createElement("ul");return i.classList.add("dropdown__list","invisible"),t.appendChild(i),e[0]&&(n.value=e[0].value,d.value=e[0].id),s(e,i,n,d),t.addEventListener("click",(e=>{i.classList.remove("invisible")})),document.addEventListener("click",(e=>{a.contains(e.target)||i.classList.contains("invisible")||i.classList.add("invisible")})),t}[d,c]=o.then?(await o)():o,n()}catch(p){n(p)}}))},568:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{s:()=>c});var d=a(897),i=e([d]);async function c(e){const t="14px 1fr 24px 1fr 2fr 1fr 2fr 1fr 1fr 1fr 1fr 1fr 36px 36px 0.8fr",a=await(0,d.Q)(e,t,0,0,"None");return a.id=e,a.dataset.grid=t,a}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},816:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{M:()=>r,p:()=>l});var d=a(2952),i=a(3757),c=a(7310),o=e([c]);async function r(e,t,a){const n=document.createElement("div");n.classList.add("dropdown");const o=(0,d.k)("text"),r=document.createElement("input");r.hidden=!0,r.type="text",o.classList.add("dropdown__input"),n.appendChild(o),n.appendChild(r),n.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const l=document.createElement("ul");l.classList.add("dropdown__list","invisible");const p=c.e+"dropdown_list/"+e,u=await(0,i.D)(p);if(t){let e=u.find((e=>e.id===t));o.value=e.value,r.value=e.id}else u[0]&&!a&&(o.value=u[0].value,r.value=u[0].id);return s(u,l,o,r,a),o.addEventListener("click",(()=>{l.classList.toggle("invisible")})),n.appendChild(l),o.addEventListener("keyup",(e=>{let t=e.target.value.toUpperCase();const a=u.filter((e=>e.value.toUpperCase().indexOf(t)>-1));l.innerHTML="",s(a,l,o,r)})),n}function s(e,t,a,n,d){d&&l({id:"",value:""},t,a,n),e.forEach((e=>{l(e,t,a,n)}))}function l(e,t,a,n){const d=document.createElement("li");d.classList.add("dropdown__list_item"),d.value=e.id,d.textContent=e.value,d.addEventListener("click",(e=>{a.value=e.target.textContent,n.value=e.target.value,n.dispatchEvent(new Event("change",{bubbles:!0})),t.classList.add("invisible")})),t.appendChild(d)}c=(o.then?(await o)():o)[0],n()}catch(p){n(p)}}))},897:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Q:()=>r});var d=a(9550),i=a(6723),c=a(6825),o=e([c,d,i]);async function r(e,t,a,n,o){const r=await(0,c.G)(e),s=document.createElement("div");s.classList.add("dictionary-content");const l=await(0,d.Z)(r);l.style.gridTemplateColumns=t,s.appendChild(l);const p=await(0,i.Y)(e,a,n,0,o,t);return s.appendChild(p),s.dataset.grid=t,s}[c,d,i]=o.then?(await o)():o,n()}catch(s){n(s)}}))},905:(e,t,a)=>{function n(e){const t=document.createElement("label");return t.classList.add("modal__content_label"),t.htmlFor=e.field+"Input",t.textContent=e.label+(e.null?"":"*"),t}a.d(t,{d:()=>n})},1057:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{D:()=>s});var d=a(7310),i=a(3757),c=a(2428),o=a(3126),r=e([d,o,c]);async function s(e,t,a,n,r,s){const l=d.e+"catalogue_data/"+t+"/"+a+"/"+n+"/"+r+"/"+s,p=(await(0,i.D)(l)).values;let u,m=0;const _=e.querySelector(`form[data-last-id="${n}"]`);_&&_.removeEventListener("mouseover",o.y);for(const t of p)u=document.createElement("form"),await(0,c.I)(t,u),e.appendChild(await u),m++,20===m&&(u.dataset.lastId=Number.parseInt(n)+m,u.addEventListener("mouseover",o.y))}[d,o,c]=r.then?(await r)():r,n()}catch(l){n(l)}}))},1211:(e,t,a)=>{function n(e){const t=document.createElement("button");return t.classList.add("btn","btn__save"),t.textContent=e,t}a.d(t,{E:()=>n})},1316:(e,t,a)=>{a.d(t,{K:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("text");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},1369:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{b:()=>r});var d=a(7310),i=a(3757),c=a(1499),o=e([d]);async function r(e,t,a,n,o){const r=e.target.closest("form"),s=r.querySelector('input[name="id"]'),l=r.querySelector('input[name="colors"]'),p=r.querySelector('input[name="goods_option__id"]'),u=r.querySelector('textarea[name="name"]'),m=r.querySelector('input[name="item_article"]'),_=r.querySelector('input[name="main_color__id"]'),h=r.querySelector(".main_color_text"),y=r.querySelector(".goods_option__name"),f=r.querySelector(".btn__save");function v(){t.textContent="",o.src="",u.value="",m.value="",_.value="",h.textContent="",p.value="",y.textContent="",l.value="",f.disabled=!0,f.classList.contains("btn__disabled")||f.classList.add("btn__disabled")}if(l.value="",p.value="",/(\.jpg|\.jpeg|\.png)$/i.exec(e.target.value)){const r=e.target.files[0],C=new FileReader;C.onload=function(e){o.src=e.target.result},C.readAsDataURL(r),t.textContent=e.target.value.split("\\").pop();const E=t.textContent.split(".")[0],g=d.e+"parse_file_data/"+a+"/"+n+"/"+E+"/"+s.value,b=await(0,i.D)(g);b.error?v():(u.value=b.values.name,m.value=b.values.item_article,_.value=b.values.main_color__id,h.textContent=b.values.main_color_text,p.value=b.values.goods_option__id,y.textContent=b.values.goods_option__name,(0,c.D)(b.values.colors,l),f.disabled=!1,f.classList.remove("btn__disabled"))}else e.target.value="",v()}d=(o.then?(await o)():o)[0],n()}catch(s){n(s)}}))},1401:(e,t,a)=>{a.d(t,{J:()=>d});var n=a(1211);function d(e){const t=document.createElement("dialog");t.classList.add("alert");const a=document.createElement("header");a.classList.add("modal__header");const d=document.createElement("h4");d.textContent="Результат загрузки",a.appendChild(d);const r=document.createElement("div");r.innerHTML="&times;",r.addEventListener("click",(()=>{t.remove()})),a.appendChild(r),t.appendChild(a);const s=i(),l=c("Ошибки",e.recordErrorLength);s.appendChild(l),e.recordError.forEach((e=>{s.appendChild(o(e))})),t.appendChild(s);const p=i(),u=c("Дубли",e.recordDoubleLength);p.appendChild(u),e.recordDouble.forEach((e=>{p.appendChild(o(e))})),t.appendChild(p);const m=i(),_=c("Успешно",e.recordSuccessLength);m.appendChild(_),e.recordSuccess.forEach((e=>{m.appendChild(o(e))})),t.appendChild(m);const h=(0,n.E)("Ok");return h.classList.add("alert__btn"),h.addEventListener("click",(()=>{t.remove()})),t.appendChild(h),t}function i(){const e=document.createElement("details");return e.classList.add("alert__details"),e}function c(e,t){const a=document.createElement("summary");return a.classList.add("alert__summary"),a.textContent=e+" "+t,a}function o(e){const t=document.createElement("div");t.classList.add("alert__element");const a=document.createElement("div");a.textContent="артикул";const n=document.createElement("div");n.textContent=e.item;const d=document.createElement("div");d.textContent="результат";const i=document.createElement("div");return i.textContent=e.message,t.appendChild(a),t.appendChild(n),t.appendChild(d),t.appendChild(i),t}},1499:(e,t,a)=>{function n(e,t){t.value=JSON.stringify(e)}a.d(t,{D:()=>n})},1836:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{i:()=>u,j:()=>p});var d=a(7728),i=a(8063),c=a(9546),o=a(8664),r=a(8007),s=a(6872),l=e([s,r]);function p(){const e=m("Загрузить csv файл");e.fileInput.name="csv_file",e.fileInput.accept=".csv",e.buttonSubmit.addEventListener("click",s.O)}async function u(){const e=m("Загрузить несколько фото"),t=await(0,r.h)({fieldName:{field:"goods",foreignClass:"Goods",null:!1}});t.style.marginTop="8px",e.form.querySelector(".modal__button-block").insertAdjacentElement("beforebegin",t),e.fileInput.name="files",e.fileInput.accept="image/png, image/jpeg, image/jpg",e.fileInput.multiple=!0,e.buttonSubmit.addEventListener("click",s.f)}function m(e){const t=document.querySelector(".service"),a=document.createElement("dialog");a.classList.add("catalogue__modal"),a.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,d.O)(a)}));const n=(0,i.h)(a,"",0);n.firstElementChild.textContent=e,a.appendChild(n);const r=document.createElement("form");r.id="catalogueDialog",r.classList.add("modal__form"),r.enctype="multipart/form-data";const s=document.createElement("div");s.classList.add("catalogue__input-frame");const l=document.createElement("input");l.classList.add("catalogue__modal_file-input"),l.type="file",s.appendChild(l),r.appendChild(s);const p=document.createElement("div");p.classList.add("error-message"),p.textContent="Error",r.appendChild(p),r.appendChild((0,c._)(a,0)),a.appendChild(r);const u=r.querySelector(".submit");return t.appendChild(a),l.addEventListener("change",(()=>{p.textContent="",p.style.display="none"})),a.showModal(),(0,o.Y)(a),{form:r,fileInput:l,buttonSubmit:u}}[s,r]=l.then?(await l)():l,n()}catch(_){n(_)}}))},2428:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{I:()=>h});var d=a(816),i=a(1211),c=a(8264),o=a(5597),r=a(1499),s=a(1369),l=a(3797),p=a(6352),u=a(9370),m=a(9410),_=e([d,s,m,l]);async function h(e,t){t.enctype="multipart/form-data",t.classList.add("catalogue","catalogue__row"),t.appendChild((0,o.t)("number","id",e.id));const a=(0,o.t)("checkbox","deleted",e.deleted);a.addEventListener("change",(e=>(0,u.W)(e))),t.appendChild(a);const n=document.createElement("textarea");n.value=e.name,n.name="name",n.classList.add("catalogue__input"),n.readOnly=!0,t.appendChild(n),t.appendChild((0,o.t)("text","item_article",e.item_article));const _=document.createElement("div");_.classList.add("catalogue__input","main_color_text"),_.textContent=e.main_color_text,t.appendChild(_),t.appendChild((0,o.t)("text","main_color__id",e.main_color__id)),t.appendChild((0,o.t)("number","goods_option__id",e.goods_option__id));const h=document.createElement("div");h.classList.add("catalogue__input","goods_option__name"),h.textContent=e.goods_option__name,t.appendChild(h);const y=document.createElement("img");y.classList.add("catalogue__img"),y.alt=e.item_article,y.loading="lazy",y.src="/static/viki_web_cms/files/item_photo/"+e.image,t.appendChild(y);const f=(0,o.t)("checkbox","simple_article",e.simple_article);0===e.id&&(f.checked=!0),f.addEventListener("change",(e=>(0,p.O)(e))),t.appendChild(f);const v=await(0,d.M)("Goods",e.goods__id,!1);t.appendChild(v);const C=v.querySelector("input[hidden]");C.name="goods__id",C.addEventListener("change",(e=>(0,p.O)(e)));const E=document.createElement("div");E.classList.add("catalogue__file");const g=document.createElement("div");g.textContent=e.image,g.classList.add("catalogue__file_text"),E.appendChild(g);const b=document.createElement("div");b.classList.add("catalogue__input-frame");const L=document.createElement("input");L.classList.add("catalogue__file_input"),L.type="file",L.name="image",L.accept="image/png, image/jpeg, image/jpg",L.addEventListener("change",(async e=>await(0,s.b)(e,g,C.value,f.checked?1:0,y))),b.appendChild(L),E.appendChild(b),t.appendChild(E);const w=document.createElement("div");w.classList.add("catalogue__btn-block");const S=(0,i.E)("");S.disabled=!0,S.classList.add("tooltip","btn__disabled"),S.innerHTML='<i class="catalogue__icon fa-solid fa-check"></i><span class="tooltip-text">сохранить</span>',S.addEventListener("click",(e=>(0,m.c)(e,S)));const k=(0,c.T)("");k.classList.add("tooltip","btn__disabled"),k.disabled=!0,k.innerHTML='<i class="catalogue__icon fa-solid fa-x"></i><span class="tooltip-text">отменить</span>',k.addEventListener("click",(e=>(0,l.N)(e))),w.appendChild(S),w.appendChild(k),t.appendChild(w);const x=(0,o.t)("text","colors","");x.hidden=!0,t.appendChild(x),e.colors&&(0,r.D)(e.colors,x)}[d,s,m,l]=_.then?(await _)():_,n()}catch(y){n(y)}}))},2472:(e,t,a)=>{function n(e){const t=document.createElement("img");return t.classList.add("modal__content_image"),t.src=e.url+e.fieldValue,t.alt=e.fieldName.field,t}a.d(t,{O:()=>n})},2788:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{x:()=>r});var d=a(2830),i=a(4708),c=a(8645),o=e([c,d]);async function r(e,t){const a=t.closest(".dictionary-frame__header").parentElement,n=a.querySelector(".dictionary-frame__input").value,o=(0,i.Z)(n),r=a.querySelector(".check-deleted");"Catalogue"===e?await(0,c.l)(a,r,t,o):await(0,d.n)(a,e,r,t,o)}[c,d]=o.then?(await o)():o,n()}catch(s){n(s)}}))},2814:(e,t,a)=>{function n(){const e=document.createElement("div");return e.classList.add("dictionary-content__square"),e}a.d(t,{N:()=>n})},2830:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{n:()=>c});var d=a(897),i=e([d]);async function c(e,t,a,n,i){let c=e.querySelector(".dictionary-content");const o=c.dataset.grid;c.remove();const r=n&&n.checked?1:0;c=await(0,d.Q)(t,o,a.checked?0:1,r,i),e.appendChild(c)}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},2868:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Q:()=>c});var d=a(1836),i=e([d]);async function c(e){"Catalogue"===e&&(0,d.j)()}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},2907:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{I:()=>h});var d=a(4859),i=a(2868),c=a(7847),o=a(4087),r=a(6467),s=a(1211),l=a(9132),p=a(8264),u=a(5095),m=a(2788),_=e([i,m,o,l,u]);function h(e,t,a,n,_=!0){const h=document.createElement("div");h.classList.add("dictionary-frame__header");const y=document.createElement("div");y.classList.add("dictionary-frame__header_left"),y.textContent=t,h.appendChild(y);const f=document.createElement("div");if(f.classList.add("dictionary-frame__header_right"),a){const t=(0,d.C)("Загрузить CSV");t.addEventListener("click",(()=>(0,i.Q)(e))),f.appendChild(t)}if(n){const t=(0,c.G)(!1);t.id=e+"-new",t.addEventListener("change",(()=>(0,m.x)(e,t))),t.classList.add("check-new"),f.appendChild(t);const a=document.createElement("label");a.htmlFor=e+"-new",a.classList.add("dictionary-frame__label"),a.textContent="только новые",f.appendChild(a)}if(_){const t=(0,c.G)(!0);t.id=e+"-deleted",t.addEventListener("change",(()=>(0,o.m)(e,t))),t.classList.add("check-deleted"),f.appendChild(t);const a=document.createElement("label");a.htmlFor=e+"-deleted",a.classList.add("dictionary-frame__label"),a.textContent="скрыть удаленные",f.appendChild(a)}f.insertAdjacentHTML("beforeend",r.q);const v=document.createElement("input");v.classList.add("dictionary-frame__input"),v.type="text",v.placeholder="поиск...",v.addEventListener("keypress",(t=>{"Enter"===t.key&&(0,l.n)(t.target,e)})),f.appendChild(v);const C=(0,s.E)("Поиск");C.addEventListener("click",(t=>(0,l.n)(t.target,e)));const E=(0,p.T)("Очистить");return E.addEventListener("click",(t=>(0,u.k)(t.target,e))),f.appendChild(C),f.appendChild(E),h.appendChild(f),h.dataset.class=e,h.dataset.title=t,h}[i,m,o,l,u]=_.then?(await _)():_,n()}catch(y){n(y)}}))},2952:(e,t,a)=>{function n(e){const t=document.createElement("input");return t.type=e,t.classList.add("modal__content_"+e),t}a.d(t,{k:()=>n})},3002:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{r:()=>r});var d=a(35),i=a(7757),c=a(8058),o=e([i]);async function r(e){const t="order-element__header";return(0,d.a)(i.L,t,"/cms/json/order_list"),await(0,c.J)("order-content",[{title:"номер"},{title:"дата"},{title:"от"},{title:"клиент"},{title:"сумма"},{title:"статус"},{title:"менеджер"},{title:"отв."},{title:"дней"},{title:"срок"},{title:"макет"},{title:"счет"},{title:"накл."},{title:"изм."},{title:""}],t,i.L,"/cms/json/order_list")}i=(o.then?(await o)():o)[0],n()}catch(s){n(s)}}))},3126:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{y:()=>o});var d=a(1057),i=a(4708),c=e([d]);async function o(e){const t=e.target,a=t.dataset.lastId,n=t.closest(".content"),c=n.querySelector(".dictionary-frame__input").value,o=n.querySelector(".check-deleted"),r=n.querySelector(".check-new"),s=n.querySelector(".catalogue__content");await(0,d.D)(s,o.checked?1:0,r.checked?1:0,a,(0,i.Z)(c),0)}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},3223:(e,t,a)=>{a.d(t,{M:()=>u});var n=a(35),d=a(8058),i=a(1211),c=a(8264),o=a(8316),r=a(7728);function s(e,t){const a=document.createElement("details");a.classList.add("files-element");const n=document.createElement("summary");let d;[...e.attributes].forEach((e=>{n.setAttribute(e.name,e.value)})),e.classList.remove(...e.classList),e.appendChild(a),a.appendChild(n),d=l(t.name),n.appendChild(d),d=l(""),n.appendChild(d),d=l(""),n.appendChild(d),d=l(t.length),n.appendChild(d);const r=(0,c.T)("Удалить все файлы");r.dataset.class=t.name,r.addEventListener("click",p),n.appendChild(r),d=document.createElement("div"),d.classList.add("order-element__toggle"),n.appendChild(d),t.files.forEach((e=>{!function(e,t){const a=document.createElement("div");let n;a.classList.add("dictionary-content__row","files-element__item"),a.dataset.path=e.path,n=l(""),a.appendChild(n),n=l(e.filename),a.appendChild(n),n=l(e.path),a.appendChild(n);const d=(0,i.E)("Скачать");d.dataset.path=e.path,d.addEventListener("click",(async e=>{await function(e){e.preventDefault();const t="/"+e.target.dataset.path;window.open(t,"_blank")}(e)})),a.appendChild(d);const r=(0,c.T)("Удалить");r.dataset.path=e.path,r.addEventListener("click",(async e=>{await async function(e){const t=e.target.dataset.path,a=e.target.closest(".files-element__item"),n=new FormData;n.append("file_path",t);const d=await fetch("/cms/json/delete_file",{method:"POST",headers:{"X-CSRFToken":(0,o.m)()},body:n});if("success"===(await d.json()).status){const t=e.target.closest("details");a.remove(),[...t.querySelectorAll(".files-element__item")].length||t.remove()}}(e)})),a.appendChild(r),t.appendChild(a)}(e,a)}))}function l(e){const t=document.createElement("div");return t.classList.add("dictionary-content__row_item","user-element__cell"),t.textContent=e||"",t}async function p(e){const t=e.target.dataset.class,a=new FormData;a.append("model_name",t);const n=await fetch("/cms/json/delete_unused_files",{method:"POST",headers:{"X-CSRFToken":(0,o.m)()},body:a}),d=await n.json();"success"===d.status&&e.target.closest("details").remove();const i=d.errors,s=d.deleted,p=document.createElement("dialog");let u;p.classList.add("files-element__message"),document.body.appendChild(p),i.length&&(u=l("Ошибки"),u.classList.add("strong"),p.appendChild(u),i.forEach((e=>{const t=document.createElement("div");t.classList.add("files-element__row"),p.appendChild(t),u=l(e.model),t.appendChild(u),u=l(e.filename),t.appendChild(u)}))),s.length&&(u=l("Удалено"),u.classList.add("files-element__strong"),p.appendChild(u),s.forEach((e=>{const t=document.createElement("div");t.classList.add("files-element__row"),p.appendChild(t),u=l(e.model),t.appendChild(u),u=l(e.filename),t.appendChild(u)})));const m=(0,c.T)("Закрыть");m.addEventListener("click",(()=>{(0,r.O)(p)})),p.appendChild(m),p.showModal()}async function u(e){const t="files-element__header";return(0,n.a)(s,t,"/cms/json/unused_files"),document.querySelector(".dictionary-frame__header_right").innerHTML="",await(0,d.J)("files-content",[{title:"справочник"},{title:"файл"},{title:"путь"},{title:"файлов"},{title:""}],t,s,"/cms/json/unused_files")}},3232:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{o:()=>u});var d=a(4449),i=a(9336),c=a(4859),o=a(483),r=a(449),s=a(8264),l=a(1211),p=e([o,d,i,r]);async function u(e){const t=document.querySelector(".dictionary-frame__header_left"),a=await(0,o.nA)();t.appendChild(a);const n=a.querySelector("input"),p=a.querySelector("input[hidden]"),u=(0,c.C)("Новый прайс");t.appendChild(u);const m=(0,s.T)("Выгрузить прайс");t.appendChild(m),p.addEventListener("change",await d.h),u.addEventListener("click",i.C);const _=document.querySelector(".dictionary-frame__header_right");_.firstElementChild.remove(),_.firstElementChild.remove();const h=document.createElement("label");h.htmlFor="priceType",h.textContent="тип цены";const y=(0,o.n6)([{id:1,value:"стандарт"},{id:2,value:"от объема"},{id:3,value:"нанесение"}]);y.id="priceType",y.addEventListener("change",await d.h),_.insertAdjacentElement("afterbegin",y),_.insertAdjacentElement("afterbegin",h);const f=document.createElement("div");f.classList.add("price-block");const v=y.querySelector("input[hidden]").value,C=await(0,r.p)(n.value,v,"None");f.appendChild(C.header),f.appendChild(C.form),_.querySelector(".dictionary-frame__input").remove(),_.querySelector(".btn__save").remove(),_.querySelector(".btn__cancel").remove();const E=document.createElement("input");E.classList.add("dictionary-frame__input"),E.type="text",E.placeholder="поиск...",E.addEventListener("keypress",(e=>{"Enter"===e.key&&e.target.value&&(0,d.h)()})),_.appendChild(E);const g=(0,l.E)("Поиск");g.addEventListener("click",d.h),_.appendChild(g);const b=(0,s.T)("Очистить");return b.addEventListener("click",(e=>{E.value="",(0,d.h)()})),_.appendChild(b),f}[o,d,i,r]=p.then?(await p)():p,n()}catch(m){n(m)}}))},3607:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{G:()=>r});var d=a(1211),i=a(8264),c=a(9686),o=e([c]);function r(e,t){const a=document.createElement("details");a.classList.add("group-element");const n=document.createElement("summary");[...e.attributes].forEach((e=>{n.setAttribute(e.name,e.value)})),e.classList.remove(...e.classList),e.appendChild(a),a.appendChild(n);const i=JSON.parse(t.companySet);let o;o=l(t.name),n.appendChild(o),o=l(t.alias),n.appendChild(o),o=l(t.new?"да":"нет"),n.appendChild(o),o=l(t.priceType),n.appendChild(o),o=l(t.managerName),n.appendChild(o),o=l(i.length),n.appendChild(o);const r=(0,d.E)("Добавить юр.лицо");r.dataset.id=t.id,r.addEventListener("click",(async()=>{await(0,c.V)(t.id)})),n.appendChild(r),o=document.createElement("div"),o.classList.add("order-element__toggle"),n.appendChild(o),i.forEach((e=>{s(e,a)}))}function s(e,t){const a=document.createElement("div");let n;a.classList.add("dictionary-content__row","group-element__item"),a.dataset.id=e.id,n=l(""),a.appendChild(n),n=l(e.inn),a.appendChild(n),n=l(""),a.appendChild(n),n=l(e.name),a.appendChild(n),n=l(e.vat?"с НДС":"без НДС"),a.appendChild(n);const d=(0,i.T)("Удалить");d.dataset.id=e.id,a.appendChild(d),n=l(""),a.appendChild(n),t.appendChild(a)}function l(e){const t=document.createElement("div");return t.classList.add("dictionary-content__row_item","user-element__cell"),t.textContent=e||"",t}c=(o.then?(await o)():o)[0],n()}catch(p){n(p)}}))},3682:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{V:()=>l});var d=a(6744),i=a(7245),c=a(897),o=a(6332),r=a(6825),s=e([i,r,c]);async function l(e,t,a,n,s,l){if(e.classList.toggle("text-active"),document.getElementById(t))document.getElementById(t).classList.toggle("invisible");else{const d=document.querySelector(".content__right"),s=await(0,i.K)(t,e.textContent,a,n),l=await(0,r.G)(t),p=(0,o.I)(l),u=await(0,c.Q)(t,p,0,0,"None");s.appendChild(u),d.appendChild(s)}(0,d.P)(s,l)}[i,r,c]=s.then?(await s)():s,n()}catch(p){n(p)}}))},3757:(e,t,a)=>{a.d(t,{D:()=>d});var n=a(8316);function d(e){return fetch(e,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":(0,n.m)()}}).then((e=>e.json()))}},3797:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{N:()=>r});var d=a(7310),i=a(3757),c=a(2428),o=e([d,c]);async function r(e){const t=e.target.closest("form"),a=t.querySelector('input[name="id"]').value;if("0"===a){t.remove();const e=document.querySelector(".catalogue__title").querySelector(".btn__save");e.disabled=!1,e.classList.remove("btn__disabled")}else{t.innerHTML="";const e=d.e+"catalogue_record/"+a,n=await(0,i.D)(e);await(0,c.I)(n.values[0],t)}}[d,c]=o.then?(await o)():o,n()}catch(s){n(s)}}))},3913:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{N:()=>r});var d=a(7310),i=a(4449),c=a(8316),o=e([d,i]);async function r(e){const t=document.querySelector(".content"),a=t.querySelector(".dictionary-frame__header_left").querySelector("input[hidden]").value,n=(t.querySelector(".dictionary-frame__header_right").querySelector("input[hidden]").value,document.querySelectorAll("input.price-row__item:not(.price-row__item_disabled)")),o=Array.from(n),r={goods:[],item:[]};let s;o.forEach((e=>{s={},Object.entries(e.dataset).forEach((([e,t])=>{Number.parseInt(t)?s[e]=Number.parseInt(t):s[e]=t})),s.Price__price_list__id=Number.parseInt(a),s.price=Number.parseFloat(e.value),delete s.discount,r[e.dataset.class].push(s),delete s.class}));const l=d.e+"price_list_save";fetch(l,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,c.m)()},body:JSON.stringify(r)}).then((e=>e.json())).then((e=>{e.error||(0,i.h)()}))}[d,i]=o.then?(await o)():o,n()}catch(s){n(s)}}))},4085:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{H:()=>E});var d=a(1316),i=a(9227),c=a(7164),o=a(8007),r=a(2472),s=a(6825),l=a(7310),p=a(3757),u=a(6977),m=a(905),_=a(7541),h=a(304),y=a(7475),f=a(4821),v=e([o,s,l]);[o,s,l]=v.then?(await v)():v;const C={string:d.K,boolean:i.r,number:c.y,float:_.P,precise:h.I,foreign:o.h,image:r.O,file:u.B,date:y.d,textarea:f.n};async function E(e,t,a){const n=document.createElement("div");n.classList.add("modal__content");const d=await(0,s.G)(t);let i;const c=l.e+"record_info/"+t+"/"+a,o=await(0,p.D)(c);for(const e of d){let t={fieldName:e,fieldValue:null,url:o.url};"0"!==a&&("foreign"!==e.type?e.property_off?t.fieldValue=o.record[e.property_off]:t.fieldValue=o.record[e.field]:t.fieldValue=o.record[e.field+"_id"]),n.appendChild((0,m.d)(e)),i=await C[e.type](t),n.appendChild(i)}return n}n()}catch(g){n(g)}}))},4087:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{m:()=>r});var d=a(2830),i=a(4708),c=a(8645),o=e([c,d]);async function r(e,t){const a=t.closest(".dictionary-frame__header").parentElement,n=a.querySelector(".dictionary-frame__input").value,o=a.querySelector(".check-new"),r=(0,i.Z)(n);"Catalogue"===e?await(0,c.l)(a,t,o,r):await(0,d.n)(a,e,t,o,r)}[c,d]=o.then?(await o)():o,n()}catch(s){n(s)}}))},4114:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{f:()=>c});var d=a(897),i=e([d]);async function c(e){const t="14px 1.5fr 4fr 1fr 1fr 1fr 3fr 3fr 3fr 2fr 2fr 1fr 1fr 1fr 1fr 1fr 3fr 1.5fr",a=await(0,d.Q)(e,t,0,0,"None");return a.id=e,a.dataset.grid=t,a}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},4189:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{N:()=>m,R:()=>_});var d=a(7310),i=a(3757),c=a(483),o=a(1211),r=a(4859),s=a(8264),l=a(3913),p=a(8316),u=e([d,l,c]);async function m(e,t){const a=document.createElement("div");a.classList.add("price-content");const n=d.e+"standard_price_data/"+e+"/"+t,c=await(0,i.D)(n),o="0.8fr 3.2fr repeat("+c.price_type_length+", 1fr) 160px 120px",r=await(0,i.D)(d.e+"all_items_all_items_for_dropdown"),s=await _(c.header,o);return await h(c.form,a,c.header,r,o),{form:a,header:s}}async function _(e,t){const a=document.createElement("header");a.classList.add("price-header"),a.style.gridTemplateColumns=t;const n=document.createElement("div");n.classList.add("price-header__item"),n.textContent="Артикул",a.appendChild(n);const d=document.createElement("div");let i;d.classList.add("price-header__item"),d.textContent="Товар",a.appendChild(d),e.forEach((e=>{i=document.createElement("div"),i.textContent=e.price_name__name,i.classList.add("price-header__item"),a.appendChild(i)}));const c=(0,r.C)("Загрузить csv");a.appendChild(c);const s=(0,o.E)("Сохранить");return a.appendChild(s),s.addEventListener("click",await l.N),a}function h(e,t,a,n,d){let i,c,o;e.goods.forEach((r=>{i=y(r,a,n,d),t.appendChild(i),o=e.items.filter((e=>r.id===e.goods__id&&"[]"!==e.price)),o.forEach((e=>{c=f(e,a,d),t.appendChild(c)}))}))}function y(e,t,a,n){const d=v(e,t,"goods","goods",n),i=a.filter((t=>t.goods__id===e.id));d.appendChild((0,c.n6)(i));const o=(0,s.T)("Добавить цвет");return o.addEventListener("click",(()=>{const e=d.querySelector(".price-dropdown").querySelector("input[hidden]").value,a=d.querySelector(".price-dropdown__input").value,[i,...c]=a.split(" ");if(!Array.from(document.querySelectorAll('div[data-type="item"] input[hidden]')).find((t=>t.value===e))){const a={id:e,article:i,name:c.join(" "),price:"[]"};d.insertAdjacentElement("afterend",f(a,t,n))}})),d.appendChild(o),d}function f(e,t,a){const n=v(e,t,"item","catalogue_item",a);n.classList.add("price-row__item-row"),n.style.gridTemplateColumns=a;const i=(0,s.T)("Убрать позицию");return i.addEventListener("click",(async e=>{e.preventDefault();const t=n.querySelector('input[name="id"]').value;fetch(d.e+"delete_item_price_row/"+t,{headers:{"X-CSRFToken":(0,p.m)()}}).then((e=>e.json())).then((e=>{e&&n.remove()}))})),n.appendChild(i),n}function v(e,t,a,n,d){const i=document.createElement("div");i.dataset.type=a,i.classList.add("price-row"),i.style.gridTemplateColumns=d;const c=document.createElement("input");c.type="text",c.hidden=!0,c.name="id",c.value=e.id,i.appendChild(c);const o=document.createElement("div");o.classList.add("price-row__name"),o.textContent=e.article,i.appendChild(o);const r=document.createElement("div");let s;return r.classList.add("price-row__name"),r.textContent=e.name,i.appendChild(r),t.forEach((t=>{s=document.createElement("input"),s.classList.add("price-row__item","price-row__item_disabled"),s.type="number",s.step="0.01",s.lang="en";const d=JSON.parse(e.price).find((e=>"price_type__id"in e&&e.price_type__id===t.price_name__id));s.dataset.class=a,s.dataset.id=d?d.id:"",s.setAttribute("data-"+n+"__"+a+"__id",e.id),s.dataset.standard_price_type__price_type__id=t.price_name__id,s.dataset.discount=t.discount,s.value=d?d.price:"",s.readOnly=!0,s.addEventListener("dblclick",(e=>{const t=document.querySelector(".dictionary-frame__header_right"),a=t.querySelector(".dictionary-frame__input"),n=t.querySelector(".btn__save");e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled"),a.disabled=!0,n.disabled=!0,n.classList.add("btn__disabled")})),s.addEventListener("change",(e=>{e.target.readOnly=!0})),"1"===s.dataset.discount&&s.addEventListener("change",(e=>{i.querySelectorAll('input[type="number"]').forEach((t=>{"1"!==t.dataset.discount&&(t.value=(Math.ceil(e.target.value*Number.parseFloat(t.dataset.discount)*100)/100).toFixed(2),t.dispatchEvent(new Event("dblclick",{bubbles:!0})),e.target.classList.remove("price-row__item_disabled"))}))})),i.appendChild(s)})),i}[d,l,c]=u.then?(await u)():u,n()}catch(C){n(C)}}))},4256:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{g:()=>p});var d=a(1211),i=a(7979),c=a(1057),o=a(2428),r=a(4859),s=a(1836),l=e([s,o,c]);async function p(e){const t=document.querySelector(".dictionary-frame__header_right"),a=(0,r.C)("Загрузить несколько фото");a.addEventListener("click",await s.i),t.insertAdjacentElement("afterbegin",a);const n=document.createElement("div"),l=document.createElement("div");let p;l.classList.add("catalogue","catalogue__title"),i.t.forEach((e=>{p=document.createElement("p"),p.classList.add("catalogue__title-item"),p.textContent=e.label,l.appendChild(p)}));const u=(0,d.E)("Новый");u.addEventListener("click",(async e=>{e.target.disabled=!0,e.target.classList.add("btn__disabled");const t=document.createElement("form");await(0,o.I)({id:0},t);const a=t.querySelector(".btn__cancel");a.disabled=!1,a.classList.remove("btn__disabled"),m.insertAdjacentElement("afterbegin",t),t.scrollIntoView({behavior:"smooth"}),t.focus()})),l.appendChild(u),n.appendChild(l);const m=document.createElement("div");return m.classList.add("catalogue__content"),await(0,c.D)(m,0,0,0,"None",0),n.appendChild(m),n}[s,o,c]=l.then?(await l)():l,n()}catch(u){n(u)}}))},4449:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{h:()=>c});var d=a(449),i=e([d]);async function c(e){const t=document.querySelector(".content"),a=t.querySelector(".dictionary-frame__header_right"),n=a.querySelector(".dictionary-frame__input"),i=a.querySelector(".btn__save");n.disabled=!1,i.disabled=!1,i.classList.remove("btn__disabled");const c=t.querySelector(".price-block"),o=t.querySelector(".dictionary-frame__header_left").querySelector(".price-dropdown__input").value,r=n.value,s=t.querySelector(".dictionary-frame__header_right").querySelector("input[hidden]").value;c&&(c.innerHTML="");const l=await(0,d.p)(o,s,r);c.appendChild(l.header),c.appendChild(l.form)}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},4708:(e,t,a)=>{function n(e){let t=e;return function(e){return/^[a-zA-Zа-яА-ЯёЁ0-9 ._#]*$/.test(e)}(e)&&e||(t="None"),t.replace(/ /g,"|")}a.d(t,{Z:()=>n})},4821:(e,t,a)=>{function n(e){const t=document.createElement("textarea");return t.classList.add("modal__content_textarea"),t.value=e.fieldValue,t.name=e.fieldName.field,t}a.d(t,{n:()=>n})},4859:(e,t,a)=>{function n(e){const t=document.createElement("button");return t.classList.add("btn","btn__neutral"),t.textContent=e,t}a.d(t,{C:()=>n})},5095:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{k:()=>o});var d=a(2830),i=a(8645),c=e([i,d]);async function o(e,t){const a=e.closest(".dictionary-frame__header").parentElement;a.querySelector(".dictionary-frame__input").value="";const n=a.querySelector(".check-deleted"),c=a.querySelector(".check-new");"Catalogue"===t?await(0,i.l)(a,n,c,"None"):await(0,d.n)(a,t,n,c,"None")}[i,d]=c.then?(await c)():c,n()}catch(r){n(r)}}))},5352:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Z:()=>s});var d=a(6723),i=a(6332),c=a(6825),o=a(7502),r=e([c,d,o]);async function s(e,t,a,n,r,s){const l=await(0,c.G)(t),p="Goods"!==t?(0,i.I)(l):"14px 1.5fr 4fr 1fr 1fr 1fr 3fr 3fr 3fr 2fr 2fr 1fr 1fr 1fr 1fr 1fr 1.5fr",u=e.closest(".dictionary-content__rows");[...(await(0,d.Y)(t,a,n,s,r,p)).children].forEach((e=>{u.appendChild(e)}));const m=e.cloneNode(!0);e.parentNode.replaceChild(m,e),m.querySelector("button").addEventListener("click",(e=>(0,o.w)(e)))}[c,d,o]=r.then?(await r)():r,n()}catch(l){n(l)}}))},5364:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{U:()=>r});var d=a(35),i=a(8058),c=a(3607),o=e([c]);async function r(e){const t="group-element__header";return(0,d.a)(c.G,t,"/cms/json/customer_list"),await(0,i.J)("group-content",[{title:"название"},{title:"почта"},{title:"новый"},{title:"тип цены"},{title:"менеджер"},{title:"кол-во"},{title:""},{title:""}],t,c.G,"/cms/json/customer_list")}c=(o.then?(await o)():o)[0],n()}catch(s){n(s)}}))},5597:(e,t,a)=>{function n(e,t,a){const n=document.createElement("input");return"precise"===e?(n.type="number",n.step="0.0001"):"float"===e?(n.type="number",n.step="0.01"):n.type=e,n.name=t,"id"===t.slice(-2)&&(n.hidden=!0),"checkbox"===e?(n.checked=a,n.classList.add("check","catalogue__check")):(n.value=a,n.readOnly=!0,n.classList.add("catalogue__input")),n}a.d(t,{t:()=>n})},5800:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{s:()=>r});var d=a(7310),i=a(3757),c=a(4189),o=e([d,c]);async function r(e,t){const a=document.createElement("div");a.classList.add("price-content");const n=d.e+"volume_price_data/"+e+"/"+t,o=await(0,i.D)(n),r="0.8fr 3.2fr repeat("+o.price_type_length+", 1fr) 120px 102px",l=await(0,c.R)(o.header,r);return s(o.form,a,o.header,o.form.volumes,r),{form:a,header:l}}function s(e,t,a,n,d){n.forEach((n=>{const i=document.createElement("div");i.classList.add("price-content__volume-header"),i.textContent="Количество "+n.name+" шт",t.appendChild(i);const c=document.createElement("div");c.appendChild(l(e,a,n,d)),t.appendChild(c)}))}function l(e,t,a,n){const d=document.createElement("div");return e.goods.forEach((e=>{d.appendChild(p(e,t,a,n))})),d}function p(e,t,a,n){const d=document.createElement("div");d.classList.add("price-row"),d.style.gridTemplateColumns=n;const i=document.createElement("input");i.type="text",i.hidden=!0,i.name="id",i.value=e.id,d.appendChild(i);const c=document.createElement("div");c.classList.add("price-row__name"),c.textContent=e.article,d.appendChild(c);const o=document.createElement("div");let r;return o.classList.add("price-row__name"),o.textContent=e.name,d.appendChild(o),t.forEach((t=>{r=document.createElement("input"),r.classList.add("price-row__item","price-row__item_disabled"),r.type="number",r.step="0.01",r.lang="en";const n=JSON.parse(e.price).find((e=>"price_type__id"in e&&e.price_type__id===t.price_name__id&&e.price_volume__id===a.id));r.dataset.class="goods",r.dataset.id=n?n.id:"",r.setAttribute("data-goods__goods__id",e.id),r.dataset.standard_price_type__price_type__id=t.price_name__id,r.dataset.price_goods_quantity__price_volume__id=a.id,r.value=n?n.price:"",r.readOnly=!0,r.addEventListener("dblclick",(e=>{const t=document.querySelector(".dictionary-frame__header_right"),a=t.querySelector(".dictionary-frame__input"),n=t.querySelector(".btn__save");e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled"),a.disabled=!0,n.disabled=!0,n.classList.add("btn__disabled")})),r.addEventListener("change",(e=>{e.target.readOnly=!0})),d.appendChild(r)})),d}[d,c]=o.then?(await o)():o,n()}catch(u){n(u)}}))},6332:(e,t,a)=>{function n(e){let t="14px 6fr ";return e.forEach((e=>{"name"!==e.field&&("boolean"===e.type||"number"===e.type||"float"===e.type||"precise"===e.type?t+="1fr ":"textarea"===e.type?t+="6fr ":t+="3fr ")})),t+="80px",t}a.d(t,{I:()=>n})},6352:(e,t,a)=>{function n(e){const t=e.target.closest("form").querySelector('input[type="file"]');t.value="",t.dispatchEvent(new Event("change",{bubbles:!0}))}a.d(t,{O:()=>n})},6467:(e,t,a)=>{a.d(t,{q:()=>n});const n='<i class="fa fa-solid fa-magnifying-glass"></i>'},6686:(e,t,a)=>{a.d(t,{a:()=>_});var n=a(8664),d=a(7728),i=a(3757),c=a(1211),o=a(8264),r=a(8316),s=a(2952);function l(e,t){let a;a=p(t.last_name),e.appendChild(a),a=p(t.first_name),e.appendChild(a),a=p(t.email),e.appendChild(a),a=p(t.phone),e.appendChild(a),a=p(t.alias),a.classList.add("alias"),e.appendChild(a),e.appendChild(function(e){const t=document.createElement("input");return t.type="checkbox",t.classList.add("check","user-element__check"),t.checked=e||!1,t.disabled=!0,t}(t.new)),a=p(t.customer),a.classList.add("customer"),e.appendChild(a);const l=(0,c.E)("Изм");l.dataset.id=t.id,l.addEventListener("click",(async t=>{await async function(e,t){const a=e.target.dataset.id;try{const e=await(0,i.D)(`/cms/json/user_extension_item/${a}`);if(!e)return void console.error("Failed to fetch user data");!function(e,t){const a=document.createElement("dialog");a.classList.add("modal");const i=document.createElement("div");i.classList.add("modal__header"),i.textContent="Редактирование пользователя",a.appendChild(i);const l=document.createElement("form");l.classList.add("modal__form"),a.appendChild(l);const p=document.createElement("div");p.classList.add("modal__content"),l.appendChild(p);const u=document.createElement("label");u.textContent="eMail-alias",u.classList.add("modal-content__label"),u.htmlFor="alias",p.appendChild(u);const m=(0,s.k)("text");m.value=e.alias,m.name="alias",m.id="alias",p.appendChild(m);const _=document.createElement("label");_.textContent="Новый:",_.classList.add("modal-content__label"),_.htmlFor="user-new-status",p.appendChild(_);const h=document.createElement("input");h.type="checkbox",h.classList.add("modal__content_checkbox"),h.checked=e.new||!1,h.id="user-new-status",h.name="new",p.appendChild(h);const y=document.createElement("label");y.textContent="Клиент:",y.classList.add("modal-content__label"),y.htmlFor="customer",p.appendChild(y);const f=document.createElement("div");f.classList.add("dropdown"),function(e,t,a){const n=document.createElement("input");n.type="text",n.classList.add("modal__content_text","dropdown__input");const d=document.createElement("input");d.type="text",d.name="customer",d.hidden=!0;const i=a.find((e=>e.id.toString()===t.toString()));i&&(n.value=i.value,d.value=i.id),e.appendChild(n),e.appendChild(d),e.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const c=document.createElement("ul");c.classList.add("dropdown__list","invisible"),a.forEach((e=>{const t=document.createElement("li");t.classList.add("dropdown__list_item"),t.value=e.id,t.textContent=e.value,t.addEventListener("click",(e=>{n.value=e.target.textContent,d.value=e.target.value,d.dispatchEvent(new Event("change",{bubbles:!0})),c.classList.add("invisible")})),c.appendChild(t)})),e.appendChild(c),n.addEventListener("click",(()=>{c.classList.toggle("invisible")})),n.addEventListener("keyup",(e=>{const t=e.target.value.toUpperCase(),i=a.filter((e=>e.value.toUpperCase().indexOf(t)>-1));c.innerHTML="",i.forEach((e=>{const t=document.createElement("li");t.classList.add("dropdown__list_item"),t.value=e.id,t.textContent=e.value,t.addEventListener("click",(e=>{n.value=e.target.textContent,d.value=e.target.value,d.dispatchEvent(new Event("change",{bubbles:!0})),c.classList.add("invisible")})),c.appendChild(t)}))}))}(f,e.customer_id,e.customers),p.appendChild(f);const v=document.createElement("div");v.classList.add("modal__button-block");const C=(0,o.T)("Отменить");C.addEventListener("click",(()=>{(0,d.O)(a)})),v.appendChild(C);const E=(0,c.E)("Сохранить");E.addEventListener("click",(async a=>{a.preventDefault(),await async function(e,t,a,n,i,c){const o=e.closest("dialog");try{const s=new FormData(e);if(a===Number.parseInt(s.get("customer"))&&n===("on"===s.get("new"))&&i===s.get("alias"))return void(0,d.O)(o);const l=await fetch(`/cms/json/update_user_extension/${t}`,{method:"POST",body:s,headers:{"X-CSRFToken":(0,r.m)()}});if(l.ok){const e=await l.json();e.success?(c.querySelector('input[type="checkbox"]').checked=e.new,c.querySelector(".alias").textContent=e.alias,c.querySelector(".customer").textContent=e.customer,(0,d.O)(o)):console.error("Failed to update user:",e.error)}else console.error("Failed to update user, server returned:",l.status)}catch(e){console.error("Error saving user data:",e)}}(l,e.id,e.customer_id,e.new,e.alias,t)})),v.appendChild(E),l.appendChild(v),document.body.appendChild(a),(0,n.Y)(a),a.showModal()}(e,t)}catch(e){console.error("Error editing user:",e)}}(t,e)})),e.appendChild(l)}function p(e){const t=document.createElement("div");return t.classList.add("dictionary-content__row_item","user-element__cell"),t.textContent=e||"",t}var u=a(35),m=a(8058);async function _(e){const t="user-element__header";(0,u.a)(l,t,"/cms/json/user_extension");const a=await(0,m.J)("dictionary-content",[{title:"Фамилия"},{title:"Имя"},{title:"Email"},{title:"Телефон"},{title:"Email-алиас"},{title:"Новый"},{title:"Клиент"},{title:""}],t,l,"/cms/json/user_extension");return a.id=e,a}},6723:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{R:()=>u,Y:()=>p});var d=a(3757),i=a(7310),c=a(2814),o=a(5352),r=a(8264),s=a(7502),l=e([i,o,s]);async function p(e,t,a,n,c,r){const s=document.createElement("div");s.classList.add("dictionary-content__rows");const l=i.e+"field_values/"+e+"/"+t+"/"+a+"/"+n+"/"+c,p=await(0,d.D)(l);let m=0;return p.values.forEach((d=>{let i=document.createElement("div");u(i,d,p.field_params,e),i.style.gridTemplateColumns=r,s.appendChild(i),m++,20===m&&(i.dataset.lastRecord=n+20,i.addEventListener("mouseover",(d=>(0,o.Z)(d.target,e,t,a,c,n+20))))})),s}function u(e,t,a,n){e.classList.add("dictionary-content__row");const d=(0,c.N)();t.hex&&(d.style.backgroundColor=t.hex),e.appendChild(d),e.id=n+"_row_"+t.id,Object.keys(t).forEach(((n,d)=>{if("id"!==n){let d;Object.keys(a).includes(n)&&"image"===a[n].type?(d=document.createElement("img"),d.classList.add("dictionary-content__row_img"),d.src=a[n].url+t[n],d.alt=t[n]):Object.keys(a).includes(n)&&"boolean"===a[n].type?(d=document.createElement("input"),d.type="checkbox",d.checked=t[n],d.disabled=!0,d.classList.add("dictionary-content__check")):(d=document.createElement("div"),d.classList.add("dictionary-content__row_item"),d.textContent=t[n]),e.appendChild(d)}}));const i=(0,r.T)("Изм.");i.dataset.itemId=t.id,i.addEventListener("click",(e=>(0,s.w)(e))),e.appendChild(i)}[i,o,s]=l.then?(await l)():l,n()}catch(m){n(m)}}))},6744:(e,t,a)=>{function n(e,t){const a=e.querySelector("summary");Array.from(t).some((e=>e.classList.contains("text-active")))?a.classList.add("text-active"):a.classList.remove("text-active")}a.d(t,{P:()=>n})},6825:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{G:()=>o});var d=a(7310),i=a(3757),c=e([d]);async function o(e){const t=d.e+"field_names/"+e;return await(0,i.D)(t)}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},6872:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{O:()=>u,f:()=>m});var d=a(4708),i=a(7310),c=a(7728),o=a(8645),r=a(1401),s=a(8664),l=a(8316),p=e([i,o]);async function u(e){e.preventDefault();const t=e.target.closest("form"),a=new FormData(t),n=Object.fromEntries(a.entries()).csv_file.name,d=t.querySelector(".error-message");n.endsWith(".csv")?await _(e,t,a,"catalogue_csv_load",d):(t.querySelector("input").value="",d.style.display="block",d.textContent="Неправильный формат файла")}async function m(e){e.preventDefault();const t=e.target.closest("form"),a=new FormData(t),n=t.querySelector(".error-message");await _(e,t,a,"catalogue_files_load",n)}async function _(e,t,a,n,p){const u=document.querySelector(".content"),m=u.querySelector(".dictionary-frame__input"),_=(0,d.Z)(m.value),h=u.querySelector(".check-deleted"),y=u.querySelector(".check-new"),f=e.target.closest("dialog"),v=i.e+n;await fetch(v,{method:"POST",headers:{"X-CSRFToken":(0,l.m)()},body:a}).then((e=>e.json())).then((e=>{if(e.error)t.querySelector("input").value="",p.style.display="block",p.textContent=e.error;else{(0,c.O)(f),(0,o.l)(u,h,y,_);const t=(0,r.J)(e);document.querySelector(".service").appendChild(t),t.showModal(),(0,s.Y)(t)}}))}[i,o]=p.then?(await p)():p,n()}catch(h){n(h)}}))},6977:(e,t,a)=>{a.d(t,{B:()=>d});var n=a(2952);function d(e){const t=document.createElement("div");t.classList.add("modal__content_file-frame");const a=(0,n.k)("file");return a.placeholder=e.fieldValue,a.name=e.fieldName.field,t.appendChild(a),t}},7090:(e,t,a)=>{function n(){const e=document.getElementById("userData"),t=JSON.parse(localStorage.getItem("userData"));return e.textContent=t.username,"Авторизуйтесь"!==t.username}a.d(t,{g:()=>n})},7164:(e,t,a)=>{a.d(t,{y:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},7245:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{K:()=>c});var d=a(2907),i=e([d]);async function c(e,t,a,n){const i=document.createElement("section");i.classList.add("dictionary-frame"),i.id=e;const c=(0,d.I)(e,t,a,n);return i.appendChild(c),i}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},7310:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{G:()=>C,e:()=>v});var d=a(8846),i=a(9857),c=a(4114),o=a(4256),r=a(3232),s=a(3757),l=a(7090),p=a(8016),u=a(6686),m=a(3002),_=a(5364),h=a(3223),y=a(568),f=e([c,o,r,m,_,y,d,i]);[c,o,r,m,_,y,d,i]=f.then?(await f)():f;const v="./json/",C={Goods:c.f,Catalogue:o.g,PriceList:r.o,UserExtension:u.a,Order:m.r,CustomerGroup:_.U,Files:h.M,SEO:y.s},E=v+"userdata",g=await(0,s.D)(E);localStorage.setItem("userData",JSON.stringify(g)),(0,l.g)()||document.querySelector(".menu__right").addEventListener("click",p.i);const b=document.querySelectorAll(".menu__item"),L=document.querySelector(".content");b.forEach((e=>{e.addEventListener("click",(async t=>{e.classList.contains("menu__item_bold")||(e.classList.add("menu__item_bold"),L.innerHTML="","Standard"===t.target.dataset.page?(0,d.f)(L,e.dataset.content):await(0,i.H)(L,e.dataset.content,t.target.dataset.page)),b.forEach((t=>{t!==e&&t.classList.remove("menu__item_bold")}))}))})),n()}catch(e){n(e)}}),1)},7475:(e,t,a)=>{a.d(t,{d:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("date");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},7481:(e,t,a)=>{function n(e,t,a){const n=document.createElement("div");n.classList.add("dropdown");const d=document.createElement("input");d.type="hidden",d.name=a,n.appendChild(d);const i=document.createElement("input");i.type="text",i.classList.add("modal__content_text","dropdown__input"),n.appendChild(i),n.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const c=document.createElement("ul");if(c.style.display="none",c.classList.add("dropdown__list"),n.appendChild(c),e.forEach((e=>{const t=document.createElement("li");t.classList.add("dropdown__list_item"),t.textContent=e.value,t.dataset.id=e.id,t.addEventListener("click",(()=>{d.value=e.id,i.value=e.value,c.style.display="none"})),c.appendChild(t)})),t){const a=e.find((e=>e.id===parseInt(t)));a&&(d.value=a.id,i.value=a.value)}return i.addEventListener("input",(()=>{const e=i.value.toLowerCase(),t=c.getElementsByTagName("li");Array.from(t).forEach((t=>{const a=t.textContent.toLowerCase();t.style.display=a.includes(e)?"":"none"}))})),i.addEventListener("click",(e=>{e.stopPropagation(),c.style.display="none"===c.style.display?"":"none"})),document.addEventListener("click",(e=>{n.contains(e.target)||(c.style.display="none")})),n}a.d(t,{q:()=>n})},7502:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{w:()=>o});var d=a(7646),i=a(8664),c=e([d]);async function o(e){e.preventDefault();const t=e.target.closest(".dictionary-content").parentElement.querySelector(".dictionary-frame__header"),a=t.dataset.class,n=t.dataset.title,c=await(0,d.w)(a,n,e.target.dataset.itemId);document.querySelector(".service").appendChild(c),c.showModal(),(0,i.Y)(c),console.log()}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},7541:(e,t,a)=>{a.d(t,{P:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t.step="0.01",t}},7608:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{K1:()=>f,b8:()=>h,ij:()=>y,rN:()=>v});var d=a(7728),i=a(8063),c=a(9546),o=a(8664),r=a(3757),s=a(7481),l=a(2952),p=a(7646),u=a(8316),m=e([p]);p=(m.then?(await m)():m)[0];const _={editOrder:{type:"editOrder",content:L},editItem:{type:"editItem",content:w},editBranding:{type:"editBranding",content:S},editDelivery:{type:"editDelivery",content:k}};async function h(e,t){e.preventDefault();const a=e.target.dataset.id,n=e.target.dataset.order,d=_.editOrder;d.headerText=`заказ ${n}`,await C(d,a,t,t)}async function y(e,t,a){const n=e.target.dataset.id,d=e.target.dataset.article,i=_.editItem;i.headerText=`арт. ${d}`,await C(i,n,t,a)}async function f(e,t,a){const n=e.target.dataset.id,d=e.target.dataset.article,i=_.editBranding;i.headerText=`нанесение для арт. ${d}`,await C(i,n,t,a)}async function v(e,t,a){const n=e.target.dataset.id,d=e.target.dataset.order,i=_.editDelivery;i.headerText=`доставку к заказу ${d}`,await C(i,n,t,a)}async function C(e,t,a,n){const d=await E(e,t,a,n);document.querySelector(".service").appendChild(d),d.showModal(),(0,o.Y)(d)}async function E(e,t,a,n){const o=document.createElement("dialog");o.classList.add("modal"),o.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,d.O)(o)}));const r=(0,i.h)(o,e.headerText,t);o.appendChild(r);const s=document.createElement("form");s.id=e.type+"__form",s.classList.add("modal__form"),s.enctype="multipart/form-data";const l=await g(e,t);s.appendChild(l),s.appendChild((0,c._)(o,t)),o.appendChild(s);const p=new FormData(s);return s.querySelector(".submit").type="submit",s.addEventListener("submit",(d=>{b(d,e,s,p,o,t,a,n)})),o}async function g(e,t){const a=new URLSearchParams({id:t,type:e.type}),n=await(0,r.D)(`json/order_modal_request?${a.toString()}`),d=document.createElement("div");return d.classList.add("modal__content"),e.content(n,d,t)}async function b(e,t,a,n,i,c,o,r){e.preventDefault();const s=new FormData(a);if(!(0,p.T)(s,n)){s.append("type",t.type),s.append("element_id",c);const e=await fetch("/cms/json/order_edit",{method:"POST",headers:{"X-CSRFToken":(0,u.m)()},body:s}),a=await e.json(),n=r.querySelector('div[data-name="total_amount"]');switch(t.type){case"editOrder":o.querySelector('div[data-name="delivery_date"]').textContent=a.delivery_date,o.querySelector('div[data-name="days_to_deliver"]').textContent=a.days_to_deliver,o.querySelector('div[data-name="state"]').textContent=a.state,o.querySelector('div[data-name="user_responsible"]').textContent=a.user_responsible;break;case"editItem":o.querySelector('div[data-name="branding_name"]').textContent=a.branding_name,Object.keys(a).includes("price")&&(o.querySelector('div[data-name="price"]').textContent=a.price,o.querySelector('div[data-name="total_price"]').textContent=a.total_price,n.textContent=a.total_amount);break;case"editBranding":o.querySelector('div[data-name="branding_text"]').textContent=a.branding_text,Object.keys(a).includes("price")&&(o.querySelector('div[data-name="price"]').textContent=a.price,o.querySelector('div[data-name="total_price"]').textContent=a.total_price,n.textContent=a.total_amount);break;case"editDelivery":o.querySelector('div[data-name="delivery_option"]').textContent=`доставка ${a.delivery_option}`,Object.keys(a).includes("price")&&(o.querySelector('div[data-name="price"]').textContent=a.price,n.textContent=a.total_amount)}}(0,d.O)(i)}function L(e,t,a){const n=document.createElement("div");n.textContent="статус",n.classList.add("modal__content_label"),n.htmlFor=`state_${a}`,t.appendChild(n);const d=(0,s.q)(e.available_states,e.current_state_id,"state__id");d.id=`state_${a}`,t.appendChild(d);const i=document.createElement("label");i.htmlFor=`days_${a}`,i.textContent="рабочих дней",i.classList.add("modal__content_label"),t.appendChild(i);const c=(0,l.k)("number");c.id=`days_${a}`,c.name="days_to_deliver",c.value=e.days_to_deliver,t.appendChild(c);const o=document.createElement("div");o.textContent="ответственный",o.classList.add("modal__content_label"),o.htmlFor=`user_${a}`,t.appendChild(o);const r=(0,s.q)(e.available_users,e.user_responsible_id,"user_responsible__id");r.id=`user_${a}`,t.appendChild(r);const p=document.createElement("label");p.htmlFor=`date_${a}`,p.textContent="контрольный срок",p.classList.add("modal__content_label"),t.appendChild(p);const u=(0,l.k)("date");return u.id=`date_${a}`,u.name="delivery_date",u.value=e.delivery_date,t.appendChild(u),t}function w(e,t,a){const n=document.createElement("label");n.htmlFor=`itemPrice_${a}`,n.textContent="цена",n.classList.add("modal__content_label"),t.appendChild(n);const d=(0,l.k)("number");if(d.id=`itemPrice_${a}`,d.name="price",d.step="0.01",d.value=e.price,t.appendChild(d),Object.keys(e).includes("branding_name")){const n=document.createElement("label");n.htmlFor=`itemBranding_${a}`,n.textContent="нанесение",n.classList.add("modal__content_label"),t.appendChild(n);const d=(0,l.k)("text");d.id=`itemBranding_${a}`,d.name="branding_name",d.value=e.branding_name,t.appendChild(d)}return t}function S(e,t,a){const n=document.createElement("div");n.textContent="тип нанесения",n.classList.add("modal__content_label"),n.htmlFor=`printType_${a}`,t.appendChild(n);const d=(0,s.q)(e.available_print_types,e.print_type_id,"print_type__id");d.id=`printType_${a}`,t.appendChild(d);const i=document.createElement("div");i.textContent="тип нанесения",i.classList.add("modal__content_label"),i.htmlFor=`printPlace_${a}`,t.appendChild(i);const c=(0,s.q)(e.available_print_places,e.print_place_id,"print_place__id");c.id=`printPlace_${a}`,t.appendChild(c);const o=document.createElement("div");o.textContent="кол-во цветов",o.classList.add("modal__content_label"),o.htmlFor=`color_${a}`,t.appendChild(o);const r=(0,s.q)(e.available_colors,e.colors,"colors");r.id=`color_${a}`,t.appendChild(r);const p=document.createElement("div");p.textContent="второй проход",p.classList.add("modal__content_label"),p.htmlFor=`pass_${a}`,t.appendChild(p);const u=(0,l.k)("checkbox");return u.name="second_pass",u.classList.add("check"),u.id=`pass_${a}`,u.checked=e.second_pass,t.appendChild(u),t}function k(e,t,a){const n=document.createElement("div");n.textContent="доставка",n.classList.add("modal__content_label"),t.appendChild(n);const d=(0,s.q)(e.available_options,e.current_option.id,"id");return t.appendChild(d),t}n()}catch(x){n(x)}}))},7646:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{T:()=>_,w:()=>u});var d=a(8063),i=a(9546),c=a(4085),o=a(7310),r=a(7728),s=a(6723),l=a(8316),p=e([c,o,s]);async function u(e,t,a){const n=document.createElement("dialog");n.classList.add("modal"),n.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,r.O)(n)}));const o=(0,d.h)(n,t,a);n.appendChild(o);const s=document.createElement("form");s.id=e+"__form",s.classList.add("modal__form"),s.enctype="multipart/form-data";const l=await(0,c.H)(n,e,a);s.appendChild(l),s.appendChild((0,i._)(n,a)),n.appendChild(s);const p=new FormData(s);return s.querySelector(".submit").addEventListener("click",(t=>m(t,s,e,p))),n}async function m(e,t,a,n){e.preventDefault();const d=e.target.dataset.id,i=t.closest(".modal");i.querySelectorAll("input").forEach((e=>{e.classList.remove("border-alert")})),e.target.disabled=!0;const c=new FormData(t),p=i.querySelector('input[type="file"]');if(!_(c,n)||p){const t=o.e+"edit_dictionary/"+a+"/"+d;await fetch(t,{method:"POST",headers:{"X-CSRFToken":(0,l.m)()},body:c}).then((e=>e.json())).then((t=>{const n=t.errors;if(n){let t;n.forEach((a=>{e.target.disabled=!1,t=i.querySelector(`[name = "${a}"]`),t.hidden?t.previousElementSibling.classList.add("border-alert"):t.classList.add("border-alert"),e.target.scrollIntoView({behavior:"smooth",block:"center"})}))}else{let e;if("0"!==d)e=document.querySelector("#"+a+"_row_"+d),e.innerHTML="";else{let n;e=document.createElement("div"),e.id=a+"_row_"+t.values.id,e.classList.add("dictionary-content__row"),n=document.getElementById(a)?document.getElementById(a).querySelector(".dictionary-content__rows"):document.querySelector(".dictionary-content__rows"),n.insertAdjacentElement("afterbegin",e),e.style.gridTemplateColumns=n.closest(".dictionary-content").dataset.grid}(0,s.R)(e,t.values,t.params,a),e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus(),(0,r.O)(i)}}))}}function _(e,t){const a=Array.from(t.values()),n=Array.from(e.values());return a.sort(),n.sort(),JSON.stringify(a)===JSON.stringify(n)}[c,o,s]=p.then?(await p)():p,n()}catch(h){n(h)}}))},7674:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{c:()=>r});var d=a(7310),i=a(4449),c=a(8316),o=e([d,i]);async function r(e){const t=document.querySelector(".content").querySelector(".dictionary-frame__header_left").querySelector("input[hidden]").value,a=document.querySelectorAll("input.type-table__input:not(.price-row__item_disabled)"),n=[];let o;[...a].forEach((e=>{o={},Object.entries(e.dataset).forEach((([e,t])=>{Number.parseInt(t)?o[e]=Number.parseInt(t):o[e]=t})),o.price_list__id=Number.parseInt(t),o.price=Number.parseFloat(e.value),n.push(o)}));const r=d.e+"printing_price_list_save";fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,c.m)()},body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{e.error||(0,i.h)()}))}[d,i]=o.then?(await o)():o,n()}catch(s){n(s)}}))},7728:(e,t,a)=>{function n(e){e.close(),e.remove()}a.d(t,{O:()=>n})},7757:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{L:()=>m});var d=a(1211),i=a(7608),c=a(8264),o=a(3757),r=a(9712),s=a(8316),l=e([i]);i=(l.then?(await l)():l)[0];const p='<i class="fa-regular fa-circle"></i>',u='<i class="fa-solid fa-check"></i>';function m(e,t){const a=9===t.state_id||10===t.state_id,n=document.createElement("details");n.classList.add("order-element");const o=document.createElement("summary");let r,s,l,m;if([...e.attributes].forEach((e=>{o.setAttribute(e.name,e.value)})),e.classList.remove(...e.classList),e.appendChild(n),n.appendChild(o),r=f(t.order_no),o.appendChild(r),r=f(t.order_date),o.appendChild(r),r=f(t.our_company),o.appendChild(r),r=f(t.company),o.appendChild(r),r=f(parseFloat(t.total_amount).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),r.dataset.name="total_amount",r.classList.add("align-right"),o.appendChild(r),r=f(t.state),r.dataset.id=t.state_id,r.dataset.name="state",o.appendChild(r),r=f(t.manager),r.dataset.id=t.manager_id,r.dataset.mail=t.manager_mail,o.appendChild(r),r=f(t.responsible),r.dataset.id=t.responsible_id,r.dataset.name="user_responsible",o.appendChild(r),r=f(t.days_to_deliver),r.dataset.name="days_to_deliver",o.appendChild(r),r=f(t.delivery_date),r.dataset.name="delivery_date",o.appendChild(r),r=document.createElement("div"),r.classList.add("file-dropdown"),s=document.createElement("button"),s.classList.add("btn"),l=t.branding,s.insertAdjacentHTML("afterbegin",l?u:p),r.appendChild(s),m=C(l,a,"макет",t),r.appendChild(m),o.appendChild(r),r=document.createElement("div"),r.classList.add("file-dropdown"),s=document.createElement("button"),s.classList.add("btn"),l=t.invoice,s.insertAdjacentHTML("afterbegin",l?u:p),r.appendChild(s),m=C(l,a,"счет",t),r.appendChild(m),o.appendChild(r),r=document.createElement("div"),r.classList.add("file-dropdown"),s=document.createElement("button"),s.classList.add("btn"),l=t.delivery,s.insertAdjacentHTML("afterbegin",l?u:p),r.appendChild(s),m=C(l,a,"накладную",t),r.appendChild(m),o.appendChild(r),r=f(t.state_changed_at),o.appendChild(r),a){const e=(0,c.T)("Дубль");e.dataset.order=t.order_no,e.dataset.id=t.id,e.addEventListener("click",(async e=>{await v(e,t.id)})),o.appendChild(e)}else{const e=(0,d.E)("Изм");e.dataset.order=t.order_no,e.dataset.id=t.id,e.addEventListener("click",(async e=>{await(0,i.b8)(e,o)})),o.appendChild(e)}r=document.createElement("div"),r.classList.add("order-element__toggle"),o.appendChild(r),t.items.forEach((e=>{_(e,n,o,a)})),y(t,n,o,a)}function _(e,t,a,n){const c=document.createElement("div");let o;if(c.classList.add("dictionary-content__row","order-element__item"),c.dataset.id=e.id,o=f(""),c.appendChild(o),o=f(e.article),c.appendChild(o),o=f(e.name),c.appendChild(o),o=f(e.branding_name),o.dataset.name="branding_name",c.appendChild(o),o=f(parseFloat(e.price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),o.classList.add("align-right"),c.appendChild(o),o=f(e.quantity.toLocaleString("ru-RU")),o.classList.add("align-right"),c.appendChild(o),o=f(parseFloat(e.total_price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),o.dataset.name="total_amount",o.classList.add("align-right"),c.appendChild(o),n)o=document.createElement("div"),c.appendChild(o);else{const t=(0,d.E)("Изм");t.dataset.id=e.id,t.dataset.article=e.article,t.addEventListener("click",(async e=>{await(0,i.ij)(e,c,a)})),c.appendChild(t)}t.appendChild(c),e.brandings&&e.brandings.forEach((d=>{h(d,e.quantity,t,e.article,a,n)}))}function h(e,t,a,n,c,o){const r=document.createElement("div");let s;r.classList.add("dictionary-content__row","order-element__branding"),s=f(""),r.appendChild(s);let l=`${e.print_type} ${e.print_place}, цветов: ${e.colors}`;if(e.second_pass&&(l+=", второй проход"),s=f(l),s.dataset.name="branding_text",r.appendChild(s),s=f(parseFloat(e.price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),s.dataset.name="price",s.classList.add("align-right"),r.appendChild(s),s=f(t.toLocaleString("ru-RU")),s.classList.add("align-right"),r.appendChild(s),s=f(parseFloat(e.total_price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),s.dataset.name="total_price",s.classList.add("align-right"),r.appendChild(s),o)s=document.createElement("div"),r.appendChild(s);else{const t=(0,d.E)("Изм");t.dataset.id=e.id,t.dataset.article=n,t.addEventListener("click",(async e=>{await(0,i.K1)(e,r,c)})),r.appendChild(t)}a.appendChild(r)}function y(e,t,a,n){const c=document.createElement("div");let o;if(c.classList.add("dictionary-content__row","order-element__branding","delivery-row"),o=f(""),c.appendChild(o),o=f(`доставка ${e.delivery_option}`),o.dataset.name="delivery_option",c.appendChild(o),o=f(""),c.appendChild(o),o=f(""),c.appendChild(o),o=f(parseFloat(e.delivery_option_price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),o.classList.add("align-right"),o.dataset.name="price",c.appendChild(o),n)o=document.createElement("div"),c.appendChild(o);else{const t=(0,d.E)("Изм");t.dataset.id=e.id,t.dataset.order=e.order_no,t.addEventListener("click",(async e=>{await(0,i.rN)(e,c,a)})),c.appendChild(t)}t.appendChild(c)}function f(e){const t=document.createElement("div");return t.classList.add("dictionary-content__row_item","user-element__cell"),t.textContent=e||"",t}async function v(e,t){if(e.preventDefault(),"ok"===(await(0,o.D)(`/cms/json/order_duplicate/${t}`)).status){const e=document.querySelector(".dictionary-content__rows");e.innerHTML="",await(0,r.O)(e,0,"",!0,m,"order-element__header","/cms/json/order_list")}}function C(e,t,a,n){let d;const i=document.createElement("ul");return i.classList.add("file-dropdown__list"),"счет"!==a||t||(d=document.createElement("li"),d.classList.add("file-dropdown__list_item"),d.textContent=`Сформировать ${a}`,d.addEventListener("click",(async e=>{e.preventDefault(),window.open(`/cms/invoice-pdf/${n.id}/`,"_blank")})),i.appendChild(d)),d=document.createElement("li"),d.classList.add("file-dropdown__list_item"),d.textContent=`Загрузить ${a}`,t&&(d.style.display="none"),d.addEventListener("click",(async e=>{await E(e,a,n)})),i.appendChild(d),d=document.createElement("li"),d.classList.add("file-dropdown__list_item"),d.textContent=`Открыть ${a}`,e||(d.style.display="none"),d.addEventListener("click",(async e=>{await g(e,a,n)})),i.appendChild(d),i}async function E(e,t,a){let n,d;switch(e.preventDefault(),t){case"счет":n="invoice_file",d=`счет_заказу_${a.order_no}_от_${a.order_date}.pdf`;break;case"макет":n="branding_file",d=`макет_к_заказу_${a.order_no}_от_${a.order_date}.pdf`;break;case"накладную":n="delivery_file",d=`накладная_к_заказу_${a.order_no}_от_${a.order_date}.pdf`}const i=document.createElement("input");i.type="file",i.accept=".pdf",i.addEventListener("change",(async i=>{const c=i.target.files[0];if(!c)return;if(!c.name.toLowerCase().endsWith(".pdf"))return void alert("Только PDF файлы разрешены");const o=new FormData;o.append("file",c),o.append("file_type",t),o.append("order_id",a.id);try{const t=await fetch("/cms/json/order_upload_file",{method:"POST",headers:{"X-CSRFToken":(0,s.m)()},body:o});"ok"===(await t.json()).status&&(e.target.closest(".file-dropdown").querySelector("button").innerHTML=u,e.target.nextElementSibling.style.display="block",a[n]=d)}catch(e){console.error("Error:",e)}})),i.click()}async function g(e,t,a){let n;switch(e.preventDefault(),t){case"счет":n=`/static/viki_web_cms/files/order/invoice/${a.invoice_file}`;break;case"макет":n=`/static/viki_web_cms/files/order/branding/${a.branding_file}`;break;case"накладную":n=`/static/viki_web_cms/files/order/delivery/${a.delivery_file}`}window.open(n,"_blank")}n()}catch(b){n(b)}}))},7847:(e,t,a)=>{function n(e){const t=document.createElement("input");return t.type="checkbox",t.checked=e,t.classList.add("check"),t}a.d(t,{G:()=>n})},7979:(e,t,a)=>{a.d(t,{t:()=>n});const n=[{field:"deleted",type:"boolean",label:"уд."},{field:"name",type:"string",label:"название",null:!1},{field:"item_article",type:"string",label:"артикул",null:!1},{field:"main_color",type:"foreign",label:"осн. цвет",foreignClass:"Color",null:!1},{field:"goods_option",type:"foreign",label:"опция",foreignClass:"GoodsOption",null:!1},{field:"image",type:"img",label:"фото",url:"/static/viki_web_cms/files/item_photo/",null:!0},{field:"simple_article",type:"boolean",label:"ст. арт."},{field:"goods",type:"foreign",label:"номенклатура",foreignClass:"Goods",null:!1},{field:"image_file",type:"file",label:"файл",null:!0}]},8007:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{h:()=>c});var d=a(816),i=e([d]);async function c(e){const t=e.fieldName.foreignClass,a=e.fieldValue,n=await(0,d.M)(t,a,e.fieldName.null);return n.querySelector("[hidden]").name=e.fieldName.field+"_id",n}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},8016:(e,t,a)=>{a.d(t,{i:()=>l});var n=a(8063),d=a(8664),i=a(8264),c=a(1211),o=a(7728),r=a(7090),s=a(8316);async function l(){const e=document.createElement("dialog");e.classList.add("login-cms");const t=(0,n.h)(e,"Вход",0);t.firstElementChild.textContent="Вход",e.appendChild(t);const a=document.createElement("input");a.type="text",a.classList.add("login-cms__input"),e.appendChild(a);const p=document.createElement("input");p.type="password",p.classList.add("login-cms__input"),e.appendChild(p),document.querySelector(".service").appendChild(e);const u=document.createElement("div");u.classList.add("login-cms__btn-block");const m=(0,i.T)("Закрыть");m.addEventListener("click",(t=>{(0,o.O)(e)})),u.appendChild(m);const _=(0,c.E)("Войти");_.addEventListener("click",(t=>{!async function(e,t,a,n){e.preventDefault(),await fetch("./user_login",{method:"POST",headers:{"X-CSRFToken":(0,s.m)()},body:JSON.stringify({username:t,password:a})}).then((e=>e.json())).then((e=>{localStorage.setItem("userData",JSON.stringify(e));const t=(0,r.g)(),a=document.querySelector(".menu__right");t?a.removeEventListener("click",l):a.addEventListener("click",l),(0,o.O)(n)}))}(t,a.value,p.value,e)})),u.appendChild(_),e.appendChild(u),e.showModal(),(0,d.Y)(e),document.querySelector(".menu-right")}},8058:(e,t,a)=>{a.d(t,{J:()=>d});var n=a(9712);async function d(e,t,a,d,i){const c=document.createElement("div");c.classList.add(e);const o=function(e,t){const a=document.createElement("div");return a.classList.add("dictionary-content__title",t),e.forEach((e=>{const t=document.createElement("div");t.classList.add("dictionary-content__title_item","user-element__header-item"),t.textContent=e.title,a.appendChild(t)})),a}(t,a);c.appendChild(o);const r=document.createElement("div");return r.classList.add("dictionary-content__rows"),await(0,n.O)(r,0,"",!0,d,a,i),c.appendChild(r),c}},8063:(e,t,a)=>{a.d(t,{h:()=>d});var n=a(7728);function d(e,t,a){const d=document.createElement("div");d.classList.add("modal__header");let i=t;i="0"===a?"Создать "+i:"Изменить "+i;const c=document.createElement("div");c.textContent=i,d.appendChild(c);const o=document.createElement("button");return o.classList.add("modal__header_btn"),o.textContent="×",o.addEventListener("click",(t=>{t.preventDefault(),(0,n.O)(e)})),d.appendChild(o),d}},8264:(e,t,a)=>{function n(e){const t=document.createElement("button");return t.classList.add("btn","btn__cancel"),t.textContent=e,t}a.d(t,{T:()=>n})},8316:(e,t,a)=>{function n(){return document.cookie.split("; ").find((e=>e.startsWith("csrftoken=")))?.split("=")[1]}a.d(t,{m:()=>n})},8645:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{l:()=>c});var d=a(1057),i=e([d]);async function c(e,t,a,n){const i=e.querySelector(".catalogue__content");i.innerHTML="",await(0,d.D)(i,t.checked?0:1,a.checked?0:1,0,n,0)}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},8664:(e,t,a)=>{function n(e){let t,a,n=!1;e.querySelector(".modal__header").addEventListener("mousedown",(d=>{n=!0,t=d.clientX-e.offsetLeft,a=d.clientY-e.offsetTop,e.style.cursor="grabbing"})),document.addEventListener("mousemove",(d=>{n&&(e.style.left=d.clientX-t+"px",e.style.top=d.clientY-a+"px")})),document.addEventListener("mouseup",(()=>{n=!1,e.style.cursor="grab"}))}a.d(t,{Y:()=>n})},8833:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{h:()=>l});var d=a(7310),i=a(4859),c=a(1211),o=a(3757),r=a(7674),s=e([d,r]);async function l(e,t){const a=document.querySelector(".dictionary-frame__header_right"),n=a.querySelector(".dictionary-frame__input"),i=a.querySelector(".btn__save"),c=a.querySelector(".btn__cancel");n.disabled=!0,i.disabled=!0,i.classList.add("btn__disabled"),c.disabled=!0,c.classList.add("btn__disabled");const r=document.createElement("div");r.classList.add("price-content");const s=await p(),l=d.e+"printing_price_data/"+e;let _;return(await(0,o.D)(l)).priceData.forEach((e=>{const t=document.createElement("div");t.classList.add("type-table"),_="2fr repeat("+e.print_volume_length+", 1fr)",t.appendChild(u(e,_)),e.print_groups.forEach((a=>{t.appendChild(m(a,_,e.print_volume_data))})),r.appendChild(t)})),{form:r,header:s}}async function p(){const e=document.createElement("div");e.classList.add("print-header");const t=(0,i.C)("Загрузить csv");e.appendChild(t);const a=(0,c.E)("Сохранить");return e.appendChild(a),a.addEventListener("click",await r.c),e}function u(e,t){let a;const n=document.createElement("div");return n.classList.add("type-table__row","type-table__header"),n.style.gridTemplateColumns=t,a=document.createElement("div"),n.appendChild(a),a.textContent=e.print_type__name,e.print_volume_data.forEach((e=>{a=document.createElement("div"),a.textContent="до "+e.quantity,n.appendChild(a)})),n}function m(e,t,a){const n=document.createElement("div");n.classList.add("type-table__row"),n.style.gridTemplateColumns=t;const d=document.createElement("div");return d.classList.add("type-table__item"),d.textContent=e.print_price_group__name,n.appendChild(d),a.forEach((t=>{n.appendChild(_(e,t))})),n}function _(e,t){const a=document.createElement("input");a.type="number",a.classList.add("type-table__input","price-row__item_disabled"),a.readOnly=!0,a.addEventListener("dblclick",(e=>{e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled")}));const n=e.prices.find((e=>e.print_volume__id===t.print_volume_id));return a.dataset.id=n?n.price__id:"",a.dataset.print_volume__id=t.print_volume_id,a.dataset.print_price_group__id=e.print_price_group__id,a.value=n?.price,a}[d,r]=s.then?(await s)():s,n()}catch(h){n(h)}}))},8846:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{f:()=>c});var d=a(3682),i=e([d]);function c(e,t){e.style.flexDirection="row";const a=document.createElement("div");a.classList.add("content__left"),e.appendChild(a);const n=document.createElement("div");n.classList.add("content__right"),e.appendChild(n),JSON.parse(t).forEach((e=>{let t=document.createElement("details");t.classList.add("section-left");let n=document.createElement("summary");n.textContent=e.section_name,t.appendChild(n),e.cms_settings.forEach((e=>{let a=document.createElement("li");a.textContent=e.setting,a.dataset.class=e.setting_class,a.dataset.upload=e.upload,a.dataset.new=e.new,a.classList.add("section-left__content"),t.appendChild(a)}));const i=t.querySelectorAll("li");i.forEach((e=>{e.addEventListener("click",(()=>(0,d.V)(e,e.dataset.class,JSON.parse(e.dataset.upload),JSON.parse(e.dataset.new),t,i)))})),a.appendChild(t)}))}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},9132:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{n:()=>r});var d=a(2830),i=a(4708),c=a(8645),o=e([c,d]);async function r(e,t){const a=e.closest(".dictionary-frame__header").parentElement,n=a.querySelector(".dictionary-frame__input").value,o=a.querySelector(".check-deleted"),r=a.querySelector(".check-new");"Catalogue"===t?await(0,c.l)(a,o,r,(0,i.Z)(n)):await(0,d.n)(a,t,o,r,(0,i.Z)(n))}[c,d]=o.then?(await o)():o,n()}catch(s){n(s)}}))},9227:(e,t,a)=>{a.d(t,{r:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("checkbox");return t.checked=e.fieldValue,t.id=e.fieldName.field+"Input",t.name=e.fieldName.field,t}},9336:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{C:()=>l});var d=a(7728),i=a(8063),c=a(1211),o=a(9635),r=a(8664),s=e([o]);async function l(e){const t=document.querySelector(".service"),a=document.createElement("dialog");a.classList.add("catalogue__modal"),a.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,d.O)(a)}));const n=(0,i.h)(a,"",0);n.firstElementChild.textContent="Новый прайс лист",a.appendChild(n);const s=document.createElement("form");s.id="priceDialog",s.classList.add("modal__form");const l=document.createElement("div");l.classList.add("price__modal_row");const p=document.createElement("label");p.classList.add("price__modal_label"),p.textContent="дата прайс-листа",p.htmlFor="priceDate";const u=document.createElement("input");u.classList.add("price__modal_date"),u.type="date",u.id="priceDate",u.name="priceDate",l.appendChild(p),l.appendChild(u),s.appendChild(l);const m=document.createElement("div");m.classList.add("price__modal_row");const _=document.createElement("label");_.classList.add("price__modal_label"),_.textContent="акция",_.htmlFor="promoCheck";const h=document.createElement("input");h.classList.add("price__modal_check"),h.type="checkbox",h.id="promoCheck",h.name="promoCheck";const y=document.createElement("label");y.classList.add("price__modal_label"),y.textContent="окончание",y.htmlFor="promoDate";const f=document.createElement("input");f.classList.add("price__modal_date"),f.type="date",f.id="promoDate",f.name="promoDate",m.appendChild(_),m.appendChild(h),m.appendChild(y),m.appendChild(f),s.appendChild(m);const v=(0,c.E)("Записать");v.addEventListener("click",o.R),v.classList.add("price__modal_btn"),s.appendChild(v),a.appendChild(s),t.appendChild(a),a.showModal(),(0,r.Y)(a)}o=(s.then?(await s)():s)[0],n()}catch(p){n(p)}}))},9370:(e,t,a)=>{function n(e){const t=e.target.closest("form");if(t.querySelector("textarea").value){const e=t.querySelector(".btn__save");e.disabled=!1,e.classList.remove("btn__disabled");const a=t.querySelector(".btn__cancel");a.disabled=!1,a.classList.remove("btn__disabled")}}a.d(t,{W:()=>n})},9410:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{c:()=>r});var d=a(7310),i=a(3757),c=a(8316),o=e([d]);async function r(e,t){t.disabled=!0,t.classList.add("btn__disabled");const a=t.closest("form"),n=a.querySelector('input[name="id"]').value,o=document.querySelector(".catalogue__title").querySelector(".btn__save");o.disabled=!1,o.classList.remove("btn__disabled");const r=new FormData(a),s=Object.fromEntries(r.entries());let l=!1;if("0"!==n){const e=d.e+"catalogue_record/"+n,t=await(0,i.D)(e);for(const e in s)if(t.values[0][e]!==s[e]){l=!0;break}}if("0"===n||l){e.preventDefault();const t=d.e+"save_catalogue_item/"+n;await fetch(t,{method:"POST",headers:{"X-CSRFToken":(0,c.m)()},body:r}).then((e=>e.json())).then((e=>{"0"===n&&(a.querySelector('input[name="id"]').value=e.id);const t=a.querySelector(".btn__cancel");t.disabled=!0,t.classList.add("btn__disabled")}))}}d=(o.then?(await o)():o)[0],n()}catch(s){n(s)}}))},9546:(e,t,a)=>{a.d(t,{_:()=>c});var n=a(8264),d=a(1211),i=a(7728);function c(e,t){const a=document.createElement("div");a.classList.add("modal__button-block");const c=(0,n.T)("Отменить");c.type="button",c.addEventListener("click",(t=>{t.preventDefault(),(0,i.O)(e)}));const o=(0,d.E)("Записать");return o.type="button",o.classList.add("submit"),o.dataset.id=t,a.appendChild(c),a.appendChild(o),a}},9550:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Z:()=>o});var d=a(2814),i=a(7502),c=e([i]);async function o(e){const t=document.createElement("div");t.classList.add("dictionary-content__title","dictionary-content__row"),t.appendChild((0,d.N)()),e.forEach((e=>{let a=document.createElement("div");a.classList.add("dictionary-content__title_item"),a.textContent=e.label,t.appendChild(a)}));const a=document.createElement("button");return a.classList.add("btn","btn__save"),a.textContent="Создать",a.dataset.itemId="0",a.addEventListener("click",(e=>(0,i.w)(e))),t.appendChild(a),t}i=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},9635:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{R:()=>s});var d=a(483),i=a(7310),c=a(7728),o=a(8316),r=e([i,d]);async function s(e){e.preventDefault();const t=e.target.closest("form"),a=document.getElementById("promoCheck"),n=document.getElementById("promoDate");n.addEventListener("click",(()=>{n.classList.remove("price__modal_border-alert")})),a.addEventListener("click",(()=>{n.classList.remove("price__modal_border-alert")}));const r=document.getElementById("priceDate");if(r.addEventListener("click",(()=>{r.classList.remove("price__modal_border-alert")})),r.value)if(a.checked&&!n.value)n.classList.add("price__modal_border-alert");else{const a=new FormData(t),n=i.e+"save_new_price_date";await fetch(n,{method:"POST",headers:{"X-CSRFToken":(0,o.m)()},body:a}).then((e=>e.json())).then((async t=>{const a=document.querySelector(".dictionary-frame__header_left"),n=a.querySelector(".dropdown__list"),i=a.querySelector(".price-dropdown__input"),o=a.querySelector('input[name="priceDateId"]'),r=e.target.closest("dialog");await(0,d.X4)(t,n,i,o),(0,c.O)(r)}))}else r.classList.add("price__modal_border-alert")}[i,d]=r.then?(await r)():r,n()}catch(l){n(l)}}))},9686:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{V:()=>l});var d=a(8316),i=a(1211),c=a(816),o=a(8264),r=a(7728),s=e([c]);async function l(e){const t=document.createElement("dialog");document.body.appendChild(t),t.classList.add("files-element__modal");const a=await(0,c.M)("Company");t.appendChild(a);const n=document.createElement("div");n.classList.add("files-element__btn-block");const d=(0,o.T)("Закрыть");d.addEventListener("click",(async()=>{(0,r.O)(t)})),n.appendChild(d);const s=(0,i.E)("Добавить");s.dataset.id=e,s.addEventListener("click",(async()=>{const n=a.querySelector("input[hidden]").value;await p(n,e),(0,r.O)(t)})),n.appendChild(s),t.appendChild(n),t.showModal()}async function p(e,t){const a=new FormData;a.append("company_id",e),a.append("customer_id",t);const n=await fetch("/cms/json/company_change_customer",{method:"POST",headers:{"X-CSRFToken":(0,d.m)()},body:a}),i=await n.json();if(i.changed){const e=document.querySelector(`div.group-element__item[data-id="${i.companyId}"]`),t=e.cloneNode(!0);e.remove();const a=document.querySelector(`summary[data-id="${i.newCustomerId}"]`);a.closest("details").appendChild(t),a.querySelectorAll("div.dictionary-content__row"),i.oldCustomerId&&document.querySelector(`summary[data-id="${i.oldCustomerId}"]`).closest("details").remove()}}c=(s.then?(await s)():s)[0],n()}catch(u){n(u)}}))},9712:(e,t,a)=>{a.d(t,{O:()=>d});var n=a(3757);async function d(e,t=0,a="",i=!1,c,o,r){null==a&&(a="");const s=await async function(e=0,t="",a=!1,d){try{const i=new URLSearchParams({last_record:e});t&&i.append("search",t),a&&i.append("new","1");const c=await(0,n.D)(`${d}?${i.toString()}`);return c&&"object"==typeof c?(Array.isArray(c.dataList)||(c.dataList=[]),c):{dataList:[],last_record:e}}catch(t){return console.error("Failed to fetch user data:",t),{dataList:[],last_record:e}}}(t,a,i,r),l=s&&s.dataList?s.dataList:[];if(l&&l.length>0){let n=1;l.forEach((s=>{const l=document.createElement("div");l.classList.add("dictionary-content__row",o),l.dataset.id=s.id,e.appendChild(l),c(l,s),n++,20===n&&(l.dataset.last=(t+20).toString(),l.addEventListener("mouseover",(()=>{!async function(e,t,a,n,i,c,o,r){null==n&&(n=""),await d(t,a,n,i,c,o,r);const s=e.cloneNode(!0);e.parentNode.replaceChild(s,e)}(l,e,t+20,a,i,c,o,r)})))}))}}},9857:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{H:()=>o});var d=a(2907),i=a(7310),c=e([d,i]);async function o(e,t,a){e.style.flexDirection="column";const n=JSON.parse(t)[0],c=n.cms_settings[0].setting,o=n.cms_settings[0].setting_class,r=n.cms_settings[0].upload,s=n.cms_settings[0].new,l=n.cms_settings[0].delete,p=(0,d.I)(o,c,r,s,l);e.appendChild(p);const u=await i.G[a](o);e.appendChild(u),("UserExtension"===a||"Order"===a||"CustomerGroup"===a)&&(document.querySelector('div.dictionary-frame__header [type="checkbox"]').checked=!0)}[d,i]=c.then?(await c)():c,n()}catch(r){n(r)}}))}},i={};function c(e){var t=i[e];if(void 0!==t)return t.exports;var a=i[e]={exports:{}};return d[e](a,a.exports,c),a.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},c.a=(d,i,c)=>{var o;c&&((o=[]).d=-1);var r,s,l,p=new Set,u=d.exports,m=new Promise(((e,t)=>{l=t,s=e}));m[t]=u,m[e]=e=>(o&&e(o),p.forEach(e),m.catch((e=>{}))),d.exports=m,i((d=>{var i;r=(d=>d.map((d=>{if(null!==d&&"object"==typeof d){if(d[e])return d;if(d.then){var i=[];i.d=0,d.then((e=>{c[t]=e,n(i)}),(e=>{c[a]=e,n(i)}));var c={};return c[e]=e=>e(i),c}}var o={};return o[e]=e=>{},o[t]=d,o})))(d);var c=()=>r.map((e=>{if(e[a])throw e[a];return e[t]})),s=new Promise((t=>{(i=()=>t(c)).r=0;var a=e=>e!==o&&!p.has(e)&&(p.add(e),e&&!e.d&&(i.r++,e.push(i)));r.map((t=>t[e](a)))}));return i.r?s:c()}),(e=>(e?l(m[a]=e):s(u),n(o)))),o&&o.d<0&&(o.d=0)},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c(7310)})();