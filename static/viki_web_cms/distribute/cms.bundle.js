(()=>{"use strict";var e,t,n,a,d={35:(e,t,n)=>{n.d(t,{a:()=>d});var a=n(9712);function d(e,t,n){const a=document.querySelector(".dictionary-frame__header"),d=a.cloneNode(!0);a.parentNode.replaceChild(d,a);const i=d.querySelector('input[type="checkbox"]'),r=i.cloneNode(!0);i.parentNode.replaceChild(r,i);const o=d.querySelector(".dictionary-frame__input"),s=o.cloneNode(!0);o.parentNode.replaceChild(s,o);const l=d.querySelector(".btn__save"),p=l.cloneNode(!0);l.parentNode.replaceChild(p,l);const u=d.querySelector(".btn__cancel"),m=u.cloneNode(!0);u.parentNode.replaceChild(m,u),r.addEventListener("change",(async()=>{const a=s.value;await c(a,r.checked,e,t,n)})),p.addEventListener("click",(async()=>{const a=s.value;await c(a,r.checked,e,t,n)})),m.addEventListener("click",(async()=>{s.value="",await c("",r.checked,e,t,n)})),s.addEventListener("keypress",(async a=>{if("Enter"===a.key){const a=s.value;await c(a,r.checked,e,t,n)}}))}async function c(e,t,n,d,c){let i=document.querySelector(".dictionary-content__rows");i.innerHTML="",await(0,a.O)(i,0,e,t,n,d,c)}},276:(e,t,n)=>{n.d(t,{r:()=>v});var a=n(35),d=n(1211),c=n(7728),i=n(8063),r=n(9546),o=n(8664),s=n(3757);function l(e,t,n){const a=document.createElement("div");a.classList.add("dropdown");const d=document.createElement("input");d.type="hidden",d.name=n,a.appendChild(d);const c=document.createElement("input");c.type="text",c.classList.add("modal__content_text","dropdown__input"),a.appendChild(c),a.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const i=document.createElement("ul");if(i.style.display="none",i.classList.add("dropdown__list"),a.appendChild(i),e.forEach((e=>{const t=document.createElement("li");t.classList.add("dropdown__list_item"),t.textContent=e.value,t.dataset.id=e.id,t.addEventListener("click",(()=>{d.value=e.id,c.value=e.value,i.style.display="none"})),i.appendChild(t)})),t){const n=e.find((e=>e.id===parseInt(t)));n&&(d.value=n.id,c.value=n.value)}return c.addEventListener("input",(()=>{const e=c.value.toLowerCase(),t=i.getElementsByTagName("li");Array.from(t).forEach((t=>{const n=t.textContent.toLowerCase();t.style.display=n.includes(e)?"":"none"}))})),c.addEventListener("click",(e=>{e.stopPropagation(),i.style.display="none"===i.style.display?"":"none"})),document.addEventListener("click",(e=>{a.contains(e.target)||(i.style.display="none")})),a}var p=n(2952);const u={editOrder:{type:"editOrder",content:function(e,t,n){return t}},editItem:{type:"editItem",content:function(e,t,n){const a=document.createElement("label");a.htmlFor=`itemPrice_${n}`,a.textContent="цена",a.classList.add("modal__content_label"),t.appendChild(a);const d=(0,p.k)("number");if(d.id=`itemPrice_${n}`,d.name="price",d.step="0.01",d.value=e.price,d.classList.add("modal__content_number"),t.appendChild(d),Object.keys(e).includes("branding_name")){const a=document.createElement("label");a.htmlFor=`itemBranding_${n}`,a.textContent="нанесение",a.classList.add("modal__content_label"),t.appendChild(a);const d=(0,p.k)("text");d.id=`itemBranding_${n}`,d.name="branding_name",d.value=e.branding_name,d.classList.add("modal__content_text"),t.appendChild(d)}return t}},editBranding:{type:"editBranding",content:function(e,t,n){const a=document.createElement("div");a.textContent="тип нанесения",a.classList.add("modal__content_label"),a.htmlFor=`printType_${n}`,t.appendChild(a);const d=l(e.available_print_types,e.print_type_id,"print_type__id");d.id=`printType_${n}`,t.appendChild(d);const c=document.createElement("div");c.textContent="тип нанесения",c.classList.add("modal__content_label"),c.htmlFor=`printPlace_${n}`,t.appendChild(c);const i=l(e.available_print_places,e.print_place_id,"print_place__id");i.id=`printPlace_${n}`,t.appendChild(i);const r=document.createElement("div");r.textContent="кол-во цветов",r.classList.add("modal__content_label"),r.htmlFor=`color_${n}`,t.appendChild(r);const o=l(e.available_colors,e.colors,"print_place__id");o.id=`color_${n}`,t.appendChild(o);const s=document.createElement("div");s.textContent="второй проход",s.classList.add("modal__content_label"),s.htmlFor=`pass_${n}`,t.appendChild(s);const u=(0,p.k)("checkbox");return u.name="second_pass",u.classList.add("check"),u.id=`pass_${n}`,t.appendChild(u),t}},editDelivery:{type:"editDelivery",content:function(e,t,n){const a=document.createElement("div");a.textContent="доставка",a.classList.add("modal__content_label"),t.appendChild(a);const d=l(e.available_options,n,"id");return t.appendChild(d),t}}};async function m(e,t,n,a){const d=await async function(e,t){const n=document.createElement("dialog");n.classList.add("modal"),n.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,c.O)(n)}));const a=(0,i.h)(n,e.headerText,t);n.appendChild(a);const d=document.createElement("form");d.id=e.type+"__form",d.classList.add("modal__form"),d.enctype="multipart/form-data";const o=await async function(e,t){const n=new URLSearchParams({id:t,type:e.type}),a=await(0,s.D)(`json/order_modal_request?${n.toString()}`),d=document.createElement("div");return d.classList.add("modal__content"),e.content(a,d,t)}(e,t);return d.appendChild(o),d.appendChild((0,r._)(n,t)),n.appendChild(d),new FormData(d),d.querySelector(".submit").addEventListener("click",(e=>async function(){}())),n}(e,t);document.querySelector(".service").appendChild(d),d.showModal(),(0,o.Y)(d)}function _(e,t){const n=document.createElement("details");n.classList.add("order-element");const a=document.createElement("summary");let c;[...e.attributes].forEach((e=>{a.setAttribute(e.name,e.value)})),e.parentNode.replaceChild(n,e),n.appendChild(a),c=h(t.order_no),a.appendChild(c),c=h(t.order_date),a.appendChild(c),c=h(t.our_company),a.appendChild(c),c=h(t.company),a.appendChild(c),c=h(parseFloat(t.total_amount).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),c.classList.add("align-right"),a.appendChild(c),c=h(t.state),c.dataset.id=t.state_id,a.appendChild(c),c=h(t.manager),c.dataset.id=t.manager_id,c.dataset.mail=t.manager_mail,a.appendChild(c),c=h(t.responsible),c.dataset.id=t.responsible_id,a.appendChild(c),c=h(t.days_to_deliver),a.appendChild(c),c=h(t.delivery_date),a.appendChild(c),c=y("True"===t.branding),a.appendChild(c),c=y("True"===t.invoice),a.appendChild(c),c=y("True"===t.delivery),a.appendChild(c),c=h(t.state_changed_at),a.appendChild(c);const i=(0,d.E)("Изм");i.dataset.order=t.order_no,i.dataset.id=t.id,i.addEventListener("click",(async e=>{await async function(e){e.preventDefault();const t=e.target.dataset.id,n=e.target.dataset.order,a=u.editOrder;a.headerText=`заказ ${n}`,await m(a,t)}(e)})),a.appendChild(i),c=document.createElement("div"),c.classList.add("order-element__toggle"),a.appendChild(c),t.items.forEach((e=>{!function(e,t){const n=document.createElement("div");let a;n.classList.add("dictionary-content__row","order-element__item"),n.dataset.id=e.id,a=h(""),n.appendChild(a),a=h(e.article),n.appendChild(a),a=h(e.name),n.appendChild(a),a=h(e.branding_name),n.appendChild(a),a=h(parseFloat(e.price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),a.classList.add("align-right"),n.appendChild(a),a=h(e.quantity.toLocaleString("ru-RU")),a.classList.add("align-right"),n.appendChild(a),a=h(parseFloat(e.total_price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),a.classList.add("align-right"),n.appendChild(a);const c=(0,d.E)("Изм");c.dataset.id=e.id,c.dataset.article=e.article,c.addEventListener("click",(async e=>{await async function(e){const t=e.target.dataset.id,n=e.target.dataset.article,a=u.editItem;a.headerText=`арт. ${n}`,await m(a,t)}(e)})),n.appendChild(c),t.appendChild(n),e.brandings&&e.brandings.forEach((n=>{!function(e,t,n,a){const c=document.createElement("div");let i;c.classList.add("dictionary-content__row","order-element__branding"),i=h(""),c.appendChild(i);let r=`${e.print_type} ${e.print_place}, цветов: ${e.colors}`;e.second_pass&&(r+=", второй проход"),i=h(r),c.appendChild(i),i=h(parseFloat(e.price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),i.classList.add("align-right"),c.appendChild(i),i=h(t.toLocaleString("ru-RU")),i.classList.add("align-right"),c.appendChild(i),i=h(parseFloat(e.total_price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),i.classList.add("align-right"),c.appendChild(i);const o=(0,d.E)("Изм");o.dataset.id=e.id,o.dataset.article=a,o.addEventListener("click",(async e=>{await async function(e){const t=e.target.dataset.id,n=e.target.dataset.article,a=u.editBranding;a.headerText=`нанесение для арт. ${n}`,await m(a,t)}(e)})),c.appendChild(o),n.appendChild(c)}(n,e.quantity,t,e.article)}))}(e,n)})),function(e,t){const n=document.createElement("div");let a;n.classList.add("dictionary-content__row","order-element__branding","delivery-row"),a=h(""),n.appendChild(a),a=h(`доставка ${e.delivery_option}`),n.appendChild(a),a=h(""),n.appendChild(a),a=h(""),n.appendChild(a),a=h(parseFloat(e.delivery_option_price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),a.classList.add("align-right"),n.appendChild(a);const c=(0,d.E)("Изм");c.dataset.id=e.delivery_option_id,c.dataset.order=e.order_no,c.addEventListener("click",(async e=>{await async function(e){const t=e.target.dataset.id,n=e.target.dataset.order,a=u.editDelivery;a.headerText=`доставку к заказу ${n}`,await m(a,t)}(e)})),n.appendChild(c),t.appendChild(n)}(t,n)}function h(e){const t=document.createElement("div");return t.classList.add("dictionary-content__row_item","user-element__cell"),t.textContent=e||"",t}function y(e){const t=document.createElement("input");return t.type="checkbox",t.classList.add("check","user-element__check"),t.checked=e||!1,t.disabled=!0,t}var f=n(8058);async function v(e){const t="order-element__header";return(0,a.a)(_,t,"/cms/json/order_list"),await(0,f.J)("order-content",[{title:"номер"},{title:"дата"},{title:"от"},{title:"клиент"},{title:"сумма"},{title:"статус"},{title:"менеджер"},{title:"отв."},{title:"дней"},{title:"срок"},{title:"макет"},{title:"счет"},{title:"накл."},{title:"изм."},{title:""}],t,_,"/cms/json/order_list")}},304:(e,t,n)=>{n.d(t,{I:()=>d});var a=n(2952);function d(e){const t=(0,a.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t.step="0.0001",t}},449:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{p:()=>s});var d=n(4708),c=n(4189),i=n(5800),r=n(8833),o=e([c,i,r]);async function s(e,t,n){switch(t){case"1":return(0,c.N)(e,(0,d.Z)(n));case"2":return(0,i.s)(e,(0,d.Z)(n));case"3":return(0,r.h)(e,(0,d.Z)(n))}}[c,i,r]=o.then?(await o)():o,a()}catch(l){a(l)}}))},483:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{X4:()=>s,n6:()=>l,nA:()=>o});var d=n(7310),c=n(3757),i=n(816),r=e([d,i]);async function o(){const e=d.e+"dropdown_list/Price";return l(await(0,c.D)(e))}function s(e,t,n,a){t.innerHTML="",e.forEach((d=>{(0,i.p)(d,t,n,a),n.value=e[0].value,a.value=e[0].id}))}function l(e){const t=document.createElement("div");t.classList.add("price-dropdown");const n=document.createElement("div");n.classList.add("price-dropdown__frame");const a=document.createElement("input");a.classList.add("price-dropdown__input"),a.readOnly=!0,n.appendChild(a),a.insertAdjacentHTML("afterend",'<i class="fa-solid fa-chevron-down"></i>');const d=document.createElement("input");d.hidden=!0,d.type="text",d.name="priceDateId",t.appendChild(n),t.appendChild(d);const c=document.createElement("ul");return c.classList.add("dropdown__list","invisible"),t.appendChild(c),e[0]&&(a.value=e[0].value,d.value=e[0].id),s(e,c,a,d),t.addEventListener("click",(e=>{c.classList.remove("invisible")})),document.addEventListener("click",(e=>{n.contains(e.target)||c.classList.contains("invisible")||c.classList.add("invisible")})),t}[d,i]=r.then?(await r)():r,a()}catch(p){a(p)}}))},816:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{M:()=>o,p:()=>l});var d=n(2952),c=n(3757),i=n(7310),r=e([i]);async function o(e,t,n){const a=document.createElement("div");a.classList.add("dropdown");const r=(0,d.k)("text"),o=document.createElement("input");o.hidden=!0,o.type="text",r.classList.add("dropdown__input"),a.appendChild(r),a.appendChild(o),a.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const l=document.createElement("ul");l.classList.add("dropdown__list","invisible");const p=i.e+"dropdown_list/"+e,u=await(0,c.D)(p);if(t){let e=u.find((e=>e.id===t));r.value=e.value,o.value=e.id}else u[0]&&!n&&(r.value=u[0].value,o.value=u[0].id);return s(u,l,r,o,n),r.addEventListener("click",(()=>{l.classList.toggle("invisible")})),a.appendChild(l),r.addEventListener("keyup",(e=>{let t=e.target.value.toUpperCase();const n=u.filter((e=>e.value.toUpperCase().indexOf(t)>-1));l.innerHTML="",s(n,l,r,o)})),a}function s(e,t,n,a,d){d&&l({id:"",value:""},t,n,a),e.forEach((e=>{l(e,t,n,a)}))}function l(e,t,n,a){const d=document.createElement("li");d.classList.add("dropdown__list_item"),d.value=e.id,d.textContent=e.value,d.addEventListener("click",(e=>{n.value=e.target.textContent,a.value=e.target.value,a.dispatchEvent(new Event("change",{bubbles:!0})),t.classList.add("invisible")})),t.appendChild(d)}i=(r.then?(await r)():r)[0],a()}catch(p){a(p)}}))},897:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{Q:()=>o});var d=n(9550),c=n(6723),i=n(6825),r=e([i,d,c]);async function o(e,t,n,a,r){const o=await(0,i.G)(e),s=document.createElement("div");s.classList.add("dictionary-content");const l=await(0,d.Z)(o);l.style.gridTemplateColumns=t,s.appendChild(l);const p=await(0,c.Y)(e,n,a,0,r,t);return s.appendChild(p),s.dataset.grid=t,s}[i,d,c]=r.then?(await r)():r,a()}catch(s){a(s)}}))},905:(e,t,n)=>{function a(e){const t=document.createElement("label");return t.classList.add("modal__content_label"),t.htmlFor=e.field+"Input",t.textContent=e.label+(e.null?"":"*"),t}n.d(t,{d:()=>a})},1057:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{D:()=>s});var d=n(7310),c=n(3757),i=n(2428),r=n(3126),o=e([d,r,i]);async function s(e,t,n,a,o,s){const l=d.e+"catalogue_data/"+t+"/"+n+"/"+a+"/"+o+"/"+s,p=(await(0,c.D)(l)).values;let u,m=0;const _=e.querySelector(`form[data-last-id="${a}"]`);_&&_.removeEventListener("mouseover",r.y);for(const t of p)u=document.createElement("form"),await(0,i.I)(t,u),e.appendChild(await u),m++,20===m&&(u.dataset.lastId=Number.parseInt(a)+m,u.addEventListener("mouseover",r.y))}[d,r,i]=o.then?(await o)():o,a()}catch(l){a(l)}}))},1211:(e,t,n)=>{function a(e){const t=document.createElement("button");return t.classList.add("btn","btn__save"),t.textContent=e,t}n.d(t,{E:()=>a})},1316:(e,t,n)=>{n.d(t,{K:()=>d});var a=n(2952);function d(e){const t=(0,a.k)("text");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},1369:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{b:()=>o});var d=n(7310),c=n(3757),i=n(1499),r=e([d]);async function o(e,t,n,a,r){const o=e.target.closest("form"),s=o.querySelector('input[name="id"]'),l=o.querySelector('input[name="colors"]'),p=o.querySelector('input[name="goods_option__id"]'),u=o.querySelector('textarea[name="name"]'),m=o.querySelector('input[name="item_article"]'),_=o.querySelector('input[name="main_color__id"]'),h=o.querySelector(".main_color_text"),y=o.querySelector(".goods_option__name"),f=o.querySelector(".btn__save");function v(){t.textContent="",r.src="",u.value="",m.value="",_.value="",h.textContent="",p.value="",y.textContent="",l.value="",f.disabled=!0,f.classList.contains("btn__disabled")||f.classList.add("btn__disabled")}if(l.value="",p.value="",/(\.jpg|\.jpeg|\.png)$/i.exec(e.target.value)){const o=e.target.files[0],C=new FileReader;C.onload=function(e){r.src=e.target.result},C.readAsDataURL(o),t.textContent=e.target.value.split("\\").pop();const g=t.textContent.split(".")[0],E=d.e+"parse_file_data/"+n+"/"+a+"/"+g+"/"+s.value,b=await(0,c.D)(E);b.error?v():(u.value=b.values.name,m.value=b.values.item_article,_.value=b.values.main_color__id,h.textContent=b.values.main_color_text,p.value=b.values.goods_option__id,y.textContent=b.values.goods_option__name,(0,i.D)(b.values.colors,l),f.disabled=!1,f.classList.remove("btn__disabled"))}else e.target.value="",v()}d=(r.then?(await r)():r)[0],a()}catch(s){a(s)}}))},1401:(e,t,n)=>{n.d(t,{J:()=>d});var a=n(1211);function d(e){const t=document.createElement("dialog");t.classList.add("alert");const n=document.createElement("header");n.classList.add("modal__header");const d=document.createElement("h4");d.textContent="Результат загрузки",n.appendChild(d);const o=document.createElement("div");o.innerHTML="&times;",o.addEventListener("click",(()=>{t.remove()})),n.appendChild(o),t.appendChild(n);const s=c(),l=i("Ошибки",e.recordErrorLength);s.appendChild(l),e.recordError.forEach((e=>{s.appendChild(r(e))})),t.appendChild(s);const p=c(),u=i("Дубли",e.recordDoubleLength);p.appendChild(u),e.recordDouble.forEach((e=>{p.appendChild(r(e))})),t.appendChild(p);const m=c(),_=i("Успешно",e.recordSuccessLength);m.appendChild(_),e.recordSuccess.forEach((e=>{m.appendChild(r(e))})),t.appendChild(m);const h=(0,a.E)("Ok");return h.classList.add("alert__btn"),h.addEventListener("click",(()=>{t.remove()})),t.appendChild(h),t}function c(){const e=document.createElement("details");return e.classList.add("alert__details"),e}function i(e,t){const n=document.createElement("summary");return n.classList.add("alert__summary"),n.textContent=e+" "+t,n}function r(e){const t=document.createElement("div");t.classList.add("alert__element");const n=document.createElement("div");n.textContent="артикул";const a=document.createElement("div");a.textContent=e.item;const d=document.createElement("div");d.textContent="результат";const c=document.createElement("div");return c.textContent=e.message,t.appendChild(n),t.appendChild(a),t.appendChild(d),t.appendChild(c),t}},1499:(e,t,n)=>{function a(e,t){t.value=JSON.stringify(e)}n.d(t,{D:()=>a})},1836:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{i:()=>u,j:()=>p});var d=n(7728),c=n(8063),i=n(9546),r=n(8664),o=n(8007),s=n(6872),l=e([s,o]);function p(){const e=m("Загрузить csv файл");e.fileInput.name="csv_file",e.fileInput.accept=".csv",e.buttonSubmit.addEventListener("click",s.O)}async function u(){const e=m("Загрузить несколько фото"),t=await(0,o.h)({fieldName:{field:"goods",foreignClass:"Goods",null:!1}});t.style.marginTop="8px",e.form.querySelector(".modal__button-block").insertAdjacentElement("beforebegin",t),e.fileInput.name="files",e.fileInput.accept="image/png, image/jpeg, image/jpg",e.fileInput.multiple=!0,e.buttonSubmit.addEventListener("click",s.f)}function m(e){const t=document.querySelector(".service"),n=document.createElement("dialog");n.classList.add("catalogue__modal"),n.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,d.O)(n)}));const a=(0,c.h)(n,"",0);a.firstElementChild.textContent=e,n.appendChild(a);const o=document.createElement("form");o.id="catalogueDialog",o.classList.add("modal__form"),o.enctype="multipart/form-data";const s=document.createElement("div");s.classList.add("catalogue__input-frame");const l=document.createElement("input");l.classList.add("catalogue__modal_file-input"),l.type="file",s.appendChild(l),o.appendChild(s);const p=document.createElement("div");p.classList.add("error-message"),p.textContent="Error",o.appendChild(p),o.appendChild((0,i._)(n,0)),n.appendChild(o);const u=o.querySelector(".submit");return t.appendChild(n),l.addEventListener("change",(()=>{p.textContent="",p.style.display="none"})),n.showModal(),(0,r.Y)(n),{form:o,fileInput:l,buttonSubmit:u}}[s,o]=l.then?(await l)():l,a()}catch(_){a(_)}}))},2428:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{I:()=>h});var d=n(816),c=n(1211),i=n(8264),r=n(5597),o=n(1499),s=n(1369),l=n(3797),p=n(6352),u=n(9370),m=n(9410),_=e([d,s,m,l]);async function h(e,t){t.enctype="multipart/form-data",t.classList.add("catalogue","catalogue__row"),t.appendChild((0,r.t)("number","id",e.id));const n=(0,r.t)("checkbox","deleted",e.deleted);n.addEventListener("change",(e=>(0,u.W)(e))),t.appendChild(n);const a=document.createElement("textarea");a.value=e.name,a.name="name",a.classList.add("catalogue__input"),a.readOnly=!0,t.appendChild(a),t.appendChild((0,r.t)("text","item_article",e.item_article));const _=document.createElement("div");_.classList.add("catalogue__input","main_color_text"),_.textContent=e.main_color_text,t.appendChild(_),t.appendChild((0,r.t)("text","main_color__id",e.main_color__id)),t.appendChild((0,r.t)("number","goods_option__id",e.goods_option__id));const h=document.createElement("div");h.classList.add("catalogue__input","goods_option__name"),h.textContent=e.goods_option__name,t.appendChild(h);const y=document.createElement("img");y.classList.add("catalogue__img"),y.alt=e.item_article,y.loading="lazy",y.src="/static/viki_web_cms/files/item_photo/"+e.image,t.appendChild(y);const f=(0,r.t)("checkbox","simple_article",e.simple_article);0===e.id&&(f.checked=!0),f.addEventListener("change",(e=>(0,p.O)(e))),t.appendChild(f);const v=await(0,d.M)("Goods",e.goods__id,!1);t.appendChild(v);const C=v.querySelector("input[hidden]");C.name="goods__id",C.addEventListener("change",(e=>(0,p.O)(e)));const g=document.createElement("div");g.classList.add("catalogue__file");const E=document.createElement("div");E.textContent=e.image,E.classList.add("catalogue__file_text"),g.appendChild(E);const b=document.createElement("div");b.classList.add("catalogue__input-frame");const L=document.createElement("input");L.classList.add("catalogue__file_input"),L.type="file",L.name="image",L.accept="image/png, image/jpeg, image/jpg",L.addEventListener("change",(async e=>await(0,s.b)(e,E,C.value,f.checked?1:0,y))),b.appendChild(L),g.appendChild(b),t.appendChild(g);const w=document.createElement("div");w.classList.add("catalogue__btn-block");const S=(0,c.E)("");S.disabled=!0,S.classList.add("tooltip","btn__disabled"),S.innerHTML='<i class="catalogue__icon fa-solid fa-check"></i><span class="tooltip-text">сохранить</span>',S.addEventListener("click",(e=>(0,m.c)(e,S)));const k=(0,i.T)("");k.classList.add("tooltip","btn__disabled"),k.disabled=!0,k.innerHTML='<i class="catalogue__icon fa-solid fa-x"></i><span class="tooltip-text">отменить</span>',k.addEventListener("click",(e=>(0,l.N)(e))),w.appendChild(S),w.appendChild(k),t.appendChild(w);const x=(0,r.t)("text","colors","");x.hidden=!0,t.appendChild(x),e.colors&&(0,o.D)(e.colors,x)}[d,s,m,l]=_.then?(await _)():_,a()}catch(y){a(y)}}))},2472:(e,t,n)=>{function a(e){const t=document.createElement("img");return t.classList.add("modal__content_image"),t.src=e.url+e.fieldValue,t.alt=e.fieldName.field,t}n.d(t,{O:()=>a})},2788:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{x:()=>o});var d=n(2830),c=n(4708),i=n(8645),r=e([i,d]);async function o(e,t){const n=t.closest(".dictionary-frame__header").parentElement,a=n.querySelector(".dictionary-frame__input").value,r=(0,c.Z)(a),o=n.querySelector(".check-deleted");"Catalogue"===e?await(0,i.l)(n,o,t,r):await(0,d.n)(n,e,o,t,r)}[i,d]=r.then?(await r)():r,a()}catch(s){a(s)}}))},2814:(e,t,n)=>{function a(){const e=document.createElement("div");return e.classList.add("dictionary-content__square"),e}n.d(t,{N:()=>a})},2830:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{n:()=>i});var d=n(897),c=e([d]);async function i(e,t,n,a,c){let i=e.querySelector(".dictionary-content");const r=i.dataset.grid;i.remove();const o=a&&a.checked?1:0;i=await(0,d.Q)(t,r,n.checked?0:1,o,c),e.appendChild(i)}d=(c.then?(await c)():c)[0],a()}catch(r){a(r)}}))},2868:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{Q:()=>i});var d=n(1836),c=e([d]);async function i(e){"Catalogue"===e&&(0,d.j)()}d=(c.then?(await c)():c)[0],a()}catch(r){a(r)}}))},2907:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{I:()=>h});var d=n(4859),c=n(2868),i=n(7847),r=n(4087),o=n(6467),s=n(1211),l=n(9132),p=n(8264),u=n(5095),m=n(2788),_=e([c,m,r,l,u]);function h(e,t,n,a,_=!0){const h=document.createElement("div");h.classList.add("dictionary-frame__header");const y=document.createElement("div");y.classList.add("dictionary-frame__header_left"),y.textContent=t,h.appendChild(y);const f=document.createElement("div");if(f.classList.add("dictionary-frame__header_right"),n){const t=(0,d.C)("Загрузить CSV");t.addEventListener("click",(()=>(0,c.Q)(e))),f.appendChild(t)}if(a){const t=(0,i.G)(!1);t.id=e+"-new",t.addEventListener("change",(()=>(0,m.x)(e,t))),t.classList.add("check-new"),f.appendChild(t);const n=document.createElement("label");n.htmlFor=e+"-new",n.classList.add("dictionary-frame__label"),n.textContent="только новые",f.appendChild(n)}if(_){const t=(0,i.G)(!0);t.id=e+"-deleted",t.addEventListener("change",(()=>(0,r.m)(e,t))),t.classList.add("check-deleted"),f.appendChild(t);const n=document.createElement("label");n.htmlFor=e+"-deleted",n.classList.add("dictionary-frame__label"),n.textContent="скрыть удаленные",f.appendChild(n)}f.insertAdjacentHTML("beforeend",o.q);const v=document.createElement("input");v.classList.add("dictionary-frame__input"),v.type="text",v.placeholder="поиск...",v.addEventListener("keypress",(t=>{"Enter"===t.key&&(0,l.n)(t.target,e)})),f.appendChild(v);const C=(0,s.E)("Поиск");C.addEventListener("click",(t=>(0,l.n)(t.target,e)));const g=(0,p.T)("Очистить");return g.addEventListener("click",(t=>(0,u.k)(t.target,e))),f.appendChild(C),f.appendChild(g),h.appendChild(f),h.dataset.class=e,h.dataset.title=t,h}[c,m,r,l,u]=_.then?(await _)():_,a()}catch(y){a(y)}}))},2952:(e,t,n)=>{function a(e){const t=document.createElement("input");return t.type=e,t.classList.add("modal__content_"+e),t}n.d(t,{k:()=>a})},3126:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{y:()=>r});var d=n(1057),c=n(4708),i=e([d]);async function r(e){const t=e.target,n=t.dataset.lastId,a=t.closest(".content"),i=a.querySelector(".dictionary-frame__input").value,r=a.querySelector(".check-deleted"),o=a.querySelector(".check-new"),s=a.querySelector(".catalogue__content");await(0,d.D)(s,r.checked?1:0,o.checked?1:0,n,(0,c.Z)(i),0)}d=(i.then?(await i)():i)[0],a()}catch(o){a(o)}}))},3232:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{o:()=>u});var d=n(4449),c=n(9336),i=n(4859),r=n(483),o=n(449),s=n(8264),l=n(1211),p=e([r,d,c,o]);async function u(e){const t=document.querySelector(".dictionary-frame__header_left"),n=await(0,r.nA)();t.appendChild(n);const a=n.querySelector("input"),p=n.querySelector("input[hidden]"),u=(0,i.C)("Новый прайс");t.appendChild(u);const m=(0,s.T)("Выгрузить прайс");t.appendChild(m),p.addEventListener("change",await d.h),u.addEventListener("click",c.C);const _=document.querySelector(".dictionary-frame__header_right");_.firstElementChild.remove(),_.firstElementChild.remove();const h=document.createElement("label");h.htmlFor="priceType",h.textContent="тип цены";const y=(0,r.n6)([{id:1,value:"стандарт"},{id:2,value:"от объема"},{id:3,value:"нанесение"}]);y.id="priceType",y.addEventListener("change",await d.h),_.insertAdjacentElement("afterbegin",y),_.insertAdjacentElement("afterbegin",h);const f=document.createElement("div");f.classList.add("price-block");const v=y.querySelector("input[hidden]").value,C=await(0,o.p)(a.value,v,"None");f.appendChild(C.header),f.appendChild(C.form),_.querySelector(".dictionary-frame__input").remove(),_.querySelector(".btn__save").remove(),_.querySelector(".btn__cancel").remove();const g=document.createElement("input");g.classList.add("dictionary-frame__input"),g.type="text",g.placeholder="поиск...",g.addEventListener("keypress",(e=>{"Enter"===e.key&&e.target.value&&(0,d.h)()})),_.appendChild(g);const E=(0,l.E)("Поиск");E.addEventListener("click",d.h),_.appendChild(E);const b=(0,s.T)("Очистить");return b.addEventListener("click",(e=>{g.value="",(0,d.h)()})),_.appendChild(b),f}[r,d,c,o]=p.then?(await p)():p,a()}catch(m){a(m)}}))},3682:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{V:()=>l});var d=n(6744),c=n(7245),i=n(897),r=n(6332),o=n(6825),s=e([c,o,i]);async function l(e,t,n,a,s,l){if(e.classList.toggle("text-active"),document.getElementById(t))document.getElementById(t).classList.toggle("invisible");else{const d=document.querySelector(".content__right"),s=await(0,c.K)(t,e.textContent,n,a),l=await(0,o.G)(t),p=(0,r.I)(l),u=await(0,i.Q)(t,p,0,0,"None");s.appendChild(u),d.appendChild(s)}(0,d.P)(s,l)}[c,o,i]=s.then?(await s)():s,a()}catch(p){a(p)}}))},3757:(e,t,n)=>{n.d(t,{D:()=>d});var a=n(8316);function d(e){return fetch(e,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":(0,a.m)()}}).then((e=>e.json()))}},3797:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{N:()=>o});var d=n(7310),c=n(3757),i=n(2428),r=e([d,i]);async function o(e){const t=e.target.closest("form"),n=t.querySelector('input[name="id"]').value;if("0"===n){t.remove();const e=document.querySelector(".catalogue__title").querySelector(".btn__save");e.disabled=!1,e.classList.remove("btn__disabled")}else{t.innerHTML="";const e=d.e+"catalogue_record/"+n,a=await(0,c.D)(e);await(0,i.I)(a.values[0],t)}}[d,i]=r.then?(await r)():r,a()}catch(s){a(s)}}))},3913:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{N:()=>o});var d=n(7310),c=n(4449),i=n(8316),r=e([d,c]);async function o(e){const t=document.querySelector(".content"),n=t.querySelector(".dictionary-frame__header_left").querySelector("input[hidden]").value,a=(t.querySelector(".dictionary-frame__header_right").querySelector("input[hidden]").value,document.querySelectorAll("input.price-row__item:not(.price-row__item_disabled)")),r=Array.from(a),o={goods:[],item:[]};let s;r.forEach((e=>{s={},Object.entries(e.dataset).forEach((([e,t])=>{Number.parseInt(t)?s[e]=Number.parseInt(t):s[e]=t})),s.Price__price_list__id=Number.parseInt(n),s.price=Number.parseFloat(e.value),delete s.discount,o[e.dataset.class].push(s),delete s.class}));const l=d.e+"price_list_save";fetch(l,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,i.m)()},body:JSON.stringify(o)}).then((e=>e.json())).then((e=>{e.error||(0,c.h)()}))}[d,c]=r.then?(await r)():r,a()}catch(s){a(s)}}))},4085:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{H:()=>g});var d=n(1316),c=n(9227),i=n(7164),r=n(8007),o=n(2472),s=n(6825),l=n(7310),p=n(3757),u=n(6977),m=n(905),_=n(7541),h=n(304),y=n(7475),f=n(4821),v=e([r,s,l]);[r,s,l]=v.then?(await v)():v;const C={string:d.K,boolean:c.r,number:i.y,float:_.P,precise:h.I,foreign:r.h,image:o.O,file:u.B,date:y.d,textarea:f.n};async function g(e,t,n){const a=document.createElement("div");a.classList.add("modal__content");const d=await(0,s.G)(t);let c;const i=l.e+"record_info/"+t+"/"+n,r=await(0,p.D)(i);for(const e of d){let t={fieldName:e,fieldValue:null,url:r.url};"0"!==n&&("foreign"!==e.type?e.property_off?t.fieldValue=r.record[e.property_off]:t.fieldValue=r.record[e.field]:t.fieldValue=r.record[e.field+"_id"]),a.appendChild((0,m.d)(e)),c=await C[e.type](t),a.appendChild(c)}return a}a()}catch(E){a(E)}}))},4087:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{m:()=>o});var d=n(2830),c=n(4708),i=n(8645),r=e([i,d]);async function o(e,t){const n=t.closest(".dictionary-frame__header").parentElement,a=n.querySelector(".dictionary-frame__input").value,r=n.querySelector(".check-new"),o=(0,c.Z)(a);"Catalogue"===e?await(0,i.l)(n,t,r,o):await(0,d.n)(n,e,t,r,o)}[i,d]=r.then?(await r)():r,a()}catch(s){a(s)}}))},4114:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{f:()=>i});var d=n(897),c=e([d]);async function i(e){const t="14px 1.5fr 4fr 1fr 1fr 1fr 3fr 3fr 3fr 2fr 2fr 1fr 1fr 1fr 1fr 1fr 1.5fr",n=await(0,d.Q)(e,t,0,0,"None");return n.id=e,n.dataset.grid=t,n}d=(c.then?(await c)():c)[0],a()}catch(r){a(r)}}))},4189:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{N:()=>m,R:()=>_});var d=n(7310),c=n(3757),i=n(483),r=n(1211),o=n(4859),s=n(8264),l=n(3913),p=n(8316),u=e([d,l,i]);async function m(e,t){const n=document.createElement("div");n.classList.add("price-content");const a=d.e+"standard_price_data/"+e+"/"+t,i=await(0,c.D)(a),r="0.8fr 3.2fr repeat("+i.price_type_length+", 1fr) 160px 120px",o=await(0,c.D)(d.e+"all_items_all_items_for_dropdown"),s=await _(i.header,r);return await h(i.form,n,i.header,o,r),{form:n,header:s}}async function _(e,t){const n=document.createElement("header");n.classList.add("price-header"),n.style.gridTemplateColumns=t;const a=document.createElement("div");a.classList.add("price-header__item"),a.textContent="Артикул",n.appendChild(a);const d=document.createElement("div");let c;d.classList.add("price-header__item"),d.textContent="Товар",n.appendChild(d),e.forEach((e=>{c=document.createElement("div"),c.textContent=e.price_name__name,c.classList.add("price-header__item"),n.appendChild(c)}));const i=(0,o.C)("Загрузить csv");n.appendChild(i);const s=(0,r.E)("Сохранить");return n.appendChild(s),s.addEventListener("click",await l.N),n}function h(e,t,n,a,d){let c,i,r;e.goods.forEach((o=>{c=y(o,n,a,d),t.appendChild(c),r=e.items.filter((e=>o.id===e.goods__id&&"[]"!==e.price)),r.forEach((e=>{i=f(e,n,d),t.appendChild(i)}))}))}function y(e,t,n,a){const d=v(e,t,"goods","goods",a),c=n.filter((t=>t.goods__id===e.id));d.appendChild((0,i.n6)(c));const r=(0,s.T)("Добавить цвет");return r.addEventListener("click",(()=>{const e=d.querySelector(".price-dropdown").querySelector("input[hidden]").value,n=d.querySelector(".price-dropdown__input").value,[a,...c]=n.split(" ");if(!Array.from(document.querySelectorAll('div[data-type="item"] input[hidden]')).find((t=>t.value===e))){const n={id:e,article:a,name:c.join(" "),price:"[]"};d.insertAdjacentElement("afterend",f(n,t))}})),d.appendChild(r),d}function f(e,t,n){const a=v(e,t,"item","catalogue_item",n);a.classList.add("price-row__item-row"),a.style.gridTemplateColumns=n;const c=(0,s.T)("Убрать позицию");return c.addEventListener("click",(async e=>{e.preventDefault();const t=a.querySelector('input[name="id"]').value;fetch(d.e+"delete_item_price_row/"+t,{headers:{"X-CSRFToken":(0,p.m)()}}).then((e=>e.json())).then((e=>{e&&a.remove()}))})),a.appendChild(c),a}function v(e,t,n,a,d){const c=document.createElement("div");c.dataset.type=n,c.classList.add("price-row"),c.style.gridTemplateColumns=d;const i=document.createElement("input");i.type="text",i.hidden=!0,i.name="id",i.value=e.id,c.appendChild(i);const r=document.createElement("div");r.classList.add("price-row__name"),r.textContent=e.article,c.appendChild(r);const o=document.createElement("div");let s;return o.classList.add("price-row__name"),o.textContent=e.name,c.appendChild(o),t.forEach((t=>{s=document.createElement("input"),s.classList.add("price-row__item","price-row__item_disabled"),s.type="number",s.step="0.01",s.lang="en";const d=JSON.parse(e.price).find((e=>"price_type__id"in e&&e.price_type__id===t.price_name__id));s.dataset.class=n,s.dataset.id=d?d.id:"",s.setAttribute("data-"+a+"__"+n+"__id",e.id),s.dataset.standard_price_type__price_type__id=t.price_name__id,s.dataset.discount=t.discount,s.value=d?d.price:"",s.readOnly=!0,s.addEventListener("dblclick",(e=>{const t=document.querySelector(".dictionary-frame__header_right"),n=t.querySelector(".dictionary-frame__input"),a=t.querySelector(".btn__save");e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled"),n.disabled=!0,a.disabled=!0,a.classList.add("btn__disabled")})),s.addEventListener("change",(e=>{e.target.readOnly=!0})),"1"===s.dataset.discount&&s.addEventListener("change",(e=>{c.querySelectorAll('input[type="number"]').forEach((t=>{"1"!==t.dataset.discount&&(t.value=(Math.ceil(e.target.value*Number.parseFloat(t.dataset.discount)*100)/100).toFixed(2),t.dispatchEvent(new Event("dblclick",{bubbles:!0})),e.target.classList.remove("price-row__item_disabled"))}))})),c.appendChild(s)})),c}[d,l,i]=u.then?(await u)():u,a()}catch(C){a(C)}}))},4256:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{g:()=>p});var d=n(1211),c=n(7979),i=n(1057),r=n(2428),o=n(4859),s=n(1836),l=e([s,r,i]);async function p(e){const t=document.querySelector(".dictionary-frame__header_right"),n=(0,o.C)("Загрузить несколько фото");n.addEventListener("click",await s.i),t.insertAdjacentElement("afterbegin",n);const a=document.createElement("div"),l=document.createElement("div");let p;l.classList.add("catalogue","catalogue__title"),c.t.forEach((e=>{p=document.createElement("p"),p.classList.add("catalogue__title-item"),p.textContent=e.label,l.appendChild(p)}));const u=(0,d.E)("Новый");u.addEventListener("click",(async e=>{e.target.disabled=!0,e.target.classList.add("btn__disabled");const t=document.createElement("form");await(0,r.I)({id:0},t);const n=t.querySelector(".btn__cancel");n.disabled=!1,n.classList.remove("btn__disabled"),m.insertAdjacentElement("afterbegin",t),t.scrollIntoView({behavior:"smooth"}),t.focus()})),l.appendChild(u),a.appendChild(l);const m=document.createElement("div");return m.classList.add("catalogue__content"),await(0,i.D)(m,0,0,0,"None",0),a.appendChild(m),a}[s,r,i]=l.then?(await l)():l,a()}catch(u){a(u)}}))},4449:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{h:()=>i});var d=n(449),c=e([d]);async function i(e){const t=document.querySelector(".content"),n=t.querySelector(".dictionary-frame__header_right"),a=n.querySelector(".dictionary-frame__input"),c=n.querySelector(".btn__save");a.disabled=!1,c.disabled=!1,c.classList.remove("btn__disabled");const i=t.querySelector(".price-block"),r=t.querySelector(".dictionary-frame__header_left").querySelector(".price-dropdown__input").value,o=a.value,s=t.querySelector(".dictionary-frame__header_right").querySelector("input[hidden]").value;i&&(i.innerHTML="");const l=await(0,d.p)(r,s,o);i.appendChild(l.header),i.appendChild(l.form)}d=(c.then?(await c)():c)[0],a()}catch(r){a(r)}}))},4708:(e,t,n)=>{function a(e){let t=e;return function(e){return/^[a-zA-Zа-яА-ЯёЁ0-9 ._#]*$/.test(e)}(e)&&e||(t="None"),t.replace(/ /g,"|")}n.d(t,{Z:()=>a})},4821:(e,t,n)=>{function a(e){const t=document.createElement("textarea");return t.classList.add("modal__content_textarea"),t.value=e.fieldValue,t.name=e.fieldName.field,t}n.d(t,{n:()=>a})},4859:(e,t,n)=>{function a(e){const t=document.createElement("button");return t.classList.add("btn","btn__neutral"),t.textContent=e,t}n.d(t,{C:()=>a})},5095:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{k:()=>r});var d=n(2830),c=n(8645),i=e([c,d]);async function r(e,t){const n=e.closest(".dictionary-frame__header").parentElement;n.querySelector(".dictionary-frame__input").value="";const a=n.querySelector(".check-deleted"),i=n.querySelector(".check-new");"Catalogue"===t?await(0,c.l)(n,a,i,"None"):await(0,d.n)(n,t,a,i,"None")}[c,d]=i.then?(await i)():i,a()}catch(o){a(o)}}))},5352:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>s});var d=n(6723),c=n(6332),i=n(6825),r=n(7502),o=e([i,d,r]);async function s(e,t,n,a,o,s){const l=await(0,i.G)(t),p="Goods"!==t?(0,c.I)(l):"14px 1.5fr 4fr 1fr 1fr 1fr 3fr 3fr 3fr 2fr 2fr 1fr 1fr 1fr 1fr 1fr 1.5fr",u=e.closest(".dictionary-content__rows");[...(await(0,d.Y)(t,n,a,s,o,p)).children].forEach((e=>{u.appendChild(e)}));const m=e.cloneNode(!0);e.parentNode.replaceChild(m,e),m.querySelector("button").addEventListener("click",(e=>(0,r.w)(e)))}[i,d,r]=o.then?(await o)():o,a()}catch(l){a(l)}}))},5364:(e,t,n)=>{async function a(e){return document.createElement("div")}n.d(t,{U:()=>a})},5597:(e,t,n)=>{function a(e,t,n){const a=document.createElement("input");return"precise"===e?(a.type="number",a.step="0.0001"):"float"===e?(a.type="number",a.step="0.01"):a.type=e,a.name=t,"id"===t.slice(-2)&&(a.hidden=!0),"checkbox"===e?(a.checked=n,a.classList.add("check","catalogue__check")):(a.value=n,a.readOnly=!0,a.classList.add("catalogue__input")),a}n.d(t,{t:()=>a})},5800:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{s:()=>o});var d=n(7310),c=n(3757),i=n(4189),r=e([d,i]);async function o(e,t){const n=document.createElement("div");n.classList.add("price-content");const a=d.e+"volume_price_data/"+e+"/"+t,r=await(0,c.D)(a),o="0.8fr 3.2fr repeat("+r.price_type_length+", 1fr) 120px 102px",l=await(0,i.R)(r.header,o);return s(r.form,n,r.header,r.form.volumes,o),{form:n,header:l}}function s(e,t,n,a,d){a.forEach((a=>{const c=document.createElement("div");c.classList.add("price-content__volume-header"),c.textContent="Количество "+a.name+" шт",t.appendChild(c);const i=document.createElement("div");i.appendChild(l(e,n,a,d)),t.appendChild(i)}))}function l(e,t,n,a){const d=document.createElement("div");return e.goods.forEach((e=>{d.appendChild(p(e,t,n,a))})),d}function p(e,t,n,a){const d=document.createElement("div");d.classList.add("price-row"),d.style.gridTemplateColumns=a;const c=document.createElement("input");c.type="text",c.hidden=!0,c.name="id",c.value=e.id,d.appendChild(c);const i=document.createElement("div");i.classList.add("price-row__name"),i.textContent=e.article,d.appendChild(i);const r=document.createElement("div");let o;return r.classList.add("price-row__name"),r.textContent=e.name,d.appendChild(r),t.forEach((t=>{o=document.createElement("input"),o.classList.add("price-row__item","price-row__item_disabled"),o.type="number",o.step="0.01",o.lang="en";const a=JSON.parse(e.price).find((e=>"price_type__id"in e&&e.price_type__id===t.price_name__id&&e.price_volume__id===n.id));o.dataset.class="goods",o.dataset.id=a?a.id:"",o.setAttribute("data-goods__goods__id",e.id),o.dataset.standard_price_type__price_type__id=t.price_name__id,o.dataset.price_goods_quantity__price_volume__id=n.id,o.value=a?a.price:"",o.readOnly=!0,o.addEventListener("dblclick",(e=>{const t=document.querySelector(".dictionary-frame__header_right"),n=t.querySelector(".dictionary-frame__input"),a=t.querySelector(".btn__save");e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled"),n.disabled=!0,a.disabled=!0,a.classList.add("btn__disabled")})),o.addEventListener("change",(e=>{e.target.readOnly=!0})),d.appendChild(o)})),d}[d,i]=r.then?(await r)():r,a()}catch(u){a(u)}}))},6332:(e,t,n)=>{function a(e){let t="14px 6fr ";return e.forEach((e=>{"name"!==e.field&&("boolean"===e.type||"number"===e.type||"float"===e.type||"precise"===e.type?t+="1fr ":"textarea"===e.type?t+="6fr ":t+="3fr ")})),t+="80px",t}n.d(t,{I:()=>a})},6352:(e,t,n)=>{function a(e){const t=e.target.closest("form").querySelector('input[type="file"]');t.value="",t.dispatchEvent(new Event("change",{bubbles:!0}))}n.d(t,{O:()=>a})},6467:(e,t,n)=>{n.d(t,{q:()=>a});const a='<i class="fa fa-solid fa-magnifying-glass"></i>'},6686:(e,t,n)=>{n.d(t,{a:()=>_});var a=n(8664),d=n(7728),c=n(3757),i=n(1211),r=n(8264),o=n(8316),s=n(2952);function l(e,t){let n;n=p(t.last_name),e.appendChild(n),n=p(t.first_name),e.appendChild(n),n=p(t.email),e.appendChild(n),n=p(t.phone),e.appendChild(n),n=p(t.alias),n.classList.add("alias"),e.appendChild(n),e.appendChild(function(e){const t=document.createElement("input");return t.type="checkbox",t.classList.add("check","user-element__check"),t.checked=e||!1,t.disabled=!0,t}(t.new)),n=p(t.customer),n.classList.add("customer"),e.appendChild(n);const l=(0,i.E)("Изм");l.dataset.id=t.id,l.addEventListener("click",(async t=>{await async function(e,t){const n=e.target.dataset.id;try{const e=await(0,c.D)(`/cms/json/user_extension_item/${n}`);if(!e)return void console.error("Failed to fetch user data");!function(e,t){const n=document.createElement("dialog");n.classList.add("modal");const c=document.createElement("div");c.classList.add("modal__header"),c.textContent="Редактирование пользователя",n.appendChild(c);const l=document.createElement("form");l.classList.add("modal__form"),n.appendChild(l);const p=document.createElement("div");p.classList.add("modal__content"),l.appendChild(p);const u=document.createElement("label");u.textContent="eMail-alias",u.classList.add("modal-content__label"),u.htmlFor="alias",p.appendChild(u);const m=(0,s.k)("text");m.value=e.alias,m.name="alias",m.id="alias",p.appendChild(m);const _=document.createElement("label");_.textContent="Новый:",_.classList.add("modal-content__label"),_.htmlFor="user-new-status",p.appendChild(_);const h=document.createElement("input");h.type="checkbox",h.classList.add("modal__content_checkbox"),h.checked=e.new||!1,h.id="user-new-status",h.name="new",p.appendChild(h);const y=document.createElement("label");y.textContent="Клиент:",y.classList.add("modal-content__label"),y.htmlFor="customer",p.appendChild(y);const f=document.createElement("div");f.classList.add("dropdown"),function(e,t,n){const a=document.createElement("input");a.type="text",a.classList.add("modal__content_text","dropdown__input");const d=document.createElement("input");d.type="text",d.name="customer",d.hidden=!0;const c=n.find((e=>e.id.toString()===t.toString()));c&&(a.value=c.value,d.value=c.id),e.appendChild(a),e.appendChild(d),e.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const i=document.createElement("ul");i.classList.add("dropdown__list","invisible"),n.forEach((e=>{const t=document.createElement("li");t.classList.add("dropdown__list_item"),t.value=e.id,t.textContent=e.value,t.addEventListener("click",(e=>{a.value=e.target.textContent,d.value=e.target.value,d.dispatchEvent(new Event("change",{bubbles:!0})),i.classList.add("invisible")})),i.appendChild(t)})),e.appendChild(i),a.addEventListener("click",(()=>{i.classList.toggle("invisible")})),a.addEventListener("keyup",(e=>{const t=e.target.value.toUpperCase(),c=n.filter((e=>e.value.toUpperCase().indexOf(t)>-1));i.innerHTML="",c.forEach((e=>{const t=document.createElement("li");t.classList.add("dropdown__list_item"),t.value=e.id,t.textContent=e.value,t.addEventListener("click",(e=>{a.value=e.target.textContent,d.value=e.target.value,d.dispatchEvent(new Event("change",{bubbles:!0})),i.classList.add("invisible")})),i.appendChild(t)}))}))}(f,e.customer_id,e.customers),p.appendChild(f);const v=document.createElement("div");v.classList.add("modal__button-block");const C=(0,r.T)("Отменить");C.addEventListener("click",(()=>{(0,d.O)(n)})),v.appendChild(C);const g=(0,i.E)("Сохранить");g.addEventListener("click",(async n=>{n.preventDefault(),await async function(e,t,n,a,c,i){const r=e.closest("dialog");try{const s=new FormData(e);if(n===Number.parseInt(s.get("customer"))&&a===("on"===s.get("new"))&&c===s.get("alias"))return void(0,d.O)(r);const l=await fetch(`/cms/json/update_user_extension/${t}`,{method:"POST",body:s,headers:{"X-CSRFToken":(0,o.m)()}});if(l.ok){const e=await l.json();e.success?(i.querySelector('input[type="checkbox"]').checked=e.new,i.querySelector(".alias").textContent=e.alias,i.querySelector(".customer").textContent=e.customer,(0,d.O)(r)):console.error("Failed to update user:",e.error)}else console.error("Failed to update user, server returned:",l.status)}catch(e){console.error("Error saving user data:",e)}}(l,e.id,e.customer_id,e.new,e.alias,t)})),v.appendChild(g),l.appendChild(v),document.body.appendChild(n),(0,a.Y)(n),n.showModal()}(e,t)}catch(e){console.error("Error editing user:",e)}}(t,e)})),e.appendChild(l)}function p(e){const t=document.createElement("div");return t.classList.add("dictionary-content__row_item","user-element__cell"),t.textContent=e||"",t}var u=n(35),m=n(8058);async function _(e){const t="user-element__header";(0,u.a)(l,t,"/cms/json/user_extension");const n=await(0,m.J)("dictionary-content",[{title:"Фамилия"},{title:"Имя"},{title:"Email"},{title:"Телефон"},{title:"Email-алиас"},{title:"Новый"},{title:"Клиент"},{title:""}],t,l,"/cms/json/user_extension");return n.id=e,n}},6723:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{R:()=>u,Y:()=>p});var d=n(3757),c=n(7310),i=n(2814),r=n(5352),o=n(8264),s=n(7502),l=e([c,r,s]);async function p(e,t,n,a,i,o){const s=document.createElement("div");s.classList.add("dictionary-content__rows");const l=c.e+"field_values/"+e+"/"+t+"/"+n+"/"+a+"/"+i,p=await(0,d.D)(l);let m=0;return p.values.forEach((d=>{let c=document.createElement("div");u(c,d,p.field_params,e),c.style.gridTemplateColumns=o,s.appendChild(c),m++,20===m&&(c.dataset.lastRecord=a+20,c.addEventListener("mouseover",(d=>(0,r.Z)(d.target,e,t,n,i,a+20))))})),s}function u(e,t,n,a){e.classList.add("dictionary-content__row");const d=(0,i.N)();t.hex&&(d.style.backgroundColor=t.hex),e.appendChild(d),e.id=a+"_row_"+t.id,Object.keys(t).forEach(((a,d)=>{if("id"!==a){let d;Object.keys(n).includes(a)&&"image"===n[a].type?(d=document.createElement("img"),d.classList.add("dictionary-content__row_img"),d.src=n[a].url+t[a],d.alt=t[a]):Object.keys(n).includes(a)&&"boolean"===n[a].type?(d=document.createElement("input"),d.type="checkbox",d.checked=t[a],d.disabled=!0,d.classList.add("dictionary-content__check")):(d=document.createElement("div"),d.classList.add("dictionary-content__row_item"),d.textContent=t[a]),e.appendChild(d)}}));const c=(0,o.T)("Изм.");c.dataset.itemId=t.id,c.addEventListener("click",(e=>(0,s.w)(e))),e.appendChild(c)}[c,r,s]=l.then?(await l)():l,a()}catch(m){a(m)}}))},6744:(e,t,n)=>{function a(e,t){const n=e.querySelector("summary");Array.from(t).some((e=>e.classList.contains("text-active")))?n.classList.add("text-active"):n.classList.remove("text-active")}n.d(t,{P:()=>a})},6825:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{G:()=>r});var d=n(7310),c=n(3757),i=e([d]);async function r(e){const t=d.e+"field_names/"+e;return await(0,c.D)(t)}d=(i.then?(await i)():i)[0],a()}catch(o){a(o)}}))},6872:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{O:()=>u,f:()=>m});var d=n(4708),c=n(7310),i=n(7728),r=n(8645),o=n(1401),s=n(8664),l=n(8316),p=e([c,r]);async function u(e){e.preventDefault();const t=e.target.closest("form"),n=new FormData(t),a=Object.fromEntries(n.entries()).csv_file.name,d=t.querySelector(".error-message");a.endsWith(".csv")?await _(e,t,n,"catalogue_csv_load",d):(t.querySelector("input").value="",d.style.display="block",d.textContent="Неправильный формат файла")}async function m(e){e.preventDefault();const t=e.target.closest("form"),n=new FormData(t),a=t.querySelector(".error-message");await _(e,t,n,"catalogue_files_load",a)}async function _(e,t,n,a,p){const u=document.querySelector(".content"),m=u.querySelector(".dictionary-frame__input"),_=(0,d.Z)(m.value),h=u.querySelector(".check-deleted"),y=u.querySelector(".check-new"),f=e.target.closest("dialog"),v=c.e+a;await fetch(v,{method:"POST",headers:{"X-CSRFToken":(0,l.m)()},body:n}).then((e=>e.json())).then((e=>{if(e.error)t.querySelector("input").value="",p.style.display="block",p.textContent=e.error;else{(0,i.O)(f),(0,r.l)(u,h,y,_);const t=(0,o.J)(e);document.querySelector(".service").appendChild(t),t.showModal(),(0,s.Y)(t)}}))}[c,r]=p.then?(await p)():p,a()}catch(h){a(h)}}))},6977:(e,t,n)=>{n.d(t,{B:()=>d});var a=n(2952);function d(e){const t=document.createElement("div");t.classList.add("modal__content_file-frame");const n=(0,a.k)("file");return n.placeholder=e.fieldValue,n.name=e.fieldName.field,t.appendChild(n),t}},7090:(e,t,n)=>{function a(){const e=document.getElementById("userData"),t=JSON.parse(localStorage.getItem("userData"));return e.textContent=t.username,"Авторизуйтесь"!==t.username}n.d(t,{g:()=>a})},7164:(e,t,n)=>{n.d(t,{y:()=>d});var a=n(2952);function d(e){const t=(0,a.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},7245:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{K:()=>i});var d=n(2907),c=e([d]);async function i(e,t,n,a){const c=document.createElement("section");c.classList.add("dictionary-frame"),c.id=e;const i=(0,d.I)(e,t,n,a);return c.appendChild(i),c}d=(c.then?(await c)():c)[0],a()}catch(r){a(r)}}))},7310:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{G:()=>f,e:()=>y});var d=n(8846),c=n(9857),i=n(4114),r=n(4256),o=n(3232),s=n(3757),l=n(7090),p=n(8016),u=n(6686),m=n(276),_=n(5364),h=e([i,r,o,d,c]);[i,r,o,d,c]=h.then?(await h)():h;const y="./json/",f={Goods:i.f,Catalogue:r.g,PriceList:o.o,UserExtension:u.a,Order:m.r,CustomerGroup:_.U},v=y+"userdata",C=await(0,s.D)(v);localStorage.setItem("userData",JSON.stringify(C)),(0,l.g)()||document.querySelector(".menu__right").addEventListener("click",p.i);const g=document.querySelectorAll(".menu__item"),E=document.querySelector(".content");g.forEach((e=>{e.addEventListener("click",(async t=>{e.classList.contains("menu__item_bold")||(e.classList.add("menu__item_bold"),E.innerHTML="","Standard"===t.target.dataset.page?(0,d.f)(E,e.dataset.content):await(0,c.H)(E,e.dataset.content,t.target.dataset.page)),g.forEach((t=>{t!==e&&t.classList.remove("menu__item_bold")}))}))})),a()}catch(e){a(e)}}),1)},7475:(e,t,n)=>{n.d(t,{d:()=>d});var a=n(2952);function d(e){const t=(0,a.k)("date");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},7502:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{w:()=>r});var d=n(7646),c=n(8664),i=e([d]);async function r(e){e.preventDefault();const t=e.target.closest(".dictionary-content").parentElement.querySelector(".dictionary-frame__header"),n=t.dataset.class,a=t.dataset.title,i=await(0,d.w)(n,a,e.target.dataset.itemId);document.querySelector(".service").appendChild(i),i.showModal(),(0,c.Y)(i),console.log()}d=(i.then?(await i)():i)[0],a()}catch(o){a(o)}}))},7541:(e,t,n)=>{n.d(t,{P:()=>d});var a=n(2952);function d(e){const t=(0,a.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t.step="0.01",t}},7646:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{w:()=>u});var d=n(8063),c=n(9546),i=n(4085),r=n(7310),o=n(7728),s=n(6723),l=n(8316),p=e([i,r,s]);async function u(e,t,n){const a=document.createElement("dialog");a.classList.add("modal"),a.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,o.O)(a)}));const r=(0,d.h)(a,t,n);a.appendChild(r);const s=document.createElement("form");s.id=e+"__form",s.classList.add("modal__form"),s.enctype="multipart/form-data";const l=await(0,i.H)(a,e,n);s.appendChild(l),s.appendChild((0,c._)(a,n)),a.appendChild(s);const p=new FormData(s);return s.querySelector(".submit").addEventListener("click",(t=>m(t,s,e,p))),a}async function m(e,t,n,a){e.preventDefault();const d=e.target.dataset.id,c=t.closest(".modal");c.querySelectorAll("input").forEach((e=>{e.classList.remove("border-alert")})),e.target.disabled=!0;const i=new FormData(t),p=c.querySelector('input[type="file"]');if(!_(i,a)||p){const t=r.e+"edit_dictionary/"+n+"/"+d;await fetch(t,{method:"POST",headers:{"X-CSRFToken":(0,l.m)()},body:i}).then((e=>e.json())).then((t=>{const a=t.errors;if(a){let t;a.forEach((n=>{e.target.disabled=!1,t=c.querySelector(`[name = "${n}"]`),t.hidden?t.previousElementSibling.classList.add("border-alert"):t.classList.add("border-alert"),e.target.scrollIntoView({behavior:"smooth",block:"center"})}))}else{let e;if("0"!==d)e=document.querySelector("#"+n+"_row_"+d),e.innerHTML="";else{let a;e=document.createElement("div"),e.id=n+"_row_"+t.values.id,e.classList.add("dictionary-content__row"),a=document.getElementById(n)?document.getElementById(n).querySelector(".dictionary-content__rows"):document.querySelector(".dictionary-content__rows"),a.insertAdjacentElement("afterbegin",e),e.style.gridTemplateColumns=a.closest(".dictionary-content").dataset.grid}(0,s.R)(e,t.values,t.params,n),e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus(),(0,o.O)(c)}}))}}function _(e,t){const n=Array.from(t.values()),a=Array.from(e.values());return n.sort(),a.sort(),JSON.stringify(n)===JSON.stringify(a)}[i,r,s]=p.then?(await p)():p,a()}catch(h){a(h)}}))},7674:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{c:()=>o});var d=n(7310),c=n(4449),i=n(8316),r=e([d,c]);async function o(e){const t=document.querySelector(".content").querySelector(".dictionary-frame__header_left").querySelector("input[hidden]").value,n=document.querySelectorAll("input.type-table__input:not(.price-row__item_disabled)"),a=[];let r;[...n].forEach((e=>{r={},Object.entries(e.dataset).forEach((([e,t])=>{Number.parseInt(t)?r[e]=Number.parseInt(t):r[e]=t})),r.price_list__id=Number.parseInt(t),r.price=Number.parseFloat(e.value),a.push(r)}));const o=d.e+"printing_price_list_save";fetch(o,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,i.m)()},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{e.error||(0,c.h)()}))}[d,c]=r.then?(await r)():r,a()}catch(s){a(s)}}))},7728:(e,t,n)=>{function a(e){e.close(),e.remove()}n.d(t,{O:()=>a})},7847:(e,t,n)=>{function a(e){const t=document.createElement("input");return t.type="checkbox",t.checked=e,t.classList.add("check"),t}n.d(t,{G:()=>a})},7979:(e,t,n)=>{n.d(t,{t:()=>a});const a=[{field:"deleted",type:"boolean",label:"уд."},{field:"name",type:"string",label:"название",null:!1},{field:"item_article",type:"string",label:"артикул",null:!1},{field:"main_color",type:"foreign",label:"осн. цвет",foreignClass:"Color",null:!1},{field:"goods_option",type:"foreign",label:"опция",foreignClass:"GoodsOption",null:!1},{field:"image",type:"img",label:"фото",url:"/static/viki_web_cms/files/item_photo/",null:!0},{field:"simple_article",type:"boolean",label:"ст. арт."},{field:"goods",type:"foreign",label:"номенклатура",foreignClass:"Goods",null:!1},{field:"image_file",type:"file",label:"файл",null:!0}]},8007:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{h:()=>i});var d=n(816),c=e([d]);async function i(e){const t=e.fieldName.foreignClass,n=e.fieldValue,a=await(0,d.M)(t,n,e.fieldName.null);return a.querySelector("[hidden]").name=e.fieldName.field+"_id",a}d=(c.then?(await c)():c)[0],a()}catch(r){a(r)}}))},8016:(e,t,n)=>{n.d(t,{i:()=>l});var a=n(8063),d=n(8664),c=n(8264),i=n(1211),r=n(7728),o=n(7090),s=n(8316);async function l(){const e=document.createElement("dialog");e.classList.add("login-cms");const t=(0,a.h)(e,"Вход",0);t.firstElementChild.textContent="Вход",e.appendChild(t);const n=document.createElement("input");n.type="text",n.classList.add("login-cms__input"),e.appendChild(n);const p=document.createElement("input");p.type="password",p.classList.add("login-cms__input"),e.appendChild(p),document.querySelector(".service").appendChild(e);const u=document.createElement("div");u.classList.add("login-cms__btn-block");const m=(0,c.T)("Закрыть");m.addEventListener("click",(t=>{(0,r.O)(e)})),u.appendChild(m);const _=(0,i.E)("Войти");_.addEventListener("click",(t=>{!async function(e,t,n,a){e.preventDefault(),await fetch("./user_login",{method:"POST",headers:{"X-CSRFToken":(0,s.m)()},body:JSON.stringify({username:t,password:n})}).then((e=>e.json())).then((e=>{localStorage.setItem("userData",JSON.stringify(e));const t=(0,o.g)(),n=document.querySelector(".menu__right");t?n.removeEventListener("click",l):n.addEventListener("click",l),(0,r.O)(a)}))}(t,n.value,p.value,e)})),u.appendChild(_),e.appendChild(u),e.showModal(),(0,d.Y)(e),document.querySelector(".menu-right")}},8058:(e,t,n)=>{n.d(t,{J:()=>d});var a=n(9712);async function d(e,t,n,d,c){const i=document.createElement("div");i.classList.add(e);const r=function(e,t){const n=document.createElement("div");return n.classList.add("dictionary-content__title",t),e.forEach((e=>{const t=document.createElement("div");t.classList.add("dictionary-content__title_item","user-element__header-item"),t.textContent=e.title,n.appendChild(t)})),n}(t,n);i.appendChild(r);const o=document.createElement("div");return o.classList.add("dictionary-content__rows"),await(0,a.O)(o,0,"",!1,d,n,c),i.appendChild(o),i}},8063:(e,t,n)=>{n.d(t,{h:()=>d});var a=n(7728);function d(e,t,n){const d=document.createElement("div");d.classList.add("modal__header");let c=t;c="0"===n?"Создать "+c:"Изменить "+c;const i=document.createElement("div");i.textContent=c,d.appendChild(i);const r=document.createElement("button");return r.classList.add("modal__header_btn"),r.textContent="×",r.addEventListener("click",(t=>{t.preventDefault(),(0,a.O)(e)})),d.appendChild(r),d}},8264:(e,t,n)=>{function a(e){const t=document.createElement("button");return t.classList.add("btn","btn__cancel"),t.textContent=e,t}n.d(t,{T:()=>a})},8316:(e,t,n)=>{function a(){return document.cookie.split("; ").find((e=>e.startsWith("csrftoken=")))?.split("=")[1]}n.d(t,{m:()=>a})},8645:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{l:()=>i});var d=n(1057),c=e([d]);async function i(e,t,n,a){const c=e.querySelector(".catalogue__content");c.innerHTML="",await(0,d.D)(c,t.checked?0:1,n.checked?0:1,0,a,0)}d=(c.then?(await c)():c)[0],a()}catch(r){a(r)}}))},8664:(e,t,n)=>{function a(e){let t,n,a=!1;e.querySelector(".modal__header").addEventListener("mousedown",(d=>{a=!0,t=d.clientX-e.offsetLeft,n=d.clientY-e.offsetTop,e.style.cursor="grabbing"})),document.addEventListener("mousemove",(d=>{a&&(e.style.left=d.clientX-t+"px",e.style.top=d.clientY-n+"px")})),document.addEventListener("mouseup",(()=>{a=!1,e.style.cursor="grab"}))}n.d(t,{Y:()=>a})},8833:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{h:()=>l});var d=n(7310),c=n(4859),i=n(1211),r=n(3757),o=n(7674),s=e([d,o]);async function l(e,t){const n=document.querySelector(".dictionary-frame__header_right"),a=n.querySelector(".dictionary-frame__input"),c=n.querySelector(".btn__save"),i=n.querySelector(".btn__cancel");a.disabled=!0,c.disabled=!0,c.classList.add("btn__disabled"),i.disabled=!0,i.classList.add("btn__disabled");const o=document.createElement("div");o.classList.add("price-content");const s=await p(),l=d.e+"printing_price_data/"+e;let _;return(await(0,r.D)(l)).priceData.forEach((e=>{const t=document.createElement("div");t.classList.add("type-table"),_="2fr repeat("+e.print_volume_length+", 1fr)",t.appendChild(u(e,_)),e.print_groups.forEach((n=>{t.appendChild(m(n,_,e.print_volume_data))})),o.appendChild(t)})),{form:o,header:s}}async function p(){const e=document.createElement("div");e.classList.add("print-header");const t=(0,c.C)("Загрузить csv");e.appendChild(t);const n=(0,i.E)("Сохранить");return e.appendChild(n),n.addEventListener("click",await o.c),e}function u(e,t){let n;const a=document.createElement("div");return a.classList.add("type-table__row","type-table__header"),a.style.gridTemplateColumns=t,n=document.createElement("div"),a.appendChild(n),n.textContent=e.print_type__name,e.print_volume_data.forEach((e=>{n=document.createElement("div"),n.textContent="до "+e.quantity,a.appendChild(n)})),a}function m(e,t,n){const a=document.createElement("div");a.classList.add("type-table__row"),a.style.gridTemplateColumns=t;const d=document.createElement("div");return d.classList.add("type-table__item"),d.textContent=e.print_price_group__name,a.appendChild(d),n.forEach((t=>{a.appendChild(_(e,t))})),a}function _(e,t){const n=document.createElement("input");n.type="number",n.classList.add("type-table__input","price-row__item_disabled"),n.readOnly=!0,n.addEventListener("dblclick",(e=>{e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled")}));const a=e.prices.find((e=>e.print_volume__id===t.print_volume_id));return n.dataset.id=a?a.price__id:"",n.dataset.print_volume__id=t.print_volume_id,n.dataset.print_price_group__id=e.print_price_group__id,n.value=a?.price,n}[d,o]=s.then?(await s)():s,a()}catch(h){a(h)}}))},8846:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{f:()=>i});var d=n(3682),c=e([d]);function i(e,t){e.style.flexDirection="row";const n=document.createElement("div");n.classList.add("content__left"),e.appendChild(n);const a=document.createElement("div");a.classList.add("content__right"),e.appendChild(a),JSON.parse(t).forEach((e=>{let t=document.createElement("details");t.classList.add("section-left");let a=document.createElement("summary");a.textContent=e.section_name,t.appendChild(a),e.cms_settings.forEach((e=>{let n=document.createElement("li");n.textContent=e.setting,n.dataset.class=e.setting_class,n.dataset.upload=e.upload,n.dataset.new=e.new,n.classList.add("section-left__content"),t.appendChild(n)}));const c=t.querySelectorAll("li");c.forEach((e=>{e.addEventListener("click",(()=>(0,d.V)(e,e.dataset.class,JSON.parse(e.dataset.upload),JSON.parse(e.dataset.new),t,c)))})),n.appendChild(t)}))}d=(c.then?(await c)():c)[0],a()}catch(r){a(r)}}))},9132:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{n:()=>o});var d=n(2830),c=n(4708),i=n(8645),r=e([i,d]);async function o(e,t){const n=e.closest(".dictionary-frame__header").parentElement,a=n.querySelector(".dictionary-frame__input").value,r=n.querySelector(".check-deleted"),o=n.querySelector(".check-new");"Catalogue"===t?await(0,i.l)(n,r,o,(0,c.Z)(a)):await(0,d.n)(n,t,r,o,(0,c.Z)(a))}[i,d]=r.then?(await r)():r,a()}catch(s){a(s)}}))},9227:(e,t,n)=>{n.d(t,{r:()=>d});var a=n(2952);function d(e){const t=(0,a.k)("checkbox");return t.checked=e.fieldValue,t.id=e.fieldName.field+"Input",t.name=e.fieldName.field,t}},9336:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{C:()=>l});var d=n(7728),c=n(8063),i=n(1211),r=n(9635),o=n(8664),s=e([r]);async function l(e){const t=document.querySelector(".service"),n=document.createElement("dialog");n.classList.add("catalogue__modal"),n.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,d.O)(n)}));const a=(0,c.h)(n,"",0);a.firstElementChild.textContent="Новый прайс лист",n.appendChild(a);const s=document.createElement("form");s.id="priceDialog",s.classList.add("modal__form");const l=document.createElement("div");l.classList.add("price__modal_row");const p=document.createElement("label");p.classList.add("price__modal_label"),p.textContent="дата прайс-листа",p.htmlFor="priceDate";const u=document.createElement("input");u.classList.add("price__modal_date"),u.type="date",u.id="priceDate",u.name="priceDate",l.appendChild(p),l.appendChild(u),s.appendChild(l);const m=document.createElement("div");m.classList.add("price__modal_row");const _=document.createElement("label");_.classList.add("price__modal_label"),_.textContent="акция",_.htmlFor="promoCheck";const h=document.createElement("input");h.classList.add("price__modal_check"),h.type="checkbox",h.id="promoCheck",h.name="promoCheck";const y=document.createElement("label");y.classList.add("price__modal_label"),y.textContent="окончание",y.htmlFor="promoDate";const f=document.createElement("input");f.classList.add("price__modal_date"),f.type="date",f.id="promoDate",f.name="promoDate",m.appendChild(_),m.appendChild(h),m.appendChild(y),m.appendChild(f),s.appendChild(m);const v=(0,i.E)("Записать");v.addEventListener("click",r.R),v.classList.add("price__modal_btn"),s.appendChild(v),n.appendChild(s),t.appendChild(n),n.showModal(),(0,o.Y)(n)}r=(s.then?(await s)():s)[0],a()}catch(p){a(p)}}))},9370:(e,t,n)=>{function a(e){const t=e.target.closest("form");if(t.querySelector("textarea").value){const e=t.querySelector(".btn__save");e.disabled=!1,e.classList.remove("btn__disabled");const n=t.querySelector(".btn__cancel");n.disabled=!1,n.classList.remove("btn__disabled")}}n.d(t,{W:()=>a})},9410:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{c:()=>o});var d=n(7310),c=n(3757),i=n(8316),r=e([d]);async function o(e,t){t.disabled=!0,t.classList.add("btn__disabled");const n=t.closest("form"),a=n.querySelector('input[name="id"]').value,r=document.querySelector(".catalogue__title").querySelector(".btn__save");r.disabled=!1,r.classList.remove("btn__disabled");const o=new FormData(n),s=Object.fromEntries(o.entries());let l=!1;if("0"!==a){const e=d.e+"catalogue_record/"+a,t=await(0,c.D)(e);for(const e in s)if(t.values[0][e]!==s[e]){l=!0;break}}if("0"===a||l){e.preventDefault();const t=d.e+"save_catalogue_item/"+a;await fetch(t,{method:"POST",headers:{"X-CSRFToken":(0,i.m)()},body:o}).then((e=>e.json())).then((e=>{"0"===a&&(n.querySelector('input[name="id"]').value=e.id);const t=n.querySelector(".btn__cancel");t.disabled=!0,t.classList.add("btn__disabled")}))}}d=(r.then?(await r)():r)[0],a()}catch(s){a(s)}}))},9546:(e,t,n)=>{n.d(t,{_:()=>i});var a=n(8264),d=n(1211),c=n(7728);function i(e,t){const n=document.createElement("div");n.classList.add("modal__button-block");const i=(0,a.T)("Отменить");i.type="button",i.addEventListener("click",(t=>{t.preventDefault(),(0,c.O)(e)}));const r=(0,d.E)("Записать");return r.type="button",r.classList.add("submit"),r.dataset.id=t,n.appendChild(i),n.appendChild(r),n}},9550:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>r});var d=n(2814),c=n(7502),i=e([c]);async function r(e){const t=document.createElement("div");t.classList.add("dictionary-content__title","dictionary-content__row"),t.appendChild((0,d.N)()),e.forEach((e=>{let n=document.createElement("div");n.classList.add("dictionary-content__title_item"),n.textContent=e.label,t.appendChild(n)}));const n=document.createElement("button");return n.classList.add("btn","btn__save"),n.textContent="Создать",n.dataset.itemId="0",n.addEventListener("click",(e=>(0,c.w)(e))),t.appendChild(n),t}c=(i.then?(await i)():i)[0],a()}catch(o){a(o)}}))},9635:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{R:()=>s});var d=n(483),c=n(7310),i=n(7728),r=n(8316),o=e([c,d]);async function s(e){e.preventDefault();const t=e.target.closest("form"),n=document.getElementById("promoCheck"),a=document.getElementById("promoDate");a.addEventListener("click",(()=>{a.classList.remove("price__modal_border-alert")})),n.addEventListener("click",(()=>{a.classList.remove("price__modal_border-alert")}));const o=document.getElementById("priceDate");if(o.addEventListener("click",(()=>{o.classList.remove("price__modal_border-alert")})),o.value)if(n.checked&&!a.value)a.classList.add("price__modal_border-alert");else{const n=new FormData(t),a=c.e+"save_new_price_date";await fetch(a,{method:"POST",headers:{"X-CSRFToken":(0,r.m)()},body:n}).then((e=>e.json())).then((async t=>{const n=document.querySelector(".dictionary-frame__header_left"),a=n.querySelector(".dropdown__list"),c=n.querySelector(".price-dropdown__input"),r=n.querySelector('input[name="priceDateId"]'),o=e.target.closest("dialog");await(0,d.X4)(t,a,c,r),(0,i.O)(o)}))}else o.classList.add("price__modal_border-alert")}[c,d]=o.then?(await o)():o,a()}catch(l){a(l)}}))},9712:(e,t,n)=>{n.d(t,{O:()=>d});var a=n(3757);async function d(e,t=0,n="",c=!1,i,r,o){null==n&&(n="");const s=await async function(e=0,t="",n=!1,d){try{const c=new URLSearchParams({last_record:e});t&&c.append("search",t),n&&c.append("new","1");const i=await(0,a.D)(`${d}?${c.toString()}`);return i&&"object"==typeof i?(Array.isArray(i.dataList)||(i.dataList=[]),i):{dataList:[],last_record:e}}catch(t){return console.error("Failed to fetch user data:",t),{dataList:[],last_record:e}}}(t,n,c,o),l=s&&s.dataList?s.dataList:[];if(l&&l.length>0){let a=1;l.forEach((s=>{const l=document.createElement("div");l.classList.add("dictionary-content__row",r),l.dataset.id=s.id,e.appendChild(l),i(l,s),a++,20===a&&(l.dataset.last=(t+20).toString(),l.addEventListener("mouseover",(()=>{!async function(e,t,n,a,c,i,r,o){null==a&&(a=""),await d(t,n,a,c,i,r,o);const s=e.cloneNode(!0);e.parentNode.replaceChild(s,e)}(l,e,t+20,n,c,i,r,o)})))}))}}},9857:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{H:()=>r});var d=n(2907),c=n(7310),i=e([d,c]);async function r(e,t,n){e.style.flexDirection="column";const a=JSON.parse(t)[0],i=a.cms_settings[0].setting,r=a.cms_settings[0].setting_class,o=a.cms_settings[0].upload,s=a.cms_settings[0].new,l=a.cms_settings[0].delete,p=(0,d.I)(r,i,o,s,l);e.appendChild(p);const u=await c.G[n](r);e.appendChild(u)}[d,c]=i.then?(await i)():i,a()}catch(o){a(o)}}))}},c={};function i(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={exports:{}};return d[e](n,n.exports,i),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(d,c,i)=>{var r;i&&((r=[]).d=-1);var o,s,l,p=new Set,u=d.exports,m=new Promise(((e,t)=>{l=t,s=e}));m[t]=u,m[e]=e=>(r&&e(r),p.forEach(e),m.catch((e=>{}))),d.exports=m,c((d=>{var c;o=(d=>d.map((d=>{if(null!==d&&"object"==typeof d){if(d[e])return d;if(d.then){var c=[];c.d=0,d.then((e=>{i[t]=e,a(c)}),(e=>{i[n]=e,a(c)}));var i={};return i[e]=e=>e(c),i}}var r={};return r[e]=e=>{},r[t]=d,r})))(d);var i=()=>o.map((e=>{if(e[n])throw e[n];return e[t]})),s=new Promise((t=>{(c=()=>t(i)).r=0;var n=e=>e!==r&&!p.has(e)&&(p.add(e),e&&!e.d&&(c.r++,e.push(c)));o.map((t=>t[e](n)))}));return c.r?s:i()}),(e=>(e?l(m[n]=e):s(u),a(r)))),r&&r.d<0&&(r.d=0)},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(7310)})();