(()=>{"use strict";var e,t,a,n,c={304:(e,t,a)=>{a.d(t,{I:()=>c});var n=a(2952);function c(e){const t=(0,n.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t.step="0.0001",t}},449:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{p:()=>s});var c=a(4708),d=a(4189),i=a(5800),r=a(8833),o=e([d,i,r]);async function s(e,t,a){switch(t){case"1":return(0,d.N)(e,(0,c.Z)(a));case"2":return(0,i.s)(e,(0,c.Z)(a));case"3":return(0,r.h)(e,(0,c.Z)(a))}}[d,i,r]=o.then?(await o)():o,n()}catch(l){n(l)}}))},483:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{X4:()=>s,n6:()=>l,nA:()=>o});var c=a(7310),d=a(3757),i=a(816),r=e([c,i]);async function o(){const e=c.e+"dropdown_list/Price";return l(await(0,d.D)(e))}function s(e,t,a,n){t.innerHTML="",e.forEach((c=>{(0,i.p)(c,t,a,n),a.value=e[0].value,n.value=e[0].id}))}function l(e){const t=document.createElement("div");t.classList.add("price-dropdown");const a=document.createElement("div");a.classList.add("price-dropdown__frame");const n=document.createElement("input");n.classList.add("price-dropdown__input"),n.readOnly=!0,a.appendChild(n),n.insertAdjacentHTML("afterend",'<i class="fa-solid fa-chevron-down"></i>');const c=document.createElement("input");c.hidden=!0,c.type="text",c.name="priceDateId",t.appendChild(a),t.appendChild(c);const d=document.createElement("ul");return d.classList.add("dropdown__list","invisible"),t.appendChild(d),e[0]&&(n.value=e[0].value,c.value=e[0].id),s(e,d,n,c),t.addEventListener("click",(e=>{d.classList.remove("invisible")})),document.addEventListener("click",(e=>{a.contains(e.target)||d.classList.contains("invisible")||d.classList.add("invisible")})),t}[c,i]=r.then?(await r)():r,n()}catch(u){n(u)}}))},816:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{M:()=>o,p:()=>l});var c=a(2952),d=a(3757),i=a(7310),r=e([i]);async function o(e,t,a){const n=document.createElement("div");n.classList.add("dropdown");const r=(0,c.k)("text"),o=document.createElement("input");o.hidden=!0,o.type="text",r.classList.add("dropdown__input"),n.appendChild(r),n.appendChild(o),n.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const l=document.createElement("ul");l.classList.add("dropdown__list","invisible");const u=i.e+"dropdown_list/"+e,p=await(0,d.D)(u);if(t){let e=p.find((e=>e.id===t));r.value=e.value,o.value=e.id}else p[0]&&!a&&(r.value=p[0].value,o.value=p[0].id);return s(p,l,r,o,a),r.addEventListener("click",(()=>{l.classList.toggle("invisible")})),n.appendChild(l),r.addEventListener("keyup",(e=>{let t=e.target.value.toUpperCase();const a=p.filter((e=>e.value.toUpperCase().indexOf(t)>-1));l.innerHTML="",s(a,l,r,o)})),n}function s(e,t,a,n,c){c&&l({id:"",value:""},t,a,n),e.forEach((e=>{l(e,t,a,n)}))}function l(e,t,a,n){const c=document.createElement("li");c.classList.add("dropdown__list_item"),c.value=e.id,c.textContent=e.value,c.addEventListener("click",(e=>{a.value=e.target.textContent,n.value=e.target.value,n.dispatchEvent(new Event("change",{bubbles:!0})),t.classList.add("invisible")})),t.appendChild(c)}i=(r.then?(await r)():r)[0],n()}catch(u){n(u)}}))},897:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Q:()=>o});var c=a(9550),d=a(6723),i=a(6825),r=e([i,c,d]);async function o(e,t,a,n){const r=await(0,i.G)(e),o=document.createElement("div");o.classList.add("dictionary-content");const s=await(0,c.Z)(r);s.style.gridTemplateColumns=t,o.appendChild(s);const l=await(0,d.Y)(e,a,0,n,t);return o.appendChild(l),o.dataset.grid=t,o}[i,c,d]=r.then?(await r)():r,n()}catch(s){n(s)}}))},905:(e,t,a)=>{function n(e){const t=document.createElement("label");return t.classList.add("modal__content_label"),t.htmlFor=e.field+"Input",t.textContent=e.label+(e.null?"":"*"),t}a.d(t,{d:()=>n})},1057:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{D:()=>s});var c=a(7310),d=a(3757),i=a(2428),r=a(3126),o=e([c,r,i]);async function s(e,t,a,n,o){const s=c.e+"catalogue_data/"+t+"/"+a+"/"+n+"/"+o,l=(await(0,d.D)(s)).values;let u,p=0;const m=e.querySelector(`form[data-last-id="${a}"]`);m&&m.removeEventListener("mouseover",r.y);for(const t of l)u=document.createElement("form"),await(0,i.I)(t,u),e.appendChild(await u),p++,20===p&&(u.dataset.lastId=Number.parseInt(a)+p,u.addEventListener("mouseover",r.y))}[c,r,i]=o.then?(await o)():o,n()}catch(l){n(l)}}))},1211:(e,t,a)=>{function n(e){const t=document.createElement("button");return t.classList.add("btn","btn__save"),t.textContent=e,t}a.d(t,{E:()=>n})},1316:(e,t,a)=>{a.d(t,{K:()=>c});var n=a(2952);function c(e){const t=(0,n.k)("text");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},1369:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{b:()=>o});var c=a(7310),d=a(3757),i=a(1499),r=e([c]);async function o(e,t,a,n,r){const o=e.target.closest("form"),s=o.querySelector('input[name="id"]'),l=o.querySelector('input[name="colors"]'),u=o.querySelector('input[name="goods_option__id"]'),p=o.querySelector('textarea[name="name"]'),m=o.querySelector('input[name="item_article"]'),_=o.querySelector('input[name="main_color__id"]'),h=o.querySelector(".main_color_text"),y=o.querySelector(".goods_option__name"),f=o.querySelector(".btn__save");function v(){t.textContent="",r.src="",p.value="",m.value="",_.value="",h.textContent="",u.value="",y.textContent="",l.value="",f.disabled=!0,f.classList.contains("btn__disabled")||f.classList.add("btn__disabled")}if(l.value="",u.value="",/(\.jpg|\.jpeg|\.png)$/i.exec(e.target.value)){const o=e.target.files[0],g=new FileReader;g.onload=function(e){r.src=e.target.result},g.readAsDataURL(o),t.textContent=e.target.value.split("\\").pop();const E=t.textContent.split(".")[0],b=c.e+"parse_file_data/"+a+"/"+n+"/"+E+"/"+s.value,C=await(0,d.D)(b);C.error?v():(p.value=C.values.name,m.value=C.values.item_article,_.value=C.values.main_color__id,h.textContent=C.values.main_color_text,u.value=C.values.goods_option__id,y.textContent=C.values.goods_option__name,(0,i.D)(C.values.colors,l),f.disabled=!1,f.classList.remove("btn__disabled"))}else e.target.value="",v()}c=(r.then?(await r)():r)[0],n()}catch(s){n(s)}}))},1401:(e,t,a)=>{a.d(t,{J:()=>c});var n=a(1211);function c(e){const t=document.createElement("dialog");t.classList.add("alert");const a=document.createElement("header");a.classList.add("modal__header");const c=document.createElement("h4");c.textContent="Результат загрузки",a.appendChild(c);const o=document.createElement("div");o.innerHTML="&times;",o.addEventListener("click",(()=>{t.remove()})),a.appendChild(o),t.appendChild(a);const s=d(),l=i("Ошибки",e.recordErrorLength);s.appendChild(l),e.recordError.forEach((e=>{s.appendChild(r(e))})),t.appendChild(s);const u=d(),p=i("Дубли",e.recordDoubleLength);u.appendChild(p),e.recordDouble.forEach((e=>{u.appendChild(r(e))})),t.appendChild(u);const m=d(),_=i("Успешно",e.recordSuccessLength);m.appendChild(_),e.recordSuccess.forEach((e=>{m.appendChild(r(e))})),t.appendChild(m);const h=(0,n.E)("Ok");return h.classList.add("alert__btn"),h.addEventListener("click",(()=>{t.remove()})),t.appendChild(h),t}function d(){const e=document.createElement("details");return e.classList.add("alert__details"),e}function i(e,t){const a=document.createElement("summary");return a.classList.add("alert__summary"),a.textContent=e+" "+t,a}function r(e){const t=document.createElement("div");t.classList.add("alert__element");const a=document.createElement("div");a.textContent="артикул";const n=document.createElement("div");n.textContent=e.item;const c=document.createElement("div");c.textContent="результат";const d=document.createElement("div");return d.textContent=e.message,t.appendChild(a),t.appendChild(n),t.appendChild(c),t.appendChild(d),t}},1499:(e,t,a)=>{function n(e,t){t.value=JSON.stringify(e)}a.d(t,{D:()=>n})},1836:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{i:()=>p,j:()=>u});var c=a(7728),d=a(8063),i=a(9546),r=a(8664),o=a(8007),s=a(6872),l=e([s,o]);function u(){const e=m("Загрузить csv файл");e.fileInput.name="csv_file",e.fileInput.accept=".csv",e.buttonSubmit.addEventListener("click",s.O)}async function p(){const e=m("Загрузить несколько фото"),t=await(0,o.h)({fieldName:{field:"goods",foreignClass:"Goods",null:!1}});t.style.marginTop="8px",e.form.querySelector(".modal__button-block").insertAdjacentElement("beforebegin",t),e.fileInput.name="files",e.fileInput.accept="image/png, image/jpeg, image/jpg",e.fileInput.multiple=!0,e.buttonSubmit.addEventListener("click",s.f)}function m(e){const t=document.querySelector(".service"),a=document.createElement("dialog");a.classList.add("catalogue__modal"),a.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,c.O)(a)}));const n=(0,d.h)(a,"",0);n.firstElementChild.textContent=e,a.appendChild(n);const o=document.createElement("form");o.id="catalogueDialog",o.classList.add("modal__form"),o.enctype="multipart/form-data";const s=document.createElement("div");s.classList.add("catalogue__input-frame");const l=document.createElement("input");l.classList.add("catalogue__modal_file-input"),l.type="file",s.appendChild(l),o.appendChild(s);const u=document.createElement("div");u.classList.add("error-message"),u.textContent="Error",o.appendChild(u),o.appendChild((0,i._)(a,0)),a.appendChild(o);const p=o.querySelector(".submit");return t.appendChild(a),l.addEventListener("change",(()=>{u.textContent="",u.style.display="none"})),a.showModal(),(0,r.Y)(a),{form:o,fileInput:l,buttonSubmit:p}}[s,o]=l.then?(await l)():l,n()}catch(_){n(_)}}))},2428:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{I:()=>h});var c=a(816),d=a(1211),i=a(8264),r=a(5597),o=a(1499),s=a(1369),l=a(3797),u=a(6352),p=a(9370),m=a(9410),_=e([c,s,m,l]);async function h(e,t){t.enctype="multipart/form-data",t.classList.add("catalogue","catalogue__row"),t.appendChild((0,r.t)("number","id",e.id));const a=(0,r.t)("checkbox","deleted",e.deleted);a.addEventListener("change",(e=>(0,p.W)(e))),t.appendChild(a);const n=document.createElement("textarea");n.value=e.name,n.name="name",n.classList.add("catalogue__input"),n.readOnly=!0,t.appendChild(n),t.appendChild((0,r.t)("text","item_article",e.item_article));const _=document.createElement("div");_.classList.add("catalogue__input","main_color_text"),_.textContent=e.main_color_text,t.appendChild(_),t.appendChild((0,r.t)("text","main_color__id",e.main_color__id)),t.appendChild((0,r.t)("number","goods_option__id",e.goods_option__id));const h=document.createElement("div");h.classList.add("catalogue__input","goods_option__name"),h.textContent=e.goods_option__name,t.appendChild(h);const y=document.createElement("img");y.classList.add("catalogue__img"),y.alt=e.item_article,y.loading="lazy",y.src="/static/viki_web_cms/files/item_photo/"+e.image,t.appendChild(y);const f=(0,r.t)("checkbox","simple_article",e.simple_article);0===e.id&&(f.checked=!0),f.addEventListener("change",(e=>(0,u.O)(e))),t.appendChild(f);const v=await(0,c.M)("Goods",e.goods__id,!1);t.appendChild(v);const g=v.querySelector("input[hidden]");g.name="goods__id",g.addEventListener("change",(e=>(0,u.O)(e)));const E=document.createElement("div");E.classList.add("catalogue__file");const b=document.createElement("div");b.textContent=e.image,b.classList.add("catalogue__file_text"),E.appendChild(b);const C=document.createElement("div");C.classList.add("catalogue__input-frame");const L=document.createElement("input");L.classList.add("catalogue__file_input"),L.type="file",L.name="image",L.accept="image/png, image/jpeg, image/jpg",L.addEventListener("change",(async e=>await(0,s.b)(e,b,g.value,f.checked?1:0,y))),C.appendChild(L),E.appendChild(C),t.appendChild(E);const w=document.createElement("div");w.classList.add("catalogue__btn-block");const S=(0,d.E)("");S.disabled=!0,S.classList.add("tooltip","btn__disabled"),S.innerHTML='<i class="catalogue__icon fa-solid fa-check"></i><span class="tooltip-text">сохранить</span>',S.addEventListener("click",(e=>(0,m.c)(e,S)));const q=(0,i.T)("");q.classList.add("tooltip","btn__disabled"),q.disabled=!0,q.innerHTML='<i class="catalogue__icon fa-solid fa-x"></i><span class="tooltip-text">отменить</span>',q.addEventListener("click",(e=>(0,l.N)(e))),w.appendChild(S),w.appendChild(q),t.appendChild(w);const k=(0,r.t)("text","colors","");k.hidden=!0,t.appendChild(k),e.colors&&(0,o.D)(e.colors,k)}[c,s,m,l]=_.then?(await _)():_,n()}catch(y){n(y)}}))},2472:(e,t,a)=>{function n(e){const t=document.createElement("img");return t.classList.add("modal__content_image"),t.src=e.url+e.fieldValue,t.alt=e.fieldName.field,t}a.d(t,{O:()=>n})},2814:(e,t,a)=>{function n(){const e=document.createElement("div");return e.classList.add("dictionary-content__square"),e}a.d(t,{N:()=>n})},2830:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{n:()=>i});var c=a(897),d=e([c]);async function i(e,t,a,n){let d=e.querySelector(".dictionary-content");const i=d.dataset.grid;d.remove(),d=await(0,c.Q)(t,i,a.checked?0:1,n),e.appendChild(d)}c=(d.then?(await d)():d)[0],n()}catch(r){n(r)}}))},2868:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Q:()=>i});var c=a(1836),d=e([c]);async function i(e){"Catalogue"===e&&(0,c.j)()}c=(d.then?(await d)():d)[0],n()}catch(r){n(r)}}))},2907:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{I:()=>_});var c=a(4859),d=a(2868),i=a(7847),r=a(4087),o=a(6467),s=a(1211),l=a(9132),u=a(8264),p=a(5095),m=e([d,r,l,p]);function _(e,t,a){const n=document.createElement("div");n.classList.add("dictionary-frame__header");const m=document.createElement("div");m.classList.add("dictionary-frame__header_left"),m.textContent=t,n.appendChild(m);const _=document.createElement("div");if(_.classList.add("dictionary-frame__header_right"),a){const t=(0,c.C)("Загрузить CSV");t.addEventListener("click",(()=>(0,d.Q)(e))),_.appendChild(t)}const h=(0,i.G)(!0);h.id=e+"-deleted",h.addEventListener("change",(()=>(0,r.m)(e,h))),_.appendChild(h);const y=document.createElement("label");y.htmlFor=e+"-deleted",y.classList.add("dictionary-frame__label"),y.textContent="скрыть удаленные",_.appendChild(y),_.insertAdjacentHTML("beforeend",o.q);const f=document.createElement("input");f.classList.add("dictionary-frame__input"),f.type="text",f.placeholder="поиск...",f.addEventListener("keypress",(t=>{"Enter"===t.key&&(0,l.n)(t.target,e)})),_.appendChild(f);const v=(0,s.E)("Поиск");v.addEventListener("click",(t=>(0,l.n)(t.target,e)));const g=(0,u.T)("Очистить");return g.addEventListener("click",(t=>(0,p.k)(t.target,e))),_.appendChild(v),_.appendChild(g),n.appendChild(_),n.dataset.class=e,n.dataset.title=t,n}[d,r,l,p]=m.then?(await m)():m,n()}catch(h){n(h)}}))},2952:(e,t,a)=>{function n(e){const t=document.createElement("input");return t.type=e,t.classList.add("modal__content_"+e),t}a.d(t,{k:()=>n})},3126:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{y:()=>r});var c=a(1057),d=a(4708),i=e([c]);async function r(e){const t=e.target,a=t.dataset.lastId,n=t.closest(".content"),i=n.querySelector(".dictionary-frame__input").value,r=n.querySelector(".check"),o=n.querySelector(".catalogue__content");await(0,c.D)(o,r.checked?1:0,a,(0,d.Z)(i),0)}c=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},3232:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{o:()=>p});var c=a(4449),d=a(9336),i=a(4859),r=a(483),o=a(449),s=a(8264),l=a(1211),u=e([r,c,d,o]);async function p(e){const t=document.querySelector(".dictionary-frame__header_left"),a=await(0,r.nA)();t.appendChild(a);const n=a.querySelector("input"),u=a.querySelector("input[hidden]"),p=(0,i.C)("Новый прайс");t.appendChild(p);const m=(0,s.T)("Выгрузить прайс");t.appendChild(m),u.addEventListener("change",await c.h),p.addEventListener("click",d.C);const _=document.querySelector(".dictionary-frame__header_right");_.firstElementChild.remove(),_.firstElementChild.remove();const h=document.createElement("label");h.htmlFor="priceType",h.textContent="тип цены";const y=(0,r.n6)([{id:1,value:"стандарт"},{id:2,value:"от объема"},{id:3,value:"нанесение"}]);y.id="priceType",y.addEventListener("change",await c.h),_.insertAdjacentElement("afterbegin",y),_.insertAdjacentElement("afterbegin",h);const f=document.createElement("div");f.classList.add("price-block");const v=y.querySelector("input[hidden]").value,g=await(0,o.p)(n.value,v,"None");f.appendChild(g.header),f.appendChild(g.form),_.querySelector(".dictionary-frame__input").remove(),_.querySelector(".btn__save").remove(),_.querySelector(".btn__cancel").remove();const E=document.createElement("input");E.classList.add("dictionary-frame__input"),E.type="text",E.placeholder="поиск...",E.addEventListener("keypress",(e=>{"Enter"===e.key&&e.target.value&&(0,c.h)()})),_.appendChild(E);const b=(0,l.E)("Поиск");b.addEventListener("click",c.h),_.appendChild(b);const C=(0,s.T)("Очистить");return C.addEventListener("click",(e=>{E.value="",(0,c.h)()})),_.appendChild(C),f}[r,c,d,o]=u.then?(await u)():u,n()}catch(m){n(m)}}))},3682:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{V:()=>l});var c=a(6744),d=a(7245),i=a(897),r=a(6332),o=a(6825),s=e([d,o,i]);async function l(e,t,a,n,s){if(e.classList.toggle("text-active"),document.getElementById(t))document.getElementById(t).classList.toggle("invisible");else{const n=document.querySelector(".content__right"),c=await(0,d.K)(t,e.textContent,a),s=await(0,o.G)(t),l=(0,r.I)(s),u=await(0,i.Q)(t,l,0,"None");c.appendChild(u),n.appendChild(c)}(0,c.P)(n,s)}[d,o,i]=s.then?(await s)():s,n()}catch(u){n(u)}}))},3757:(e,t,a)=>{function n(e){return fetch(e).then((e=>e.json()))}a.d(t,{D:()=>n})},3797:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{N:()=>o});var c=a(7310),d=a(3757),i=a(2428),r=e([c,i]);async function o(e){const t=e.target.closest("form"),a=t.querySelector('input[name="id"]').value;if("0"===a){t.remove();const e=document.querySelector(".catalogue__title").querySelector(".btn__save");e.disabled=!1,e.classList.remove("btn__disabled")}else{t.innerHTML="";const e=c.e+"catalogue_record/"+a,n=await(0,d.D)(e);await(0,i.I)(n.values[0],t)}}[c,i]=r.then?(await r)():r,n()}catch(s){n(s)}}))},3913:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{N:()=>r});var c=a(7310),d=a(4449),i=e([c,d]);async function r(e){const t=document.querySelector(".content"),a=t.querySelector(".dictionary-frame__header_left").querySelector("input[hidden]").value,n=(t.querySelector(".dictionary-frame__header_right").querySelector("input[hidden]").value,document.querySelectorAll("input.price-row__item:not(.price-row__item_disabled)")),i=Array.from(n),r={goods:[],item:[]};let o;i.forEach((e=>{o={},Object.entries(e.dataset).forEach((([e,t])=>{Number.parseInt(t)?o[e]=Number.parseInt(t):o[e]=t})),o.Price__price_list__id=Number.parseInt(a),o.price=Number.parseFloat(e.value),delete o.discount,r[e.dataset.class].push(o),delete o.class}));const s=c.e+"price_list_save";fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((e=>e.json())).then((e=>{e.error||(0,d.h)()}))}[c,d]=i.then?(await i)():i,n()}catch(o){n(o)}}))},4085:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{H:()=>g});var c=a(1316),d=a(9227),i=a(7164),r=a(8007),o=a(2472),s=a(6825),l=a(7310),u=a(3757),p=a(6977),m=a(905),_=a(7541),h=a(304),y=a(7475),f=e([r,s,l]);[r,s,l]=f.then?(await f)():f;const v={string:c.K,boolean:d.r,number:i.y,float:_.P,precise:h.I,foreign:r.h,image:o.O,file:p.B,date:y.d};async function g(e,t,a){const n=document.createElement("div");n.classList.add("modal__content");const c=await(0,s.G)(t);let d;const i=l.e+"record_info/"+t+"/"+a,r=await(0,u.D)(i);for(const e of c){let t={fieldName:e,fieldValue:null,url:r.url};"0"!==a&&("foreign"!==e.type?t.fieldValue=r.record[e.field]:t.fieldValue=r.record[e.field+"_id"]),n.appendChild((0,m.d)(e)),d=await v[e.type](t),n.appendChild(d)}return n}n()}catch(E){n(E)}}))},4087:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{m:()=>o});var c=a(2830),d=a(4708),i=a(8645),r=e([i,c]);async function o(e,t){const a=t.closest(".dictionary-frame__header").parentElement,n=a.querySelector(".dictionary-frame__input").value,r=(0,d.Z)(n);"Catalogue"===e?await(0,i.l)(a,t,r):await(0,c.n)(a,e,t,r)}[i,c]=r.then?(await r)():r,n()}catch(s){n(s)}}))},4114:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{f:()=>i});var c=a(897),d=e([c]);async function i(e){const t="14px 1.5fr 4fr 1fr 1fr 3fr 3fr 3fr 2fr 2fr 1fr 1fr 1fr 1fr 1fr 1.5fr",a=await(0,c.Q)(e,t,0,"None");return a.id=e,a.dataset.grid=t,a}c=(d.then?(await d)():d)[0],n()}catch(r){n(r)}}))},4189:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{N:()=>p,R:()=>m});var c=a(7310),d=a(3757),i=a(483),r=a(1211),o=a(4859),s=a(8264),l=a(3913),u=e([c,l,i]);async function p(e,t){const a=document.createElement("div");a.classList.add("price-content");const n=c.e+"standard_price_data/"+e+"/"+t,i=await(0,d.D)(n),r="0.8fr 3.2fr repeat("+i.price_type_length+", 1fr) 160px 120px",o=await(0,d.D)(c.e+"all_items_all_items_for_dropdown"),s=await m(i.header,r);return await _(i.form,a,i.header,o,r),{form:a,header:s}}async function m(e,t){const a=document.createElement("header");a.classList.add("price-header"),a.style.gridTemplateColumns=t;const n=document.createElement("div");n.classList.add("price-header__item"),n.textContent="Артикул",a.appendChild(n);const c=document.createElement("div");let d;c.classList.add("price-header__item"),c.textContent="Товар",a.appendChild(c),e.forEach((e=>{d=document.createElement("div"),d.textContent=e.price_name__name,d.classList.add("price-header__item"),a.appendChild(d)}));const i=(0,o.C)("Загрузить csv");a.appendChild(i);const s=(0,r.E)("Сохранить");return a.appendChild(s),s.addEventListener("click",await l.N),a}function _(e,t,a,n,c){let d,i,r;e.goods.forEach((o=>{d=h(o,a,n,c),t.appendChild(d),r=e.items.filter((e=>o.id===e.goods__id&&"[]"!==e.price)),r.forEach((e=>{i=y(e,a,c),t.appendChild(i)}))}))}function h(e,t,a,n){const c=f(e,t,"goods","goods",n),d=a.filter((t=>t.goods__id===e.id));c.appendChild((0,i.n6)(d));const r=(0,s.T)("Добавить цвет");return r.addEventListener("click",(()=>{const e=c.querySelector(".price-dropdown").querySelector("input[hidden]").value,a=c.querySelector(".price-dropdown__input").value,[n,...d]=a.split(" ");if(!Array.from(document.querySelectorAll('div[data-type="item"] input[hidden]')).find((t=>t.value===e))){const a={id:e,article:n,name:d.join(" "),price:"[]"};c.insertAdjacentElement("afterend",y(a,t))}})),c.appendChild(r),c}function y(e,t,a){const n=f(e,t,"item","catalogue_item",a);n.classList.add("price-row__item-row"),n.style.gridTemplateColumns=a;const d=(0,s.T)("Убрать позицию");return d.addEventListener("click",(async e=>{e.preventDefault();const t=n.querySelector('input[name="id"]').value;fetch(c.e+"delete_item_price_row/"+t).then((e=>e.json())).then((e=>{e&&n.remove()}))})),n.appendChild(d),n}function f(e,t,a,n,c){const d=document.createElement("div");d.dataset.type=a,d.classList.add("price-row"),d.style.gridTemplateColumns=c;const i=document.createElement("input");i.type="text",i.hidden=!0,i.name="id",i.value=e.id,d.appendChild(i);const r=document.createElement("div");r.classList.add("price-row__name"),r.textContent=e.article,d.appendChild(r);const o=document.createElement("div");let s;return o.classList.add("price-row__name"),o.textContent=e.name,d.appendChild(o),t.forEach((t=>{s=document.createElement("input"),s.classList.add("price-row__item","price-row__item_disabled"),s.type="number",s.step="0.01",s.lang="en";const c=JSON.parse(e.price).find((e=>"price_type__id"in e&&e.price_type__id===t.price_name__id));s.dataset.class=a,s.dataset.id=c?c.id:"",s.setAttribute("data-"+n+"__"+a+"__id",e.id),s.dataset.standard_price_type__price_type__id=t.price_name__id,s.dataset.discount=t.discount,s.value=c?c.price:"",s.readOnly=!0,s.addEventListener("dblclick",(e=>{const t=document.querySelector(".dictionary-frame__header_right"),a=t.querySelector(".dictionary-frame__input"),n=t.querySelector(".btn__save");e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled"),a.disabled=!0,n.disabled=!0,n.classList.add("btn__disabled")})),s.addEventListener("change",(e=>{e.target.readOnly=!0})),"1"===s.dataset.discount&&s.addEventListener("change",(e=>{d.querySelectorAll('input[type="number"]').forEach((t=>{"1"!==t.dataset.discount&&(t.value=(Math.ceil(e.target.value*Number.parseFloat(t.dataset.discount)*100)/100).toFixed(2),t.dispatchEvent(new Event("dblclick",{bubbles:!0})),e.target.classList.remove("price-row__item_disabled"))}))})),d.appendChild(s)})),d}[c,l,i]=u.then?(await u)():u,n()}catch(v){n(v)}}))},4256:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{g:()=>u});var c=a(1211),d=a(7979),i=a(1057),r=a(2428),o=a(4859),s=a(1836),l=e([s,r,i]);async function u(e){const t=document.querySelector(".dictionary-frame__header_right"),a=(0,o.C)("Загрузить несколько фото");a.addEventListener("click",await s.i),t.insertAdjacentElement("afterbegin",a);const n=document.createElement("div"),l=document.createElement("div");let u;l.classList.add("catalogue","catalogue__title"),d.t.forEach((e=>{u=document.createElement("p"),u.classList.add("catalogue__title-item"),u.textContent=e.label,l.appendChild(u)}));const p=(0,c.E)("Новый");p.addEventListener("click",(async e=>{e.target.disabled=!0,e.target.classList.add("btn__disabled");const t=document.createElement("form");await(0,r.I)({id:0},t);const a=t.querySelector(".btn__cancel");a.disabled=!1,a.classList.remove("btn__disabled"),m.insertAdjacentElement("afterbegin",t),t.scrollIntoView({behavior:"smooth"}),t.focus()})),l.appendChild(p),n.appendChild(l);const m=document.createElement("div");return m.classList.add("catalogue__content"),await(0,i.D)(m,0,0,"None",0),n.appendChild(m),n}[s,r,i]=l.then?(await l)():l,n()}catch(p){n(p)}}))},4449:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{h:()=>i});var c=a(449),d=e([c]);async function i(e){const t=document.querySelector(".content"),a=t.querySelector(".dictionary-frame__header_right"),n=a.querySelector(".dictionary-frame__input"),d=a.querySelector(".btn__save");n.disabled=!1,d.disabled=!1,d.classList.remove("btn__disabled");const i=t.querySelector(".price-block"),r=t.querySelector(".dictionary-frame__header_left").querySelector(".price-dropdown__input").value,o=n.value,s=t.querySelector(".dictionary-frame__header_right").querySelector("input[hidden]").value;i&&(i.innerHTML="");const l=await(0,c.p)(r,s,o);i.appendChild(l.header),i.appendChild(l.form)}c=(d.then?(await d)():d)[0],n()}catch(r){n(r)}}))},4708:(e,t,a)=>{function n(e){let t=e;return function(e){return/^[a-zA-Zа-яА-ЯёЁ0-9 ._#]*$/.test(e)}(e)&&e||(t="None"),t.replace(/ /g,"|")}a.d(t,{Z:()=>n})},4859:(e,t,a)=>{function n(e){const t=document.createElement("button");return t.classList.add("btn","btn__neutral"),t.textContent=e,t}a.d(t,{C:()=>n})},5095:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{k:()=>r});var c=a(2830),d=a(8645),i=e([d,c]);async function r(e,t){const a=e.closest(".dictionary-frame__header").parentElement;a.querySelector(".dictionary-frame__input").value="";const n=a.querySelector(".check");"Catalogue"===t?await(0,d.l)(a,n,"None"):await(0,c.n)(a,t,n,"None")}[d,c]=i.then?(await i)():i,n()}catch(o){n(o)}}))},5352:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Z:()=>o});var c=a(6723),d=a(6332),i=a(6825),r=e([i,c]);async function o(e,t,a,n,r){const o=await(0,i.G)(t),s="Goods"!==t?(0,d.I)(o):"14px 1.5fr 4fr 1fr 1fr 3fr 3fr 3fr 2fr 2fr 1fr 1fr 1fr 1fr 1fr 1.5fr",l=e.closest(".dictionary-content__rows");[...(await(0,c.Y)(t,a,r,n,s)).children].forEach((e=>{l.appendChild(e)}));const u=e.cloneNode(!0);e.parentNode.replaceChild(u,e)}[i,c]=r.then?(await r)():r,n()}catch(s){n(s)}}))},5597:(e,t,a)=>{function n(e,t,a){const n=document.createElement("input");return"precise"===e?(n.type="number",n.step="0.0001"):"float"===e?(n.type="number",n.step="0.01"):n.type=e,n.name=t,"id"===t.slice(-2)&&(n.hidden=!0),"checkbox"===e?(n.checked=a,n.classList.add("check","catalogue__check")):(n.value=a,n.readOnly=!0,n.classList.add("catalogue__input")),n}a.d(t,{t:()=>n})},5800:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{s:()=>o});var c=a(7310),d=a(3757),i=a(4189),r=e([c,i]);async function o(e,t){const a=document.createElement("div");a.classList.add("price-content");const n=c.e+"volume_price_data/"+e+"/"+t,r=await(0,d.D)(n),o="0.8fr 3.2fr repeat("+r.price_type_length+", 1fr) 120px 102px",l=await(0,i.R)(r.header,o);return s(r.form,a,r.header,r.form.volumes,o),{form:a,header:l}}function s(e,t,a,n,c){n.forEach((n=>{const d=document.createElement("div");d.classList.add("price-content__volume-header"),d.textContent="Количество "+n.name+" шт",t.appendChild(d);const i=document.createElement("div");i.appendChild(l(e,a,n,c)),t.appendChild(i)}))}function l(e,t,a,n){const c=document.createElement("div");return e.goods.forEach((e=>{c.appendChild(u(e,t,a,n))})),c}function u(e,t,a,n){const c=document.createElement("div");c.classList.add("price-row"),c.style.gridTemplateColumns=n;const d=document.createElement("input");d.type="text",d.hidden=!0,d.name="id",d.value=e.id,c.appendChild(d);const i=document.createElement("div");i.classList.add("price-row__name"),i.textContent=e.article,c.appendChild(i);const r=document.createElement("div");let o;return r.classList.add("price-row__name"),r.textContent=e.name,c.appendChild(r),t.forEach((t=>{o=document.createElement("input"),o.classList.add("price-row__item","price-row__item_disabled"),o.type="number",o.step="0.01",o.lang="en";const n=JSON.parse(e.price).find((e=>"price_type__id"in e&&e.price_type__id===t.price_name__id&&e.price_volume__id===a.id));o.dataset.class="goods",o.dataset.id=n?n.id:"",o.setAttribute("data-goods__goods__id",e.id),o.dataset.standard_price_type__price_type__id=t.price_name__id,o.dataset.price_goods_quantity__price_volume__id=a.id,o.value=n?n.price:"",o.readOnly=!0,o.addEventListener("dblclick",(e=>{const t=document.querySelector(".dictionary-frame__header_right"),a=t.querySelector(".dictionary-frame__input"),n=t.querySelector(".btn__save");e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled"),a.disabled=!0,n.disabled=!0,n.classList.add("btn__disabled")})),o.addEventListener("change",(e=>{e.target.readOnly=!0})),c.appendChild(o)})),c}[c,i]=r.then?(await r)():r,n()}catch(p){n(p)}}))},6332:(e,t,a)=>{function n(e){let t="14px 6fr ";return e.forEach((e=>{"name"!==e.field&&("boolean"===e.type||"number"===e.type||"float"===e.type||"precise"===e.type?t+="1fr ":t+="3fr ")})),t+="80px",t}a.d(t,{I:()=>n})},6352:(e,t,a)=>{function n(e){const t=e.target.closest("form").querySelector('input[type="file"]');t.value="",t.dispatchEvent(new Event("change",{bubbles:!0}))}a.d(t,{O:()=>n})},6467:(e,t,a)=>{a.d(t,{q:()=>n});const n='<i class="fa fa-solid fa-magnifying-glass"></i>'},6723:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{R:()=>p,Y:()=>u});var c=a(3757),d=a(7310),i=a(2814),r=a(5352),o=a(8264),s=a(7502),l=e([d,r,s]);async function u(e,t,a,n,i){const o=document.createElement("div");o.classList.add("dictionary-content__rows");const s=d.e+"field_values/"+e+"/"+t+"/"+a+"/"+n,l=await(0,c.D)(s);let u=0;return l.values.forEach((c=>{let d=document.createElement("div");p(d,c,l.field_params,e),d.style.gridTemplateColumns=i,o.appendChild(d),u++,20===u&&(d.dataset.lastRecord=a+20,d.addEventListener("mouseover",(c=>(0,r.Z)(c.target,e,t,n,a+20))))})),o}function p(e,t,a,n){e.classList.add("dictionary-content__row");const c=(0,i.N)();t.hex&&(c.style.backgroundColor=t.hex),e.appendChild(c),e.id=n+"_row_"+t.id,Object.keys(t).forEach(((n,c)=>{if("id"!==n){let c;Object.keys(a).includes(n)&&"image"===a[n].type?(c=document.createElement("img"),c.classList.add("dictionary-content__row_img"),c.src=a[n].url+t[n],c.alt=t[n]):Object.keys(a).includes(n)&&"boolean"===a[n].type?(c=document.createElement("input"),c.type="checkbox",c.checked=t[n],c.disabled=!0,c.classList.add("dictionary-content__check")):(c=document.createElement("div"),c.classList.add("dictionary-content__row_item"),c.textContent=t[n]),e.appendChild(c)}}));const d=(0,o.T)("Изм.");d.dataset.itemId=t.id,d.addEventListener("click",(e=>(0,s.w)(e))),e.appendChild(d)}[d,r,s]=l.then?(await l)():l,n()}catch(m){n(m)}}))},6744:(e,t,a)=>{function n(e,t){const a=e.querySelector("summary");Array.from(t).some((e=>e.classList.contains("text-active")))?a.classList.add("text-active"):a.classList.remove("text-active")}a.d(t,{P:()=>n})},6825:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{G:()=>r});var c=a(7310),d=a(3757),i=e([c]);async function r(e){const t=c.e+"field_names/"+e;return await(0,d.D)(t)}c=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},6872:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{O:()=>u,f:()=>p});var c=a(4708),d=a(7310),i=a(7728),r=a(8645),o=a(1401),s=a(8664),l=e([d,r]);async function u(e){e.preventDefault();const t=e.target.closest("form"),a=new FormData(t),n=Object.fromEntries(a.entries()).csv_file.name,c=t.querySelector(".error-message");n.endsWith(".csv")?await m(e,t,a,"catalogue_csv_load",c):(t.querySelector("input").value="",c.style.display="block",c.textContent="Неправильный формат файла")}async function p(e){e.preventDefault();const t=e.target.closest("form"),a=new FormData(t),n=t.querySelector(".error-message");await m(e,t,a,"catalogue_files_load",n)}async function m(e,t,a,n,l){const u=document.querySelector(".content"),p=u.querySelector(".dictionary-frame__input"),m=(0,c.Z)(p.value),_=u.querySelector(".check"),h=e.target.closest("dialog"),y=d.e+n;await fetch(y,{method:"POST",body:a}).then((e=>e.json())).then((e=>{if(e.error)t.querySelector("input").value="",l.style.display="block",l.textContent=e.error;else{(0,i.O)(h),(0,r.l)(u,_.checked?1:0,m);const t=(0,o.J)(e);document.querySelector(".service").appendChild(t),t.showModal(),(0,s.Y)(t)}}))}[d,r]=l.then?(await l)():l,n()}catch(_){n(_)}}))},6977:(e,t,a)=>{a.d(t,{B:()=>c});var n=a(2952);function c(e){const t=document.createElement("div");t.classList.add("modal__content_file-frame");const a=(0,n.k)("file");return a.placeholder=e.fieldValue,a.name=e.fieldName.field,t.appendChild(a),t}},7090:(e,t,a)=>{function n(){const e=document.getElementById("userData"),t=JSON.parse(localStorage.getItem("userData"));return e.textContent=t.username,"Авторизуйтесь"!==t.username}a.d(t,{g:()=>n})},7164:(e,t,a)=>{a.d(t,{y:()=>c});var n=a(2952);function c(e){const t=(0,n.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},7245:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{K:()=>i});var c=a(2907),d=e([c]);async function i(e,t,a){const n=document.createElement("section");n.classList.add("dictionary-frame"),n.id=e;const d=(0,c.I)(e,t,a);return n.appendChild(d),n}c=(d.then?(await d)():d)[0],n()}catch(r){n(r)}}))},7310:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{G:()=>_,e:()=>m});var c=a(8846),d=a(9857),i=a(4114),r=a(4256),o=a(3232),s=a(3757),l=a(7090),u=a(8016),p=e([i,r,o,c,d]);[i,r,o,c,d]=p.then?(await p)():p;const m="./json/",_={Goods:i.f,Catalogue:r.g,PriceList:o.o},h=m+"userdata",y=await(0,s.D)(h);localStorage.setItem("userData",JSON.stringify(y)),(0,l.g)()||document.querySelector(".menu__right").addEventListener("click",u.i);const f=document.querySelectorAll(".menu__item"),v=document.querySelector(".content");f.forEach((e=>{e.addEventListener("click",(async t=>{e.classList.contains("menu__item_bold")||(e.classList.add("menu__item_bold"),v.innerHTML="","Standard"===t.target.dataset.page?(0,c.f)(v,e.dataset.content):await(0,d.H)(v,e.dataset.content,t.target.dataset.page)),f.forEach((t=>{t!==e&&t.classList.remove("menu__item_bold")}))}))})),n()}catch(e){n(e)}}),1)},7475:(e,t,a)=>{a.d(t,{d:()=>c});var n=a(2952);function c(e){const t=(0,n.k)("date");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},7502:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{w:()=>r});var c=a(7646),d=a(8664),i=e([c]);async function r(e){e.preventDefault();const t=e.target.closest(".dictionary-content").parentElement.querySelector(".dictionary-frame__header"),a=t.dataset.class,n=t.dataset.title,i=await(0,c.w)(a,n,e.target.dataset.itemId);document.querySelector(".service").appendChild(i),i.showModal(),(0,d.Y)(i),console.log()}c=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},7541:(e,t,a)=>{a.d(t,{P:()=>c});var n=a(2952);function c(e){const t=(0,n.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t.step="0.01",t}},7646:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{w:()=>u});var c=a(8063),d=a(9546),i=a(4085),r=a(7310),o=a(7728),s=a(6723),l=e([i,r,s]);async function u(e,t,a){const n=document.createElement("dialog");n.classList.add("modal"),n.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,o.O)(n)}));const r=(0,c.h)(n,t,a);n.appendChild(r);const s=document.createElement("form");s.id=e+"__form",s.classList.add("modal__form"),s.enctype="multipart/form-data";const l=await(0,i.H)(n,e,a);s.appendChild(l),s.appendChild((0,d._)(n,a)),n.appendChild(s);const u=new FormData(s);return s.querySelector(".submit").addEventListener("click",(t=>p(t,s,e,u))),n}async function p(e,t,a,n){e.preventDefault();const c=e.target.dataset.id,d=t.closest(".modal");d.querySelectorAll("input").forEach((e=>{e.classList.remove("border-alert")})),e.target.disabled=!0;const i=new FormData(t),l=d.querySelector('input[type="file"]');if(!m(i,n)||l){const t=r.e+"edit_dictionary/"+a+"/"+c;await fetch(t,{method:"POST",body:i}).then((e=>e.json())).then((t=>{const n=t.errors;if(n){let t;n.forEach((a=>{e.target.disabled=!1,t=d.querySelector(`[name = "${a}"]`),t.hidden?t.previousElementSibling.classList.add("border-alert"):t.classList.add("border-alert"),e.target.focus()}))}else{let e;if("0"!==c)e=document.querySelector("#"+a+"_row_"+c),e.innerHTML="";else{let n;e=document.createElement("div"),e.id=a+"_row_"+t.values.id,e.classList.add("dictionary-content__row"),n=document.getElementById(a)?document.getElementById(a).querySelector(".dictionary-content__rows"):document.querySelector(".dictionary-content__rows"),n.insertAdjacentElement("afterbegin",e),e.style.gridTemplateColumns=n.closest(".dictionary-content").dataset.grid}(0,s.R)(e,t.values,t.params,a),e.scrollIntoView({behavior:"smooth"}),e.focus(),(0,o.O)(d)}}))}}function m(e,t){const a=Array.from(t.values()),n=Array.from(e.values());return a.sort(),n.sort(),JSON.stringify(a)===JSON.stringify(n)}[i,r,s]=l.then?(await l)():l,n()}catch(_){n(_)}}))},7674:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{c:()=>r});var c=a(7310),d=a(4449),i=e([c,d]);async function r(e){const t=document.querySelector(".content").querySelector(".dictionary-frame__header_left").querySelector("input[hidden]").value,a=document.querySelectorAll("input.type-table__input:not(.price-row__item_disabled)"),n=[];let i;[...a].forEach((e=>{i={},Object.entries(e.dataset).forEach((([e,t])=>{Number.parseInt(t)?i[e]=Number.parseInt(t):i[e]=t})),i.price_list__id=Number.parseInt(t),i.price=Number.parseFloat(e.value),n.push(i)}));const r=c.e+"printing_price_list_save";fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{e.error||(0,d.h)()}))}[c,d]=i.then?(await i)():i,n()}catch(o){n(o)}}))},7728:(e,t,a)=>{function n(e){e.close(),e.remove()}a.d(t,{O:()=>n})},7847:(e,t,a)=>{function n(e){const t=document.createElement("input");return t.type="checkbox",t.checked=e,t.classList.add("check"),t}a.d(t,{G:()=>n})},7979:(e,t,a)=>{a.d(t,{t:()=>n});const n=[{field:"deleted",type:"boolean",label:"уд."},{field:"name",type:"string",label:"название",null:!1},{field:"item_article",type:"string",label:"артикул",null:!1},{field:"main_color",type:"foreign",label:"осн. цвет",foreignClass:"Color",null:!1},{field:"goods_option",type:"foreign",label:"опция",foreignClass:"GoodsOption",null:!1},{field:"image",type:"img",label:"фото",url:"/static/viki_web_cms/files/item_photo/",null:!0},{field:"simple_article",type:"boolean",label:"ст. арт."},{field:"goods",type:"foreign",label:"номенклатура",foreignClass:"Goods",null:!1},{field:"image_file",type:"file",label:"файл",null:!0}]},8007:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{h:()=>i});var c=a(816),d=e([c]);async function i(e){const t=e.fieldName.foreignClass,a=e.fieldValue,n=await(0,c.M)(t,a,e.fieldName.null);return n.querySelector("[hidden]").name=e.fieldName.field+"_id",n}c=(d.then?(await d)():d)[0],n()}catch(r){n(r)}}))},8016:(e,t,a)=>{a.d(t,{i:()=>s});var n=a(8063),c=a(8664),d=a(8264),i=a(1211),r=a(7728),o=a(7090);async function s(){const e=document.createElement("dialog");e.classList.add("login-cms");const t=(0,n.h)(e,"Вход",0);t.firstElementChild.textContent="Вход",e.appendChild(t);const a=document.createElement("input");a.type="text",a.classList.add("login-cms__input"),e.appendChild(a);const l=document.createElement("input");l.type="password",l.classList.add("login-cms__input"),e.appendChild(l),document.querySelector(".service").appendChild(e);const u=document.createElement("div");u.classList.add("login-cms__btn-block");const p=(0,d.T)("Закрыть");p.addEventListener("click",(t=>{(0,r.O)(e)})),u.appendChild(p);const m=(0,i.E)("Войти");m.addEventListener("click",(t=>{!async function(e,t,a,n){e.preventDefault(),await fetch("./user_login",{method:"POST",body:JSON.stringify({username:t,password:a})}).then((e=>e.json())).then((e=>{localStorage.setItem("userData",JSON.stringify(e));const t=(0,o.g)(),a=document.querySelector(".menu__right");t?a.removeEventListener("click",s):a.addEventListener("click",s),(0,r.O)(n)}))}(t,a.value,l.value,e)})),u.appendChild(m),e.appendChild(u),e.showModal(),(0,c.Y)(e),document.querySelector(".menu-right")}},8063:(e,t,a)=>{a.d(t,{h:()=>c});var n=a(7728);function c(e,t,a){const c=document.createElement("div");c.classList.add("modal__header");let d=t;d="0"===a?"Создать "+d:"Изменить "+d;const i=document.createElement("div");i.textContent=d,c.appendChild(i);const r=document.createElement("button");return r.classList.add("modal__header_btn"),r.textContent="×",r.addEventListener("click",(t=>{t.preventDefault(),(0,n.O)(e)})),c.appendChild(r),c}},8264:(e,t,a)=>{function n(e){const t=document.createElement("button");return t.classList.add("btn","btn__cancel"),t.textContent=e,t}a.d(t,{T:()=>n})},8645:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{l:()=>i});var c=a(1057),d=e([c]);async function i(e,t,a){const n=e.querySelector(".catalogue__content");n.innerHTML="",await(0,c.D)(n,t.checked?0:1,0,a,0)}c=(d.then?(await d)():d)[0],n()}catch(r){n(r)}}))},8664:(e,t,a)=>{function n(e){let t,a,n=!1;e.querySelector(".modal__header").addEventListener("mousedown",(c=>{n=!0,t=c.clientX-e.offsetLeft,a=c.clientY-e.offsetTop,e.style.cursor="grabbing"})),document.addEventListener("mousemove",(c=>{n&&(e.style.left=c.clientX-t+"px",e.style.top=c.clientY-a+"px")})),document.addEventListener("mouseup",(()=>{n=!1,e.style.cursor="grab"}))}a.d(t,{Y:()=>n})},8833:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{h:()=>l});var c=a(7310),d=a(4859),i=a(1211),r=a(3757),o=a(7674),s=e([c,o]);async function l(e,t){const a=document.querySelector(".dictionary-frame__header_right"),n=a.querySelector(".dictionary-frame__input"),d=a.querySelector(".btn__save"),i=a.querySelector(".btn__cancel");n.disabled=!0,d.disabled=!0,d.classList.add("btn__disabled"),i.disabled=!0,i.classList.add("btn__disabled");const o=document.createElement("div");o.classList.add("price-content");const s=await u(),l=c.e+"printing_price_data/"+e;let _;return(await(0,r.D)(l)).priceData.forEach((e=>{const t=document.createElement("div");t.classList.add("type-table"),_="2fr repeat("+e.print_volume_length+", 1fr)",t.appendChild(p(e,_)),e.print_groups.forEach((a=>{t.appendChild(m(a,_,e.print_volume_data))})),o.appendChild(t)})),{form:o,header:s}}async function u(){const e=document.createElement("div");e.classList.add("print-header");const t=(0,d.C)("Загрузить csv");e.appendChild(t);const a=(0,i.E)("Сохранить");return e.appendChild(a),a.addEventListener("click",await o.c),e}function p(e,t){let a;const n=document.createElement("div");return n.classList.add("type-table__row","type-table__header"),n.style.gridTemplateColumns=t,a=document.createElement("div"),n.appendChild(a),a.textContent=e.print_type__name,e.print_volume_data.forEach((e=>{a=document.createElement("div"),a.textContent="до "+e.quantity,n.appendChild(a)})),n}function m(e,t,a){const n=document.createElement("div");n.classList.add("type-table__row"),n.style.gridTemplateColumns=t;const c=document.createElement("div");return c.classList.add("type-table__item"),c.textContent=e.print_price_group__name,n.appendChild(c),a.forEach((t=>{n.appendChild(_(e,t))})),n}function _(e,t){const a=document.createElement("input");a.type="number",a.classList.add("type-table__input","price-row__item_disabled"),a.readOnly=!0,a.addEventListener("dblclick",(e=>{e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled")}));const n=e.prices.find((e=>e.print_volume__id===t.print_volume_id));return a.dataset.id=n&&"id"in Object.keys(n)?n.id:"",a.dataset.print_volume__id=t.print_volume_id,a.dataset.print_price_group__id=e.print_price_group__id,a.value=n?.price,a}[c,o]=s.then?(await s)():s,n()}catch(h){n(h)}}))},8846:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{f:()=>i});var c=a(3682),d=e([c]);function i(e,t){e.style.flexDirection="row";const a=document.createElement("div");a.classList.add("content__left"),e.appendChild(a);const n=document.createElement("div");n.classList.add("content__right"),e.appendChild(n),JSON.parse(t).forEach((e=>{let t=document.createElement("details");t.classList.add("section-left");let n=document.createElement("summary");n.textContent=e.section_name,t.appendChild(n),e.cms_settings.forEach((e=>{let a=document.createElement("li");a.textContent=e.setting,a.dataset.class=e.setting_class,a.dataset.upload=e.upload,a.classList.add("section-left__content"),t.appendChild(a)}));const d=t.querySelectorAll("li");d.forEach((e=>{e.addEventListener("click",(()=>(0,c.V)(e,e.dataset.class,JSON.parse(e.dataset.upload),t,d)))})),a.appendChild(t)}))}c=(d.then?(await d)():d)[0],n()}catch(r){n(r)}}))},9132:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{n:()=>o});var c=a(2830),d=a(4708),i=a(8645),r=e([i,c]);async function o(e,t){const a=e.closest(".dictionary-frame__header").parentElement,n=a.querySelector(".dictionary-frame__input").value,r=a.querySelector(".check");"Catalogue"===t?await(0,i.l)(a,r,(0,d.Z)(n)):await(0,c.n)(a,t,r,(0,d.Z)(n))}[i,c]=r.then?(await r)():r,n()}catch(s){n(s)}}))},9227:(e,t,a)=>{a.d(t,{r:()=>c});var n=a(2952);function c(e){const t=(0,n.k)("checkbox");return t.checked=e.fieldValue,t.id=e.fieldName.field+"Input",t.name=e.fieldName.field,t}},9336:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{C:()=>l});var c=a(7728),d=a(8063),i=a(1211),r=a(9635),o=a(8664),s=e([r]);async function l(e){const t=document.querySelector(".service"),a=document.createElement("dialog");a.classList.add("catalogue__modal"),a.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,c.O)(a)}));const n=(0,d.h)(a,"",0);n.firstElementChild.textContent="Новый прайс лист",a.appendChild(n);const s=document.createElement("form");s.id="priceDialog",s.classList.add("modal__form");const l=document.createElement("div");l.classList.add("price__modal_row");const u=document.createElement("label");u.classList.add("price__modal_label"),u.textContent="дата прайс-листа",u.htmlFor="priceDate";const p=document.createElement("input");p.classList.add("price__modal_date"),p.type="date",p.id="priceDate",p.name="priceDate",l.appendChild(u),l.appendChild(p),s.appendChild(l);const m=document.createElement("div");m.classList.add("price__modal_row");const _=document.createElement("label");_.classList.add("price__modal_label"),_.textContent="акция",_.htmlFor="promoCheck";const h=document.createElement("input");h.classList.add("price__modal_check"),h.type="checkbox",h.id="promoCheck",h.name="promoCheck";const y=document.createElement("label");y.classList.add("price__modal_label"),y.textContent="окончание",y.htmlFor="promoDate";const f=document.createElement("input");f.classList.add("price__modal_date"),f.type="date",f.id="promoDate",f.name="promoDate",m.appendChild(_),m.appendChild(h),m.appendChild(y),m.appendChild(f),s.appendChild(m);const v=(0,i.E)("Записать");v.addEventListener("click",r.R),v.classList.add("price__modal_btn"),s.appendChild(v),a.appendChild(s),t.appendChild(a),a.showModal(),(0,o.Y)(a)}r=(s.then?(await s)():s)[0],n()}catch(u){n(u)}}))},9370:(e,t,a)=>{function n(e){const t=e.target.closest("form");if(t.querySelector("textarea").value){const e=t.querySelector(".btn__save");e.disabled=!1,e.classList.remove("btn__disabled");const a=t.querySelector(".btn__cancel");a.disabled=!1,a.classList.remove("btn__disabled")}}a.d(t,{W:()=>n})},9410:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{c:()=>r});var c=a(7310),d=a(3757),i=e([c]);async function r(e,t){t.disabled=!0,t.classList.add("btn__disabled");const a=t.closest("form"),n=a.querySelector('input[name="id"]').value,i=document.querySelector(".catalogue__title").querySelector(".btn__save");i.disabled=!1,i.classList.remove("btn__disabled");const r=new FormData(a),o=Object.fromEntries(r.entries());let s=!1;if("0"!==n){const e=c.e+"catalogue_record/"+n,t=await(0,d.D)(e);for(const e in o)if(t.values[0][e]!==o[e]){s=!0;break}}if("0"===n||s){e.preventDefault();const t=c.e+"save_catalogue_item/"+n;await fetch(t,{method:"POST",body:r}).then((e=>e.json())).then((e=>{"0"===n&&(a.querySelector('input[name="id"]').value=e.id);const t=a.querySelector(".btn__cancel");t.disabled=!0,t.classList.add("btn__disabled")}))}}c=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},9546:(e,t,a)=>{a.d(t,{_:()=>i});var n=a(8264),c=a(1211),d=a(7728);function i(e,t){const a=document.createElement("div");a.classList.add("modal__button-block");const i=(0,n.T)("Отменить");i.type="button",i.addEventListener("click",(t=>{t.preventDefault(),(0,d.O)(e)}));const r=(0,c.E)("Записать");return r.type="button",r.classList.add("submit"),r.dataset.id=t,a.appendChild(i),a.appendChild(r),a}},9550:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Z:()=>r});var c=a(2814),d=a(7502),i=e([d]);async function r(e){const t=document.createElement("div");t.classList.add("dictionary-content__title","dictionary-content__row"),t.appendChild((0,c.N)()),e.forEach((e=>{let a=document.createElement("div");a.classList.add("dictionary-content__title_item"),a.textContent=e.label,t.appendChild(a)}));const a=document.createElement("button");return a.classList.add("btn","btn__save"),a.textContent="Создать",a.dataset.itemId="0",a.addEventListener("click",(e=>(0,d.w)(e))),t.appendChild(a),t}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},9635:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{R:()=>o});var c=a(483),d=a(7310),i=a(7728),r=e([d,c]);async function o(e){e.preventDefault();const t=e.target.closest("form"),a=document.getElementById("promoCheck"),n=document.getElementById("promoDate");n.addEventListener("click",(()=>{n.classList.remove("price__modal_border-alert")})),a.addEventListener("click",(()=>{n.classList.remove("price__modal_border-alert")}));const r=document.getElementById("priceDate");if(r.addEventListener("click",(()=>{r.classList.remove("price__modal_border-alert")})),r.value)if(a.checked&&!n.value)n.classList.add("price__modal_border-alert");else{const a=new FormData(t),n=d.e+"save_new_price_date";await fetch(n,{method:"POST",body:a}).then((e=>e.json())).then((async t=>{const a=document.querySelector(".dictionary-frame__header_left"),n=a.querySelector(".dropdown__list"),d=a.querySelector(".price-dropdown__input"),r=a.querySelector('input[name="priceDateId"]'),o=e.target.closest("dialog");await(0,c.X4)(t,n,d,r),(0,i.O)(o)}))}else r.classList.add("price__modal_border-alert")}[d,c]=r.then?(await r)():r,n()}catch(s){n(s)}}))},9857:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{H:()=>r});var c=a(2907),d=a(7310),i=e([c,d]);async function r(e,t,a){e.style.flexDirection="column";const n=JSON.parse(t)[0],i=n.cms_settings[0].setting,r=n.cms_settings[0].setting_class,o=n.cms_settings[0].upload,s=(0,c.I)(r,i,o);e.appendChild(s);const l=await d.G[a](r);e.appendChild(l)}[c,d]=i.then?(await i)():i,n()}catch(o){n(o)}}))}},d={};function i(e){var t=d[e];if(void 0!==t)return t.exports;var a=d[e]={exports:{}};return c[e](a,a.exports,i),a.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(c,d,i)=>{var r;i&&((r=[]).d=-1);var o,s,l,u=new Set,p=c.exports,m=new Promise(((e,t)=>{l=t,s=e}));m[t]=p,m[e]=e=>(r&&e(r),u.forEach(e),m.catch((e=>{}))),c.exports=m,d((c=>{var d;o=(c=>c.map((c=>{if(null!==c&&"object"==typeof c){if(c[e])return c;if(c.then){var d=[];d.d=0,c.then((e=>{i[t]=e,n(d)}),(e=>{i[a]=e,n(d)}));var i={};return i[e]=e=>e(d),i}}var r={};return r[e]=e=>{},r[t]=c,r})))(c);var i=()=>o.map((e=>{if(e[a])throw e[a];return e[t]})),s=new Promise((t=>{(d=()=>t(i)).r=0;var a=e=>e!==r&&!u.has(e)&&(u.add(e),e&&!e.d&&(d.r++,e.push(d)));o.map((t=>t[e](a)))}));return d.r?s:i()}),(e=>(e?l(m[a]=e):s(p),n(r)))),r&&r.d<0&&(r.d=0)},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(7310)})();