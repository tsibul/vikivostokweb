(()=>{"use strict";var e,t,a,n,d={2:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{r:()=>o});var d=a(35),c=a(757),i=a(8058),r=e([c]);async function o(e){const t="order-element__header";return(0,d.a)(c.L,t,"/cms/json/order_list"),await(0,i.J)("order-content",[{title:"номер"},{title:"дата"},{title:"от"},{title:"клиент"},{title:"сумма"},{title:"статус"},{title:"менеджер"},{title:"отв."},{title:"дней"},{title:"срок"},{title:"макет"},{title:"счет"},{title:"накл."},{title:"изм."},{title:""}],t,c.L,"/cms/json/order_list")}c=(r.then?(await r)():r)[0],n()}catch(s){n(s)}}))},35:(e,t,a)=>{a.d(t,{a:()=>d});var n=a(9712);function d(e,t,a){const n=document.querySelector(".dictionary-frame__header"),d=n.cloneNode(!0);n.parentNode.replaceChild(d,n);const i=d.querySelector('input[type="checkbox"]'),r=i.cloneNode(!0);i.parentNode.replaceChild(r,i);const o=d.querySelector(".dictionary-frame__input"),s=o.cloneNode(!0);o.parentNode.replaceChild(s,o);const l=d.querySelector(".btn__save"),p=l.cloneNode(!0);l.parentNode.replaceChild(p,l);const u=d.querySelector(".btn__cancel"),m=u.cloneNode(!0);u.parentNode.replaceChild(m,u),r.addEventListener("change",(async()=>{const n=s.value;await c(n,r.checked,e,t,a)})),p.addEventListener("click",(async()=>{const n=s.value;await c(n,r.checked,e,t,a)})),m.addEventListener("click",(async()=>{s.value="",await c("",r.checked,e,t,a)})),s.addEventListener("keypress",(async n=>{if("Enter"===n.key){const n=s.value;await c(n,r.checked,e,t,a)}}))}async function c(e,t,a,d,c){let i=document.querySelector(".dictionary-content__rows");i.innerHTML="",await(0,n.O)(i,0,e,t,a,d,c)}},304:(e,t,a)=>{a.d(t,{I:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t.step="0.0001",t}},449:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{p:()=>s});var d=a(4708),c=a(4189),i=a(5800),r=a(8833),o=e([c,i,r]);async function s(e,t,a){switch(t){case"1":return(0,c.N)(e,(0,d.Z)(a));case"2":return(0,i.s)(e,(0,d.Z)(a));case"3":return(0,r.h)(e,(0,d.Z)(a))}}[c,i,r]=o.then?(await o)():o,n()}catch(l){n(l)}}))},481:(e,t,a)=>{function n(e,t,a){const n=document.createElement("div");n.classList.add("dropdown");const d=document.createElement("input");d.type="hidden",d.name=a,n.appendChild(d);const c=document.createElement("input");c.type="text",c.classList.add("modal__content_text","dropdown__input"),n.appendChild(c),n.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const i=document.createElement("ul");if(i.style.display="none",i.classList.add("dropdown__list"),n.appendChild(i),e.forEach((e=>{const t=document.createElement("li");t.classList.add("dropdown__list_item"),t.textContent=e.value,t.dataset.id=e.id,t.addEventListener("click",(()=>{d.value=e.id,c.value=e.value,i.style.display="none"})),i.appendChild(t)})),t){const a=e.find((e=>e.id===parseInt(t)));a&&(d.value=a.id,c.value=a.value)}return c.addEventListener("input",(()=>{const e=c.value.toLowerCase(),t=i.getElementsByTagName("li");Array.from(t).forEach((t=>{const a=t.textContent.toLowerCase();t.style.display=a.includes(e)?"":"none"}))})),c.addEventListener("click",(e=>{e.stopPropagation(),i.style.display="none"===i.style.display?"":"none"})),document.addEventListener("click",(e=>{n.contains(e.target)||(i.style.display="none")})),n}a.d(t,{q:()=>n})},483:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{X4:()=>s,n6:()=>l,nA:()=>o});var d=a(7310),c=a(3757),i=a(816),r=e([d,i]);async function o(){const e=d.e+"dropdown_list/Price";return l(await(0,c.D)(e))}function s(e,t,a,n){t.innerHTML="",e.forEach((d=>{(0,i.p)(d,t,a,n),a.value=e[0].value,n.value=e[0].id}))}function l(e){const t=document.createElement("div");t.classList.add("price-dropdown");const a=document.createElement("div");a.classList.add("price-dropdown__frame");const n=document.createElement("input");n.classList.add("price-dropdown__input"),n.readOnly=!0,a.appendChild(n),n.insertAdjacentHTML("afterend",'<i class="fa-solid fa-chevron-down"></i>');const d=document.createElement("input");d.hidden=!0,d.type="text",d.name="priceDateId",t.appendChild(a),t.appendChild(d);const c=document.createElement("ul");return c.classList.add("dropdown__list","invisible"),t.appendChild(c),e[0]&&(n.value=e[0].value,d.value=e[0].id),s(e,c,n,d),t.addEventListener("click",(e=>{c.classList.remove("invisible")})),document.addEventListener("click",(e=>{a.contains(e.target)||c.classList.contains("invisible")||c.classList.add("invisible")})),t}[d,i]=r.then?(await r)():r,n()}catch(p){n(p)}}))},608:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{K1:()=>f,b8:()=>h,ij:()=>y,rN:()=>v});var d=a(7728),c=a(8063),i=a(9546),r=a(8664),o=a(3757),s=a(481),l=a(2952),p=a(7646),u=a(8316),m=e([p]);p=(m.then?(await m)():m)[0];const _={editOrder:{type:"editOrder",content:L},editItem:{type:"editItem",content:w},editBranding:{type:"editBranding",content:S},editDelivery:{type:"editDelivery",content:k}};async function h(e,t){e.preventDefault();const a=e.target.dataset.id,n=e.target.dataset.order,d=_.editOrder;d.headerText=`заказ ${n}`,await C(d,a,t,t)}async function y(e,t,a){const n=e.target.dataset.id,d=e.target.dataset.article,c=_.editItem;c.headerText=`арт. ${d}`,await C(c,n,t,a)}async function f(e,t,a){const n=e.target.dataset.id,d=e.target.dataset.article,c=_.editBranding;c.headerText=`нанесение для арт. ${d}`,await C(c,n,t,a)}async function v(e,t,a){const n=e.target.dataset.id,d=e.target.dataset.order,c=_.editDelivery;c.headerText=`доставку к заказу ${d}`,await C(c,n,t,a)}async function C(e,t,a,n){const d=await g(e,t);document.querySelector(".service").appendChild(d),d.showModal(),(0,r.Y)(d)}async function g(e,t,a,n){const r=document.createElement("dialog");r.classList.add("modal"),r.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,d.O)(r)}));const o=(0,c.h)(r,e.headerText,t);r.appendChild(o);const s=document.createElement("form");s.id=e.type+"__form",s.classList.add("modal__form"),s.enctype="multipart/form-data";const l=await E(e,t);s.appendChild(l),s.appendChild((0,i._)(r,t)),r.appendChild(s);const p=new FormData(s);return s.querySelector(".submit").type="submit",s.addEventListener("submit",(a=>{b(a,e,s,p,r,t)})),r}async function E(e,t){const a=new URLSearchParams({id:t,type:e.type}),n=await(0,o.D)(`json/order_modal_request?${a.toString()}`),d=document.createElement("div");return d.classList.add("modal__content"),e.content(n,d,t)}async function b(e,t,a,n,c,i){e.preventDefault();const r=new FormData(a);if(!(0,p.T)(r,n)){r.append("type",t.type),r.append("element_id",i);const e=await fetch("/cms/json/order_edit",{method:"POST",headers:{"X-CSRFToken":(0,u.m)()},body:r});await e.json()}(0,d.O)(c)}function L(e,t,a){const n=document.createElement("div");n.textContent="статус",n.classList.add("modal__content_label"),n.htmlFor=`state_${a}`,t.appendChild(n);const d=(0,s.q)(e.available_states,e.current_state_id,"state__id");d.id=`state_${a}`,t.appendChild(d);const c=document.createElement("label");c.htmlFor=`days_${a}`,c.textContent="рабочих дней",c.classList.add("modal__content_label"),t.appendChild(c);const i=(0,l.k)("number");i.id=`days_${a}`,i.name="days_to_deliver",i.value=e.days_to_deliver,t.appendChild(i);const r=document.createElement("div");r.textContent="ответственный",r.classList.add("modal__content_label"),r.htmlFor=`user_${a}`,t.appendChild(r);const o=(0,s.q)(e.available_users,e.user_responsible_id,"user_responsible__id");o.id=`user_${a}`,t.appendChild(o);const p=document.createElement("label");p.htmlFor=`date_${a}`,p.textContent="контрольный срок",p.classList.add("modal__content_label"),t.appendChild(p);const u=(0,l.k)("date");return u.id=`date_${a}`,u.name="delivery_date",u.value=e.delivery_date,t.appendChild(u),t}function w(e,t,a){const n=document.createElement("label");n.htmlFor=`itemPrice_${a}`,n.textContent="цена",n.classList.add("modal__content_label"),t.appendChild(n);const d=(0,l.k)("number");if(d.id=`itemPrice_${a}`,d.name="price",d.step="0.01",d.value=e.price,t.appendChild(d),Object.keys(e).includes("branding_name")){const n=document.createElement("label");n.htmlFor=`itemBranding_${a}`,n.textContent="нанесение",n.classList.add("modal__content_label"),t.appendChild(n);const d=(0,l.k)("text");d.id=`itemBranding_${a}`,d.name="branding_name",d.value=e.branding_name,t.appendChild(d)}return t}function S(e,t,a){const n=document.createElement("div");n.textContent="тип нанесения",n.classList.add("modal__content_label"),n.htmlFor=`printType_${a}`,t.appendChild(n);const d=(0,s.q)(e.available_print_types,e.print_type_id,"print_type__id");d.id=`printType_${a}`,t.appendChild(d);const c=document.createElement("div");c.textContent="тип нанесения",c.classList.add("modal__content_label"),c.htmlFor=`printPlace_${a}`,t.appendChild(c);const i=(0,s.q)(e.available_print_places,e.print_place_id,"print_place__id");i.id=`printPlace_${a}`,t.appendChild(i);const r=document.createElement("div");r.textContent="кол-во цветов",r.classList.add("modal__content_label"),r.htmlFor=`color_${a}`,t.appendChild(r);const o=(0,s.q)(e.available_colors,e.colors,"colors");o.id=`color_${a}`,t.appendChild(o);const p=document.createElement("div");p.textContent="второй проход",p.classList.add("modal__content_label"),p.htmlFor=`pass_${a}`,t.appendChild(p);const u=(0,l.k)("checkbox");return u.name="second_pass",u.classList.add("check"),u.id=`pass_${a}`,t.appendChild(u),t}function k(e,t,a){const n=document.createElement("div");n.textContent="доставка",n.classList.add("modal__content_label"),t.appendChild(n);const d=(0,s.q)(e.available_options,e.current_option.id,"id");return t.appendChild(d),t}n()}catch(x){n(x)}}))},757:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{L:()=>r});var d=a(1211),c=a(608),i=e([c]);function r(e,t){const a=document.createElement("details");a.classList.add("order-element");const n=document.createElement("summary");let i;[...e.attributes].forEach((e=>{n.setAttribute(e.name,e.value)})),e.parentNode.replaceChild(a,e),a.appendChild(n),i=p(t.order_no),n.appendChild(i),i=p(t.order_date),n.appendChild(i),i=p(t.our_company),n.appendChild(i),i=p(t.company),n.appendChild(i),i=p(parseFloat(t.total_amount).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),i.name="total_amount",i.classList.add("align-right"),n.appendChild(i),i=p(t.state),i.dataset.id=t.state_id,i.name="state",n.appendChild(i),i=p(t.manager),i.dataset.id=t.manager_id,i.dataset.mail=t.manager_mail,n.appendChild(i),i=p(t.responsible),i.dataset.id=t.responsible_id,i.name="user_responsible",n.appendChild(i),i=p(t.days_to_deliver),i.name="days_to_deliver",n.appendChild(i),i=p(t.delivery_date),i.name="delivery_date",n.appendChild(i),i=u("True"===t.branding),n.appendChild(i),i=u("True"===t.invoice),n.appendChild(i),i=u("True"===t.delivery),n.appendChild(i),i=p(t.state_changed_at),n.appendChild(i);const r=(0,d.E)("Изм");r.dataset.order=t.order_no,r.dataset.id=t.id,r.addEventListener("click",(async e=>{await(0,c.b8)(e,n)})),n.appendChild(r),i=document.createElement("div"),i.classList.add("order-element__toggle"),n.appendChild(i),t.items.forEach((e=>{o(e,a,n)})),l(t,a,n)}function o(e,t,a){const n=document.createElement("div");let i;n.classList.add("dictionary-content__row","order-element__item"),n.dataset.id=e.id,i=p(""),n.appendChild(i),i=p(e.article),n.appendChild(i),i=p(e.name),n.appendChild(i),i=p(e.branding_name),i.name="branding_name",n.appendChild(i),i=p(parseFloat(e.price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),i.classList.add("align-right"),n.appendChild(i),i=p(e.quantity.toLocaleString("ru-RU")),i.classList.add("align-right"),n.appendChild(i),i=p(parseFloat(e.total_price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),i.name="total_amount",i.classList.add("align-right"),n.appendChild(i);const r=(0,d.E)("Изм");r.dataset.id=e.id,r.dataset.article=e.article,r.addEventListener("click",(async e=>{await(0,c.ij)(e,n,a)})),n.appendChild(r),t.appendChild(n),e.brandings&&e.brandings.forEach((n=>{s(n,e.quantity,t,e.article,a)}))}function s(e,t,a,n,i){const r=document.createElement("div");let o;r.classList.add("dictionary-content__row","order-element__branding"),o=p(""),r.appendChild(o);let s=`${e.print_type} ${e.print_place}, цветов: ${e.colors}`;e.second_pass&&(s+=", второй проход"),o=p(s),o.name="branding_text",r.appendChild(o),o=p(parseFloat(e.price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),o.name="price",o.classList.add("align-right"),r.appendChild(o),o=p(t.toLocaleString("ru-RU")),o.classList.add("align-right"),r.appendChild(o),o=p(parseFloat(e.total_price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),o.name="total_amount",o.classList.add("align-right"),r.appendChild(o);const l=(0,d.E)("Изм");l.dataset.id=e.id,l.dataset.article=n,l.addEventListener("click",(async e=>{await(0,c.K1)(e,r,i)})),r.appendChild(l),a.appendChild(r)}function l(e,t,a){const n=document.createElement("div");let i;n.classList.add("dictionary-content__row","order-element__branding","delivery-row"),i=p(""),n.appendChild(i),i=p(`доставка ${e.delivery_option}`),n.appendChild(i),i=p(""),n.appendChild(i),i=p(""),n.appendChild(i),i=p(parseFloat(e.delivery_option_price).toLocaleString("ru-RU",{minimumFractionDigits:2,maximumFractionDigits:2})),i.classList.add("align-right"),n.appendChild(i);const r=(0,d.E)("Изм");r.dataset.id=e.id,r.dataset.order=e.order_no,r.addEventListener("click",(async e=>{await(0,c.rN)(e,n,a)})),n.appendChild(r),t.appendChild(n)}function p(e){const t=document.createElement("div");return t.classList.add("dictionary-content__row_item","user-element__cell"),t.textContent=e||"",t}function u(e){const t=document.createElement("input");return t.type="checkbox",t.classList.add("check","user-element__check"),t.checked=e||!1,t.disabled=!0,t}c=(i.then?(await i)():i)[0],n()}catch(m){n(m)}}))},816:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{M:()=>o,p:()=>l});var d=a(2952),c=a(3757),i=a(7310),r=e([i]);async function o(e,t,a){const n=document.createElement("div");n.classList.add("dropdown");const r=(0,d.k)("text"),o=document.createElement("input");o.hidden=!0,o.type="text",r.classList.add("dropdown__input"),n.appendChild(r),n.appendChild(o),n.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const l=document.createElement("ul");l.classList.add("dropdown__list","invisible");const p=i.e+"dropdown_list/"+e,u=await(0,c.D)(p);if(t){let e=u.find((e=>e.id===t));r.value=e.value,o.value=e.id}else u[0]&&!a&&(r.value=u[0].value,o.value=u[0].id);return s(u,l,r,o,a),r.addEventListener("click",(()=>{l.classList.toggle("invisible")})),n.appendChild(l),r.addEventListener("keyup",(e=>{let t=e.target.value.toUpperCase();const a=u.filter((e=>e.value.toUpperCase().indexOf(t)>-1));l.innerHTML="",s(a,l,r,o)})),n}function s(e,t,a,n,d){d&&l({id:"",value:""},t,a,n),e.forEach((e=>{l(e,t,a,n)}))}function l(e,t,a,n){const d=document.createElement("li");d.classList.add("dropdown__list_item"),d.value=e.id,d.textContent=e.value,d.addEventListener("click",(e=>{a.value=e.target.textContent,n.value=e.target.value,n.dispatchEvent(new Event("change",{bubbles:!0})),t.classList.add("invisible")})),t.appendChild(d)}i=(r.then?(await r)():r)[0],n()}catch(p){n(p)}}))},897:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Q:()=>o});var d=a(9550),c=a(6723),i=a(6825),r=e([i,d,c]);async function o(e,t,a,n,r){const o=await(0,i.G)(e),s=document.createElement("div");s.classList.add("dictionary-content");const l=await(0,d.Z)(o);l.style.gridTemplateColumns=t,s.appendChild(l);const p=await(0,c.Y)(e,a,n,0,r,t);return s.appendChild(p),s.dataset.grid=t,s}[i,d,c]=r.then?(await r)():r,n()}catch(s){n(s)}}))},905:(e,t,a)=>{function n(e){const t=document.createElement("label");return t.classList.add("modal__content_label"),t.htmlFor=e.field+"Input",t.textContent=e.label+(e.null?"":"*"),t}a.d(t,{d:()=>n})},1057:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{D:()=>s});var d=a(7310),c=a(3757),i=a(2428),r=a(3126),o=e([d,r,i]);async function s(e,t,a,n,o,s){const l=d.e+"catalogue_data/"+t+"/"+a+"/"+n+"/"+o+"/"+s,p=(await(0,c.D)(l)).values;let u,m=0;const _=e.querySelector(`form[data-last-id="${n}"]`);_&&_.removeEventListener("mouseover",r.y);for(const t of p)u=document.createElement("form"),await(0,i.I)(t,u),e.appendChild(await u),m++,20===m&&(u.dataset.lastId=Number.parseInt(n)+m,u.addEventListener("mouseover",r.y))}[d,r,i]=o.then?(await o)():o,n()}catch(l){n(l)}}))},1211:(e,t,a)=>{function n(e){const t=document.createElement("button");return t.classList.add("btn","btn__save"),t.textContent=e,t}a.d(t,{E:()=>n})},1316:(e,t,a)=>{a.d(t,{K:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("text");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},1369:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{b:()=>o});var d=a(7310),c=a(3757),i=a(1499),r=e([d]);async function o(e,t,a,n,r){const o=e.target.closest("form"),s=o.querySelector('input[name="id"]'),l=o.querySelector('input[name="colors"]'),p=o.querySelector('input[name="goods_option__id"]'),u=o.querySelector('textarea[name="name"]'),m=o.querySelector('input[name="item_article"]'),_=o.querySelector('input[name="main_color__id"]'),h=o.querySelector(".main_color_text"),y=o.querySelector(".goods_option__name"),f=o.querySelector(".btn__save");function v(){t.textContent="",r.src="",u.value="",m.value="",_.value="",h.textContent="",p.value="",y.textContent="",l.value="",f.disabled=!0,f.classList.contains("btn__disabled")||f.classList.add("btn__disabled")}if(l.value="",p.value="",/(\.jpg|\.jpeg|\.png)$/i.exec(e.target.value)){const o=e.target.files[0],C=new FileReader;C.onload=function(e){r.src=e.target.result},C.readAsDataURL(o),t.textContent=e.target.value.split("\\").pop();const g=t.textContent.split(".")[0],E=d.e+"parse_file_data/"+a+"/"+n+"/"+g+"/"+s.value,b=await(0,c.D)(E);b.error?v():(u.value=b.values.name,m.value=b.values.item_article,_.value=b.values.main_color__id,h.textContent=b.values.main_color_text,p.value=b.values.goods_option__id,y.textContent=b.values.goods_option__name,(0,i.D)(b.values.colors,l),f.disabled=!1,f.classList.remove("btn__disabled"))}else e.target.value="",v()}d=(r.then?(await r)():r)[0],n()}catch(s){n(s)}}))},1401:(e,t,a)=>{a.d(t,{J:()=>d});var n=a(1211);function d(e){const t=document.createElement("dialog");t.classList.add("alert");const a=document.createElement("header");a.classList.add("modal__header");const d=document.createElement("h4");d.textContent="Результат загрузки",a.appendChild(d);const o=document.createElement("div");o.innerHTML="&times;",o.addEventListener("click",(()=>{t.remove()})),a.appendChild(o),t.appendChild(a);const s=c(),l=i("Ошибки",e.recordErrorLength);s.appendChild(l),e.recordError.forEach((e=>{s.appendChild(r(e))})),t.appendChild(s);const p=c(),u=i("Дубли",e.recordDoubleLength);p.appendChild(u),e.recordDouble.forEach((e=>{p.appendChild(r(e))})),t.appendChild(p);const m=c(),_=i("Успешно",e.recordSuccessLength);m.appendChild(_),e.recordSuccess.forEach((e=>{m.appendChild(r(e))})),t.appendChild(m);const h=(0,n.E)("Ok");return h.classList.add("alert__btn"),h.addEventListener("click",(()=>{t.remove()})),t.appendChild(h),t}function c(){const e=document.createElement("details");return e.classList.add("alert__details"),e}function i(e,t){const a=document.createElement("summary");return a.classList.add("alert__summary"),a.textContent=e+" "+t,a}function r(e){const t=document.createElement("div");t.classList.add("alert__element");const a=document.createElement("div");a.textContent="артикул";const n=document.createElement("div");n.textContent=e.item;const d=document.createElement("div");d.textContent="результат";const c=document.createElement("div");return c.textContent=e.message,t.appendChild(a),t.appendChild(n),t.appendChild(d),t.appendChild(c),t}},1499:(e,t,a)=>{function n(e,t){t.value=JSON.stringify(e)}a.d(t,{D:()=>n})},1836:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{i:()=>u,j:()=>p});var d=a(7728),c=a(8063),i=a(9546),r=a(8664),o=a(8007),s=a(6872),l=e([s,o]);function p(){const e=m("Загрузить csv файл");e.fileInput.name="csv_file",e.fileInput.accept=".csv",e.buttonSubmit.addEventListener("click",s.O)}async function u(){const e=m("Загрузить несколько фото"),t=await(0,o.h)({fieldName:{field:"goods",foreignClass:"Goods",null:!1}});t.style.marginTop="8px",e.form.querySelector(".modal__button-block").insertAdjacentElement("beforebegin",t),e.fileInput.name="files",e.fileInput.accept="image/png, image/jpeg, image/jpg",e.fileInput.multiple=!0,e.buttonSubmit.addEventListener("click",s.f)}function m(e){const t=document.querySelector(".service"),a=document.createElement("dialog");a.classList.add("catalogue__modal"),a.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,d.O)(a)}));const n=(0,c.h)(a,"",0);n.firstElementChild.textContent=e,a.appendChild(n);const o=document.createElement("form");o.id="catalogueDialog",o.classList.add("modal__form"),o.enctype="multipart/form-data";const s=document.createElement("div");s.classList.add("catalogue__input-frame");const l=document.createElement("input");l.classList.add("catalogue__modal_file-input"),l.type="file",s.appendChild(l),o.appendChild(s);const p=document.createElement("div");p.classList.add("error-message"),p.textContent="Error",o.appendChild(p),o.appendChild((0,i._)(a,0)),a.appendChild(o);const u=o.querySelector(".submit");return t.appendChild(a),l.addEventListener("change",(()=>{p.textContent="",p.style.display="none"})),a.showModal(),(0,r.Y)(a),{form:o,fileInput:l,buttonSubmit:u}}[s,o]=l.then?(await l)():l,n()}catch(_){n(_)}}))},2428:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{I:()=>h});var d=a(816),c=a(1211),i=a(8264),r=a(5597),o=a(1499),s=a(1369),l=a(3797),p=a(6352),u=a(9370),m=a(9410),_=e([d,s,m,l]);async function h(e,t){t.enctype="multipart/form-data",t.classList.add("catalogue","catalogue__row"),t.appendChild((0,r.t)("number","id",e.id));const a=(0,r.t)("checkbox","deleted",e.deleted);a.addEventListener("change",(e=>(0,u.W)(e))),t.appendChild(a);const n=document.createElement("textarea");n.value=e.name,n.name="name",n.classList.add("catalogue__input"),n.readOnly=!0,t.appendChild(n),t.appendChild((0,r.t)("text","item_article",e.item_article));const _=document.createElement("div");_.classList.add("catalogue__input","main_color_text"),_.textContent=e.main_color_text,t.appendChild(_),t.appendChild((0,r.t)("text","main_color__id",e.main_color__id)),t.appendChild((0,r.t)("number","goods_option__id",e.goods_option__id));const h=document.createElement("div");h.classList.add("catalogue__input","goods_option__name"),h.textContent=e.goods_option__name,t.appendChild(h);const y=document.createElement("img");y.classList.add("catalogue__img"),y.alt=e.item_article,y.loading="lazy",y.src="/static/viki_web_cms/files/item_photo/"+e.image,t.appendChild(y);const f=(0,r.t)("checkbox","simple_article",e.simple_article);0===e.id&&(f.checked=!0),f.addEventListener("change",(e=>(0,p.O)(e))),t.appendChild(f);const v=await(0,d.M)("Goods",e.goods__id,!1);t.appendChild(v);const C=v.querySelector("input[hidden]");C.name="goods__id",C.addEventListener("change",(e=>(0,p.O)(e)));const g=document.createElement("div");g.classList.add("catalogue__file");const E=document.createElement("div");E.textContent=e.image,E.classList.add("catalogue__file_text"),g.appendChild(E);const b=document.createElement("div");b.classList.add("catalogue__input-frame");const L=document.createElement("input");L.classList.add("catalogue__file_input"),L.type="file",L.name="image",L.accept="image/png, image/jpeg, image/jpg",L.addEventListener("change",(async e=>await(0,s.b)(e,E,C.value,f.checked?1:0,y))),b.appendChild(L),g.appendChild(b),t.appendChild(g);const w=document.createElement("div");w.classList.add("catalogue__btn-block");const S=(0,c.E)("");S.disabled=!0,S.classList.add("tooltip","btn__disabled"),S.innerHTML='<i class="catalogue__icon fa-solid fa-check"></i><span class="tooltip-text">сохранить</span>',S.addEventListener("click",(e=>(0,m.c)(e,S)));const k=(0,i.T)("");k.classList.add("tooltip","btn__disabled"),k.disabled=!0,k.innerHTML='<i class="catalogue__icon fa-solid fa-x"></i><span class="tooltip-text">отменить</span>',k.addEventListener("click",(e=>(0,l.N)(e))),w.appendChild(S),w.appendChild(k),t.appendChild(w);const x=(0,r.t)("text","colors","");x.hidden=!0,t.appendChild(x),e.colors&&(0,o.D)(e.colors,x)}[d,s,m,l]=_.then?(await _)():_,n()}catch(y){n(y)}}))},2472:(e,t,a)=>{function n(e){const t=document.createElement("img");return t.classList.add("modal__content_image"),t.src=e.url+e.fieldValue,t.alt=e.fieldName.field,t}a.d(t,{O:()=>n})},2788:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{x:()=>o});var d=a(2830),c=a(4708),i=a(8645),r=e([i,d]);async function o(e,t){const a=t.closest(".dictionary-frame__header").parentElement,n=a.querySelector(".dictionary-frame__input").value,r=(0,c.Z)(n),o=a.querySelector(".check-deleted");"Catalogue"===e?await(0,i.l)(a,o,t,r):await(0,d.n)(a,e,o,t,r)}[i,d]=r.then?(await r)():r,n()}catch(s){n(s)}}))},2814:(e,t,a)=>{function n(){const e=document.createElement("div");return e.classList.add("dictionary-content__square"),e}a.d(t,{N:()=>n})},2830:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{n:()=>i});var d=a(897),c=e([d]);async function i(e,t,a,n,c){let i=e.querySelector(".dictionary-content");const r=i.dataset.grid;i.remove();const o=n&&n.checked?1:0;i=await(0,d.Q)(t,r,a.checked?0:1,o,c),e.appendChild(i)}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},2868:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Q:()=>i});var d=a(1836),c=e([d]);async function i(e){"Catalogue"===e&&(0,d.j)()}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},2907:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{I:()=>h});var d=a(4859),c=a(2868),i=a(7847),r=a(4087),o=a(6467),s=a(1211),l=a(9132),p=a(8264),u=a(5095),m=a(2788),_=e([c,m,r,l,u]);function h(e,t,a,n,_=!0){const h=document.createElement("div");h.classList.add("dictionary-frame__header");const y=document.createElement("div");y.classList.add("dictionary-frame__header_left"),y.textContent=t,h.appendChild(y);const f=document.createElement("div");if(f.classList.add("dictionary-frame__header_right"),a){const t=(0,d.C)("Загрузить CSV");t.addEventListener("click",(()=>(0,c.Q)(e))),f.appendChild(t)}if(n){const t=(0,i.G)(!1);t.id=e+"-new",t.addEventListener("change",(()=>(0,m.x)(e,t))),t.classList.add("check-new"),f.appendChild(t);const a=document.createElement("label");a.htmlFor=e+"-new",a.classList.add("dictionary-frame__label"),a.textContent="только новые",f.appendChild(a)}if(_){const t=(0,i.G)(!0);t.id=e+"-deleted",t.addEventListener("change",(()=>(0,r.m)(e,t))),t.classList.add("check-deleted"),f.appendChild(t);const a=document.createElement("label");a.htmlFor=e+"-deleted",a.classList.add("dictionary-frame__label"),a.textContent="скрыть удаленные",f.appendChild(a)}f.insertAdjacentHTML("beforeend",o.q);const v=document.createElement("input");v.classList.add("dictionary-frame__input"),v.type="text",v.placeholder="поиск...",v.addEventListener("keypress",(t=>{"Enter"===t.key&&(0,l.n)(t.target,e)})),f.appendChild(v);const C=(0,s.E)("Поиск");C.addEventListener("click",(t=>(0,l.n)(t.target,e)));const g=(0,p.T)("Очистить");return g.addEventListener("click",(t=>(0,u.k)(t.target,e))),f.appendChild(C),f.appendChild(g),h.appendChild(f),h.dataset.class=e,h.dataset.title=t,h}[c,m,r,l,u]=_.then?(await _)():_,n()}catch(y){n(y)}}))},2952:(e,t,a)=>{function n(e){const t=document.createElement("input");return t.type=e,t.classList.add("modal__content_"+e),t}a.d(t,{k:()=>n})},3126:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{y:()=>r});var d=a(1057),c=a(4708),i=e([d]);async function r(e){const t=e.target,a=t.dataset.lastId,n=t.closest(".content"),i=n.querySelector(".dictionary-frame__input").value,r=n.querySelector(".check-deleted"),o=n.querySelector(".check-new"),s=n.querySelector(".catalogue__content");await(0,d.D)(s,r.checked?1:0,o.checked?1:0,a,(0,c.Z)(i),0)}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},3232:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{o:()=>u});var d=a(4449),c=a(9336),i=a(4859),r=a(483),o=a(449),s=a(8264),l=a(1211),p=e([r,d,c,o]);async function u(e){const t=document.querySelector(".dictionary-frame__header_left"),a=await(0,r.nA)();t.appendChild(a);const n=a.querySelector("input"),p=a.querySelector("input[hidden]"),u=(0,i.C)("Новый прайс");t.appendChild(u);const m=(0,s.T)("Выгрузить прайс");t.appendChild(m),p.addEventListener("change",await d.h),u.addEventListener("click",c.C);const _=document.querySelector(".dictionary-frame__header_right");_.firstElementChild.remove(),_.firstElementChild.remove();const h=document.createElement("label");h.htmlFor="priceType",h.textContent="тип цены";const y=(0,r.n6)([{id:1,value:"стандарт"},{id:2,value:"от объема"},{id:3,value:"нанесение"}]);y.id="priceType",y.addEventListener("change",await d.h),_.insertAdjacentElement("afterbegin",y),_.insertAdjacentElement("afterbegin",h);const f=document.createElement("div");f.classList.add("price-block");const v=y.querySelector("input[hidden]").value,C=await(0,o.p)(n.value,v,"None");f.appendChild(C.header),f.appendChild(C.form),_.querySelector(".dictionary-frame__input").remove(),_.querySelector(".btn__save").remove(),_.querySelector(".btn__cancel").remove();const g=document.createElement("input");g.classList.add("dictionary-frame__input"),g.type="text",g.placeholder="поиск...",g.addEventListener("keypress",(e=>{"Enter"===e.key&&e.target.value&&(0,d.h)()})),_.appendChild(g);const E=(0,l.E)("Поиск");E.addEventListener("click",d.h),_.appendChild(E);const b=(0,s.T)("Очистить");return b.addEventListener("click",(e=>{g.value="",(0,d.h)()})),_.appendChild(b),f}[r,d,c,o]=p.then?(await p)():p,n()}catch(m){n(m)}}))},3682:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{V:()=>l});var d=a(6744),c=a(7245),i=a(897),r=a(6332),o=a(6825),s=e([c,o,i]);async function l(e,t,a,n,s,l){if(e.classList.toggle("text-active"),document.getElementById(t))document.getElementById(t).classList.toggle("invisible");else{const d=document.querySelector(".content__right"),s=await(0,c.K)(t,e.textContent,a,n),l=await(0,o.G)(t),p=(0,r.I)(l),u=await(0,i.Q)(t,p,0,0,"None");s.appendChild(u),d.appendChild(s)}(0,d.P)(s,l)}[c,o,i]=s.then?(await s)():s,n()}catch(p){n(p)}}))},3757:(e,t,a)=>{a.d(t,{D:()=>d});var n=a(8316);function d(e){return fetch(e,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":(0,n.m)()}}).then((e=>e.json()))}},3797:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{N:()=>o});var d=a(7310),c=a(3757),i=a(2428),r=e([d,i]);async function o(e){const t=e.target.closest("form"),a=t.querySelector('input[name="id"]').value;if("0"===a){t.remove();const e=document.querySelector(".catalogue__title").querySelector(".btn__save");e.disabled=!1,e.classList.remove("btn__disabled")}else{t.innerHTML="";const e=d.e+"catalogue_record/"+a,n=await(0,c.D)(e);await(0,i.I)(n.values[0],t)}}[d,i]=r.then?(await r)():r,n()}catch(s){n(s)}}))},3913:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{N:()=>o});var d=a(7310),c=a(4449),i=a(8316),r=e([d,c]);async function o(e){const t=document.querySelector(".content"),a=t.querySelector(".dictionary-frame__header_left").querySelector("input[hidden]").value,n=(t.querySelector(".dictionary-frame__header_right").querySelector("input[hidden]").value,document.querySelectorAll("input.price-row__item:not(.price-row__item_disabled)")),r=Array.from(n),o={goods:[],item:[]};let s;r.forEach((e=>{s={},Object.entries(e.dataset).forEach((([e,t])=>{Number.parseInt(t)?s[e]=Number.parseInt(t):s[e]=t})),s.Price__price_list__id=Number.parseInt(a),s.price=Number.parseFloat(e.value),delete s.discount,o[e.dataset.class].push(s),delete s.class}));const l=d.e+"price_list_save";fetch(l,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,i.m)()},body:JSON.stringify(o)}).then((e=>e.json())).then((e=>{e.error||(0,c.h)()}))}[d,c]=r.then?(await r)():r,n()}catch(s){n(s)}}))},4085:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{H:()=>g});var d=a(1316),c=a(9227),i=a(7164),r=a(8007),o=a(2472),s=a(6825),l=a(7310),p=a(3757),u=a(6977),m=a(905),_=a(7541),h=a(304),y=a(7475),f=a(4821),v=e([r,s,l]);[r,s,l]=v.then?(await v)():v;const C={string:d.K,boolean:c.r,number:i.y,float:_.P,precise:h.I,foreign:r.h,image:o.O,file:u.B,date:y.d,textarea:f.n};async function g(e,t,a){const n=document.createElement("div");n.classList.add("modal__content");const d=await(0,s.G)(t);let c;const i=l.e+"record_info/"+t+"/"+a,r=await(0,p.D)(i);for(const e of d){let t={fieldName:e,fieldValue:null,url:r.url};"0"!==a&&("foreign"!==e.type?e.property_off?t.fieldValue=r.record[e.property_off]:t.fieldValue=r.record[e.field]:t.fieldValue=r.record[e.field+"_id"]),n.appendChild((0,m.d)(e)),c=await C[e.type](t),n.appendChild(c)}return n}n()}catch(E){n(E)}}))},4087:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{m:()=>o});var d=a(2830),c=a(4708),i=a(8645),r=e([i,d]);async function o(e,t){const a=t.closest(".dictionary-frame__header").parentElement,n=a.querySelector(".dictionary-frame__input").value,r=a.querySelector(".check-new"),o=(0,c.Z)(n);"Catalogue"===e?await(0,i.l)(a,t,r,o):await(0,d.n)(a,e,t,r,o)}[i,d]=r.then?(await r)():r,n()}catch(s){n(s)}}))},4114:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{f:()=>i});var d=a(897),c=e([d]);async function i(e){const t="14px 1.5fr 4fr 1fr 1fr 1fr 3fr 3fr 3fr 2fr 2fr 1fr 1fr 1fr 1fr 1fr 1.5fr",a=await(0,d.Q)(e,t,0,0,"None");return a.id=e,a.dataset.grid=t,a}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},4189:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{N:()=>m,R:()=>_});var d=a(7310),c=a(3757),i=a(483),r=a(1211),o=a(4859),s=a(8264),l=a(3913),p=a(8316),u=e([d,l,i]);async function m(e,t){const a=document.createElement("div");a.classList.add("price-content");const n=d.e+"standard_price_data/"+e+"/"+t,i=await(0,c.D)(n),r="0.8fr 3.2fr repeat("+i.price_type_length+", 1fr) 160px 120px",o=await(0,c.D)(d.e+"all_items_all_items_for_dropdown"),s=await _(i.header,r);return await h(i.form,a,i.header,o,r),{form:a,header:s}}async function _(e,t){const a=document.createElement("header");a.classList.add("price-header"),a.style.gridTemplateColumns=t;const n=document.createElement("div");n.classList.add("price-header__item"),n.textContent="Артикул",a.appendChild(n);const d=document.createElement("div");let c;d.classList.add("price-header__item"),d.textContent="Товар",a.appendChild(d),e.forEach((e=>{c=document.createElement("div"),c.textContent=e.price_name__name,c.classList.add("price-header__item"),a.appendChild(c)}));const i=(0,o.C)("Загрузить csv");a.appendChild(i);const s=(0,r.E)("Сохранить");return a.appendChild(s),s.addEventListener("click",await l.N),a}function h(e,t,a,n,d){let c,i,r;e.goods.forEach((o=>{c=y(o,a,n,d),t.appendChild(c),r=e.items.filter((e=>o.id===e.goods__id&&"[]"!==e.price)),r.forEach((e=>{i=f(e,a,d),t.appendChild(i)}))}))}function y(e,t,a,n){const d=v(e,t,"goods","goods",n),c=a.filter((t=>t.goods__id===e.id));d.appendChild((0,i.n6)(c));const r=(0,s.T)("Добавить цвет");return r.addEventListener("click",(()=>{const e=d.querySelector(".price-dropdown").querySelector("input[hidden]").value,a=d.querySelector(".price-dropdown__input").value,[n,...c]=a.split(" ");if(!Array.from(document.querySelectorAll('div[data-type="item"] input[hidden]')).find((t=>t.value===e))){const a={id:e,article:n,name:c.join(" "),price:"[]"};d.insertAdjacentElement("afterend",f(a,t))}})),d.appendChild(r),d}function f(e,t,a){const n=v(e,t,"item","catalogue_item",a);n.classList.add("price-row__item-row"),n.style.gridTemplateColumns=a;const c=(0,s.T)("Убрать позицию");return c.addEventListener("click",(async e=>{e.preventDefault();const t=n.querySelector('input[name="id"]').value;fetch(d.e+"delete_item_price_row/"+t,{headers:{"X-CSRFToken":(0,p.m)()}}).then((e=>e.json())).then((e=>{e&&n.remove()}))})),n.appendChild(c),n}function v(e,t,a,n,d){const c=document.createElement("div");c.dataset.type=a,c.classList.add("price-row"),c.style.gridTemplateColumns=d;const i=document.createElement("input");i.type="text",i.hidden=!0,i.name="id",i.value=e.id,c.appendChild(i);const r=document.createElement("div");r.classList.add("price-row__name"),r.textContent=e.article,c.appendChild(r);const o=document.createElement("div");let s;return o.classList.add("price-row__name"),o.textContent=e.name,c.appendChild(o),t.forEach((t=>{s=document.createElement("input"),s.classList.add("price-row__item","price-row__item_disabled"),s.type="number",s.step="0.01",s.lang="en";const d=JSON.parse(e.price).find((e=>"price_type__id"in e&&e.price_type__id===t.price_name__id));s.dataset.class=a,s.dataset.id=d?d.id:"",s.setAttribute("data-"+n+"__"+a+"__id",e.id),s.dataset.standard_price_type__price_type__id=t.price_name__id,s.dataset.discount=t.discount,s.value=d?d.price:"",s.readOnly=!0,s.addEventListener("dblclick",(e=>{const t=document.querySelector(".dictionary-frame__header_right"),a=t.querySelector(".dictionary-frame__input"),n=t.querySelector(".btn__save");e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled"),a.disabled=!0,n.disabled=!0,n.classList.add("btn__disabled")})),s.addEventListener("change",(e=>{e.target.readOnly=!0})),"1"===s.dataset.discount&&s.addEventListener("change",(e=>{c.querySelectorAll('input[type="number"]').forEach((t=>{"1"!==t.dataset.discount&&(t.value=(Math.ceil(e.target.value*Number.parseFloat(t.dataset.discount)*100)/100).toFixed(2),t.dispatchEvent(new Event("dblclick",{bubbles:!0})),e.target.classList.remove("price-row__item_disabled"))}))})),c.appendChild(s)})),c}[d,l,i]=u.then?(await u)():u,n()}catch(C){n(C)}}))},4256:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{g:()=>p});var d=a(1211),c=a(7979),i=a(1057),r=a(2428),o=a(4859),s=a(1836),l=e([s,r,i]);async function p(e){const t=document.querySelector(".dictionary-frame__header_right"),a=(0,o.C)("Загрузить несколько фото");a.addEventListener("click",await s.i),t.insertAdjacentElement("afterbegin",a);const n=document.createElement("div"),l=document.createElement("div");let p;l.classList.add("catalogue","catalogue__title"),c.t.forEach((e=>{p=document.createElement("p"),p.classList.add("catalogue__title-item"),p.textContent=e.label,l.appendChild(p)}));const u=(0,d.E)("Новый");u.addEventListener("click",(async e=>{e.target.disabled=!0,e.target.classList.add("btn__disabled");const t=document.createElement("form");await(0,r.I)({id:0},t);const a=t.querySelector(".btn__cancel");a.disabled=!1,a.classList.remove("btn__disabled"),m.insertAdjacentElement("afterbegin",t),t.scrollIntoView({behavior:"smooth"}),t.focus()})),l.appendChild(u),n.appendChild(l);const m=document.createElement("div");return m.classList.add("catalogue__content"),await(0,i.D)(m,0,0,0,"None",0),n.appendChild(m),n}[s,r,i]=l.then?(await l)():l,n()}catch(u){n(u)}}))},4449:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{h:()=>i});var d=a(449),c=e([d]);async function i(e){const t=document.querySelector(".content"),a=t.querySelector(".dictionary-frame__header_right"),n=a.querySelector(".dictionary-frame__input"),c=a.querySelector(".btn__save");n.disabled=!1,c.disabled=!1,c.classList.remove("btn__disabled");const i=t.querySelector(".price-block"),r=t.querySelector(".dictionary-frame__header_left").querySelector(".price-dropdown__input").value,o=n.value,s=t.querySelector(".dictionary-frame__header_right").querySelector("input[hidden]").value;i&&(i.innerHTML="");const l=await(0,d.p)(r,s,o);i.appendChild(l.header),i.appendChild(l.form)}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},4708:(e,t,a)=>{function n(e){let t=e;return function(e){return/^[a-zA-Zа-яА-ЯёЁ0-9 ._#]*$/.test(e)}(e)&&e||(t="None"),t.replace(/ /g,"|")}a.d(t,{Z:()=>n})},4821:(e,t,a)=>{function n(e){const t=document.createElement("textarea");return t.classList.add("modal__content_textarea"),t.value=e.fieldValue,t.name=e.fieldName.field,t}a.d(t,{n:()=>n})},4859:(e,t,a)=>{function n(e){const t=document.createElement("button");return t.classList.add("btn","btn__neutral"),t.textContent=e,t}a.d(t,{C:()=>n})},5095:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{k:()=>r});var d=a(2830),c=a(8645),i=e([c,d]);async function r(e,t){const a=e.closest(".dictionary-frame__header").parentElement;a.querySelector(".dictionary-frame__input").value="";const n=a.querySelector(".check-deleted"),i=a.querySelector(".check-new");"Catalogue"===t?await(0,c.l)(a,n,i,"None"):await(0,d.n)(a,t,n,i,"None")}[c,d]=i.then?(await i)():i,n()}catch(o){n(o)}}))},5352:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Z:()=>s});var d=a(6723),c=a(6332),i=a(6825),r=a(7502),o=e([i,d,r]);async function s(e,t,a,n,o,s){const l=await(0,i.G)(t),p="Goods"!==t?(0,c.I)(l):"14px 1.5fr 4fr 1fr 1fr 1fr 3fr 3fr 3fr 2fr 2fr 1fr 1fr 1fr 1fr 1fr 1.5fr",u=e.closest(".dictionary-content__rows");[...(await(0,d.Y)(t,a,n,s,o,p)).children].forEach((e=>{u.appendChild(e)}));const m=e.cloneNode(!0);e.parentNode.replaceChild(m,e),m.querySelector("button").addEventListener("click",(e=>(0,r.w)(e)))}[i,d,r]=o.then?(await o)():o,n()}catch(l){n(l)}}))},5364:(e,t,a)=>{async function n(e){return document.createElement("div")}a.d(t,{U:()=>n})},5597:(e,t,a)=>{function n(e,t,a){const n=document.createElement("input");return"precise"===e?(n.type="number",n.step="0.0001"):"float"===e?(n.type="number",n.step="0.01"):n.type=e,n.name=t,"id"===t.slice(-2)&&(n.hidden=!0),"checkbox"===e?(n.checked=a,n.classList.add("check","catalogue__check")):(n.value=a,n.readOnly=!0,n.classList.add("catalogue__input")),n}a.d(t,{t:()=>n})},5800:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{s:()=>o});var d=a(7310),c=a(3757),i=a(4189),r=e([d,i]);async function o(e,t){const a=document.createElement("div");a.classList.add("price-content");const n=d.e+"volume_price_data/"+e+"/"+t,r=await(0,c.D)(n),o="0.8fr 3.2fr repeat("+r.price_type_length+", 1fr) 120px 102px",l=await(0,i.R)(r.header,o);return s(r.form,a,r.header,r.form.volumes,o),{form:a,header:l}}function s(e,t,a,n,d){n.forEach((n=>{const c=document.createElement("div");c.classList.add("price-content__volume-header"),c.textContent="Количество "+n.name+" шт",t.appendChild(c);const i=document.createElement("div");i.appendChild(l(e,a,n,d)),t.appendChild(i)}))}function l(e,t,a,n){const d=document.createElement("div");return e.goods.forEach((e=>{d.appendChild(p(e,t,a,n))})),d}function p(e,t,a,n){const d=document.createElement("div");d.classList.add("price-row"),d.style.gridTemplateColumns=n;const c=document.createElement("input");c.type="text",c.hidden=!0,c.name="id",c.value=e.id,d.appendChild(c);const i=document.createElement("div");i.classList.add("price-row__name"),i.textContent=e.article,d.appendChild(i);const r=document.createElement("div");let o;return r.classList.add("price-row__name"),r.textContent=e.name,d.appendChild(r),t.forEach((t=>{o=document.createElement("input"),o.classList.add("price-row__item","price-row__item_disabled"),o.type="number",o.step="0.01",o.lang="en";const n=JSON.parse(e.price).find((e=>"price_type__id"in e&&e.price_type__id===t.price_name__id&&e.price_volume__id===a.id));o.dataset.class="goods",o.dataset.id=n?n.id:"",o.setAttribute("data-goods__goods__id",e.id),o.dataset.standard_price_type__price_type__id=t.price_name__id,o.dataset.price_goods_quantity__price_volume__id=a.id,o.value=n?n.price:"",o.readOnly=!0,o.addEventListener("dblclick",(e=>{const t=document.querySelector(".dictionary-frame__header_right"),a=t.querySelector(".dictionary-frame__input"),n=t.querySelector(".btn__save");e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled"),a.disabled=!0,n.disabled=!0,n.classList.add("btn__disabled")})),o.addEventListener("change",(e=>{e.target.readOnly=!0})),d.appendChild(o)})),d}[d,i]=r.then?(await r)():r,n()}catch(u){n(u)}}))},6332:(e,t,a)=>{function n(e){let t="14px 6fr ";return e.forEach((e=>{"name"!==e.field&&("boolean"===e.type||"number"===e.type||"float"===e.type||"precise"===e.type?t+="1fr ":"textarea"===e.type?t+="6fr ":t+="3fr ")})),t+="80px",t}a.d(t,{I:()=>n})},6352:(e,t,a)=>{function n(e){const t=e.target.closest("form").querySelector('input[type="file"]');t.value="",t.dispatchEvent(new Event("change",{bubbles:!0}))}a.d(t,{O:()=>n})},6467:(e,t,a)=>{a.d(t,{q:()=>n});const n='<i class="fa fa-solid fa-magnifying-glass"></i>'},6686:(e,t,a)=>{a.d(t,{a:()=>_});var n=a(8664),d=a(7728),c=a(3757),i=a(1211),r=a(8264),o=a(8316),s=a(2952);function l(e,t){let a;a=p(t.last_name),e.appendChild(a),a=p(t.first_name),e.appendChild(a),a=p(t.email),e.appendChild(a),a=p(t.phone),e.appendChild(a),a=p(t.alias),a.classList.add("alias"),e.appendChild(a),e.appendChild(function(e){const t=document.createElement("input");return t.type="checkbox",t.classList.add("check","user-element__check"),t.checked=e||!1,t.disabled=!0,t}(t.new)),a=p(t.customer),a.classList.add("customer"),e.appendChild(a);const l=(0,i.E)("Изм");l.dataset.id=t.id,l.addEventListener("click",(async t=>{await async function(e,t){const a=e.target.dataset.id;try{const e=await(0,c.D)(`/cms/json/user_extension_item/${a}`);if(!e)return void console.error("Failed to fetch user data");!function(e,t){const a=document.createElement("dialog");a.classList.add("modal");const c=document.createElement("div");c.classList.add("modal__header"),c.textContent="Редактирование пользователя",a.appendChild(c);const l=document.createElement("form");l.classList.add("modal__form"),a.appendChild(l);const p=document.createElement("div");p.classList.add("modal__content"),l.appendChild(p);const u=document.createElement("label");u.textContent="eMail-alias",u.classList.add("modal-content__label"),u.htmlFor="alias",p.appendChild(u);const m=(0,s.k)("text");m.value=e.alias,m.name="alias",m.id="alias",p.appendChild(m);const _=document.createElement("label");_.textContent="Новый:",_.classList.add("modal-content__label"),_.htmlFor="user-new-status",p.appendChild(_);const h=document.createElement("input");h.type="checkbox",h.classList.add("modal__content_checkbox"),h.checked=e.new||!1,h.id="user-new-status",h.name="new",p.appendChild(h);const y=document.createElement("label");y.textContent="Клиент:",y.classList.add("modal-content__label"),y.htmlFor="customer",p.appendChild(y);const f=document.createElement("div");f.classList.add("dropdown"),function(e,t,a){const n=document.createElement("input");n.type="text",n.classList.add("modal__content_text","dropdown__input");const d=document.createElement("input");d.type="text",d.name="customer",d.hidden=!0;const c=a.find((e=>e.id.toString()===t.toString()));c&&(n.value=c.value,d.value=c.id),e.appendChild(n),e.appendChild(d),e.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const i=document.createElement("ul");i.classList.add("dropdown__list","invisible"),a.forEach((e=>{const t=document.createElement("li");t.classList.add("dropdown__list_item"),t.value=e.id,t.textContent=e.value,t.addEventListener("click",(e=>{n.value=e.target.textContent,d.value=e.target.value,d.dispatchEvent(new Event("change",{bubbles:!0})),i.classList.add("invisible")})),i.appendChild(t)})),e.appendChild(i),n.addEventListener("click",(()=>{i.classList.toggle("invisible")})),n.addEventListener("keyup",(e=>{const t=e.target.value.toUpperCase(),c=a.filter((e=>e.value.toUpperCase().indexOf(t)>-1));i.innerHTML="",c.forEach((e=>{const t=document.createElement("li");t.classList.add("dropdown__list_item"),t.value=e.id,t.textContent=e.value,t.addEventListener("click",(e=>{n.value=e.target.textContent,d.value=e.target.value,d.dispatchEvent(new Event("change",{bubbles:!0})),i.classList.add("invisible")})),i.appendChild(t)}))}))}(f,e.customer_id,e.customers),p.appendChild(f);const v=document.createElement("div");v.classList.add("modal__button-block");const C=(0,r.T)("Отменить");C.addEventListener("click",(()=>{(0,d.O)(a)})),v.appendChild(C);const g=(0,i.E)("Сохранить");g.addEventListener("click",(async a=>{a.preventDefault(),await async function(e,t,a,n,c,i){const r=e.closest("dialog");try{const s=new FormData(e);if(a===Number.parseInt(s.get("customer"))&&n===("on"===s.get("new"))&&c===s.get("alias"))return void(0,d.O)(r);const l=await fetch(`/cms/json/update_user_extension/${t}`,{method:"POST",body:s,headers:{"X-CSRFToken":(0,o.m)()}});if(l.ok){const e=await l.json();e.success?(i.querySelector('input[type="checkbox"]').checked=e.new,i.querySelector(".alias").textContent=e.alias,i.querySelector(".customer").textContent=e.customer,(0,d.O)(r)):console.error("Failed to update user:",e.error)}else console.error("Failed to update user, server returned:",l.status)}catch(e){console.error("Error saving user data:",e)}}(l,e.id,e.customer_id,e.new,e.alias,t)})),v.appendChild(g),l.appendChild(v),document.body.appendChild(a),(0,n.Y)(a),a.showModal()}(e,t)}catch(e){console.error("Error editing user:",e)}}(t,e)})),e.appendChild(l)}function p(e){const t=document.createElement("div");return t.classList.add("dictionary-content__row_item","user-element__cell"),t.textContent=e||"",t}var u=a(35),m=a(8058);async function _(e){const t="user-element__header";(0,u.a)(l,t,"/cms/json/user_extension");const a=await(0,m.J)("dictionary-content",[{title:"Фамилия"},{title:"Имя"},{title:"Email"},{title:"Телефон"},{title:"Email-алиас"},{title:"Новый"},{title:"Клиент"},{title:""}],t,l,"/cms/json/user_extension");return a.id=e,a}},6723:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{R:()=>u,Y:()=>p});var d=a(3757),c=a(7310),i=a(2814),r=a(5352),o=a(8264),s=a(7502),l=e([c,r,s]);async function p(e,t,a,n,i,o){const s=document.createElement("div");s.classList.add("dictionary-content__rows");const l=c.e+"field_values/"+e+"/"+t+"/"+a+"/"+n+"/"+i,p=await(0,d.D)(l);let m=0;return p.values.forEach((d=>{let c=document.createElement("div");u(c,d,p.field_params,e),c.style.gridTemplateColumns=o,s.appendChild(c),m++,20===m&&(c.dataset.lastRecord=n+20,c.addEventListener("mouseover",(d=>(0,r.Z)(d.target,e,t,a,i,n+20))))})),s}function u(e,t,a,n){e.classList.add("dictionary-content__row");const d=(0,i.N)();t.hex&&(d.style.backgroundColor=t.hex),e.appendChild(d),e.id=n+"_row_"+t.id,Object.keys(t).forEach(((n,d)=>{if("id"!==n){let d;Object.keys(a).includes(n)&&"image"===a[n].type?(d=document.createElement("img"),d.classList.add("dictionary-content__row_img"),d.src=a[n].url+t[n],d.alt=t[n]):Object.keys(a).includes(n)&&"boolean"===a[n].type?(d=document.createElement("input"),d.type="checkbox",d.checked=t[n],d.disabled=!0,d.classList.add("dictionary-content__check")):(d=document.createElement("div"),d.classList.add("dictionary-content__row_item"),d.textContent=t[n]),e.appendChild(d)}}));const c=(0,o.T)("Изм.");c.dataset.itemId=t.id,c.addEventListener("click",(e=>(0,s.w)(e))),e.appendChild(c)}[c,r,s]=l.then?(await l)():l,n()}catch(m){n(m)}}))},6744:(e,t,a)=>{function n(e,t){const a=e.querySelector("summary");Array.from(t).some((e=>e.classList.contains("text-active")))?a.classList.add("text-active"):a.classList.remove("text-active")}a.d(t,{P:()=>n})},6825:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{G:()=>r});var d=a(7310),c=a(3757),i=e([d]);async function r(e){const t=d.e+"field_names/"+e;return await(0,c.D)(t)}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},6872:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{O:()=>u,f:()=>m});var d=a(4708),c=a(7310),i=a(7728),r=a(8645),o=a(1401),s=a(8664),l=a(8316),p=e([c,r]);async function u(e){e.preventDefault();const t=e.target.closest("form"),a=new FormData(t),n=Object.fromEntries(a.entries()).csv_file.name,d=t.querySelector(".error-message");n.endsWith(".csv")?await _(e,t,a,"catalogue_csv_load",d):(t.querySelector("input").value="",d.style.display="block",d.textContent="Неправильный формат файла")}async function m(e){e.preventDefault();const t=e.target.closest("form"),a=new FormData(t),n=t.querySelector(".error-message");await _(e,t,a,"catalogue_files_load",n)}async function _(e,t,a,n,p){const u=document.querySelector(".content"),m=u.querySelector(".dictionary-frame__input"),_=(0,d.Z)(m.value),h=u.querySelector(".check-deleted"),y=u.querySelector(".check-new"),f=e.target.closest("dialog"),v=c.e+n;await fetch(v,{method:"POST",headers:{"X-CSRFToken":(0,l.m)()},body:a}).then((e=>e.json())).then((e=>{if(e.error)t.querySelector("input").value="",p.style.display="block",p.textContent=e.error;else{(0,i.O)(f),(0,r.l)(u,h,y,_);const t=(0,o.J)(e);document.querySelector(".service").appendChild(t),t.showModal(),(0,s.Y)(t)}}))}[c,r]=p.then?(await p)():p,n()}catch(h){n(h)}}))},6977:(e,t,a)=>{a.d(t,{B:()=>d});var n=a(2952);function d(e){const t=document.createElement("div");t.classList.add("modal__content_file-frame");const a=(0,n.k)("file");return a.placeholder=e.fieldValue,a.name=e.fieldName.field,t.appendChild(a),t}},7090:(e,t,a)=>{function n(){const e=document.getElementById("userData"),t=JSON.parse(localStorage.getItem("userData"));return e.textContent=t.username,"Авторизуйтесь"!==t.username}a.d(t,{g:()=>n})},7164:(e,t,a)=>{a.d(t,{y:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},7245:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{K:()=>i});var d=a(2907),c=e([d]);async function i(e,t,a,n){const c=document.createElement("section");c.classList.add("dictionary-frame"),c.id=e;const i=(0,d.I)(e,t,a,n);return c.appendChild(i),c}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},7310:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{G:()=>f,e:()=>y});var d=a(8846),c=a(9857),i=a(4114),r=a(4256),o=a(3232),s=a(3757),l=a(7090),p=a(8016),u=a(6686),m=a(2),_=a(5364),h=e([i,r,o,m,d,c]);[i,r,o,m,d,c]=h.then?(await h)():h;const y="./json/",f={Goods:i.f,Catalogue:r.g,PriceList:o.o,UserExtension:u.a,Order:m.r,CustomerGroup:_.U},v=y+"userdata",C=await(0,s.D)(v);localStorage.setItem("userData",JSON.stringify(C)),(0,l.g)()||document.querySelector(".menu__right").addEventListener("click",p.i);const g=document.querySelectorAll(".menu__item"),E=document.querySelector(".content");g.forEach((e=>{e.addEventListener("click",(async t=>{e.classList.contains("menu__item_bold")||(e.classList.add("menu__item_bold"),E.innerHTML="","Standard"===t.target.dataset.page?(0,d.f)(E,e.dataset.content):await(0,c.H)(E,e.dataset.content,t.target.dataset.page)),g.forEach((t=>{t!==e&&t.classList.remove("menu__item_bold")}))}))})),n()}catch(e){n(e)}}),1)},7475:(e,t,a)=>{a.d(t,{d:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("date");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},7502:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{w:()=>r});var d=a(7646),c=a(8664),i=e([d]);async function r(e){e.preventDefault();const t=e.target.closest(".dictionary-content").parentElement.querySelector(".dictionary-frame__header"),a=t.dataset.class,n=t.dataset.title,i=await(0,d.w)(a,n,e.target.dataset.itemId);document.querySelector(".service").appendChild(i),i.showModal(),(0,c.Y)(i),console.log()}d=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},7541:(e,t,a)=>{a.d(t,{P:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t.step="0.01",t}},7646:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{T:()=>_,w:()=>u});var d=a(8063),c=a(9546),i=a(4085),r=a(7310),o=a(7728),s=a(6723),l=a(8316),p=e([i,r,s]);async function u(e,t,a){const n=document.createElement("dialog");n.classList.add("modal"),n.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,o.O)(n)}));const r=(0,d.h)(n,t,a);n.appendChild(r);const s=document.createElement("form");s.id=e+"__form",s.classList.add("modal__form"),s.enctype="multipart/form-data";const l=await(0,i.H)(n,e,a);s.appendChild(l),s.appendChild((0,c._)(n,a)),n.appendChild(s);const p=new FormData(s);return s.querySelector(".submit").addEventListener("click",(t=>m(t,s,e,p))),n}async function m(e,t,a,n){e.preventDefault();const d=e.target.dataset.id,c=t.closest(".modal");c.querySelectorAll("input").forEach((e=>{e.classList.remove("border-alert")})),e.target.disabled=!0;const i=new FormData(t),p=c.querySelector('input[type="file"]');if(!_(i,n)||p){const t=r.e+"edit_dictionary/"+a+"/"+d;await fetch(t,{method:"POST",headers:{"X-CSRFToken":(0,l.m)()},body:i}).then((e=>e.json())).then((t=>{const n=t.errors;if(n){let t;n.forEach((a=>{e.target.disabled=!1,t=c.querySelector(`[name = "${a}"]`),t.hidden?t.previousElementSibling.classList.add("border-alert"):t.classList.add("border-alert"),e.target.scrollIntoView({behavior:"smooth",block:"center"})}))}else{let e;if("0"!==d)e=document.querySelector("#"+a+"_row_"+d),e.innerHTML="";else{let n;e=document.createElement("div"),e.id=a+"_row_"+t.values.id,e.classList.add("dictionary-content__row"),n=document.getElementById(a)?document.getElementById(a).querySelector(".dictionary-content__rows"):document.querySelector(".dictionary-content__rows"),n.insertAdjacentElement("afterbegin",e),e.style.gridTemplateColumns=n.closest(".dictionary-content").dataset.grid}(0,s.R)(e,t.values,t.params,a),e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus(),(0,o.O)(c)}}))}}function _(e,t){const a=Array.from(t.values()),n=Array.from(e.values());return a.sort(),n.sort(),JSON.stringify(a)===JSON.stringify(n)}[i,r,s]=p.then?(await p)():p,n()}catch(h){n(h)}}))},7674:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{c:()=>o});var d=a(7310),c=a(4449),i=a(8316),r=e([d,c]);async function o(e){const t=document.querySelector(".content").querySelector(".dictionary-frame__header_left").querySelector("input[hidden]").value,a=document.querySelectorAll("input.type-table__input:not(.price-row__item_disabled)"),n=[];let r;[...a].forEach((e=>{r={},Object.entries(e.dataset).forEach((([e,t])=>{Number.parseInt(t)?r[e]=Number.parseInt(t):r[e]=t})),r.price_list__id=Number.parseInt(t),r.price=Number.parseFloat(e.value),n.push(r)}));const o=d.e+"printing_price_list_save";fetch(o,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,i.m)()},body:JSON.stringify(n)}).then((e=>e.json())).then((e=>{e.error||(0,c.h)()}))}[d,c]=r.then?(await r)():r,n()}catch(s){n(s)}}))},7728:(e,t,a)=>{function n(e){e.close(),e.remove()}a.d(t,{O:()=>n})},7847:(e,t,a)=>{function n(e){const t=document.createElement("input");return t.type="checkbox",t.checked=e,t.classList.add("check"),t}a.d(t,{G:()=>n})},7979:(e,t,a)=>{a.d(t,{t:()=>n});const n=[{field:"deleted",type:"boolean",label:"уд."},{field:"name",type:"string",label:"название",null:!1},{field:"item_article",type:"string",label:"артикул",null:!1},{field:"main_color",type:"foreign",label:"осн. цвет",foreignClass:"Color",null:!1},{field:"goods_option",type:"foreign",label:"опция",foreignClass:"GoodsOption",null:!1},{field:"image",type:"img",label:"фото",url:"/static/viki_web_cms/files/item_photo/",null:!0},{field:"simple_article",type:"boolean",label:"ст. арт."},{field:"goods",type:"foreign",label:"номенклатура",foreignClass:"Goods",null:!1},{field:"image_file",type:"file",label:"файл",null:!0}]},8007:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{h:()=>i});var d=a(816),c=e([d]);async function i(e){const t=e.fieldName.foreignClass,a=e.fieldValue,n=await(0,d.M)(t,a,e.fieldName.null);return n.querySelector("[hidden]").name=e.fieldName.field+"_id",n}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},8016:(e,t,a)=>{a.d(t,{i:()=>l});var n=a(8063),d=a(8664),c=a(8264),i=a(1211),r=a(7728),o=a(7090),s=a(8316);async function l(){const e=document.createElement("dialog");e.classList.add("login-cms");const t=(0,n.h)(e,"Вход",0);t.firstElementChild.textContent="Вход",e.appendChild(t);const a=document.createElement("input");a.type="text",a.classList.add("login-cms__input"),e.appendChild(a);const p=document.createElement("input");p.type="password",p.classList.add("login-cms__input"),e.appendChild(p),document.querySelector(".service").appendChild(e);const u=document.createElement("div");u.classList.add("login-cms__btn-block");const m=(0,c.T)("Закрыть");m.addEventListener("click",(t=>{(0,r.O)(e)})),u.appendChild(m);const _=(0,i.E)("Войти");_.addEventListener("click",(t=>{!async function(e,t,a,n){e.preventDefault(),await fetch("./user_login",{method:"POST",headers:{"X-CSRFToken":(0,s.m)()},body:JSON.stringify({username:t,password:a})}).then((e=>e.json())).then((e=>{localStorage.setItem("userData",JSON.stringify(e));const t=(0,o.g)(),a=document.querySelector(".menu__right");t?a.removeEventListener("click",l):a.addEventListener("click",l),(0,r.O)(n)}))}(t,a.value,p.value,e)})),u.appendChild(_),e.appendChild(u),e.showModal(),(0,d.Y)(e),document.querySelector(".menu-right")}},8058:(e,t,a)=>{a.d(t,{J:()=>d});var n=a(9712);async function d(e,t,a,d,c){const i=document.createElement("div");i.classList.add(e);const r=function(e,t){const a=document.createElement("div");return a.classList.add("dictionary-content__title",t),e.forEach((e=>{const t=document.createElement("div");t.classList.add("dictionary-content__title_item","user-element__header-item"),t.textContent=e.title,a.appendChild(t)})),a}(t,a);i.appendChild(r);const o=document.createElement("div");return o.classList.add("dictionary-content__rows"),await(0,n.O)(o,0,"",!1,d,a,c),i.appendChild(o),i}},8063:(e,t,a)=>{a.d(t,{h:()=>d});var n=a(7728);function d(e,t,a){const d=document.createElement("div");d.classList.add("modal__header");let c=t;c="0"===a?"Создать "+c:"Изменить "+c;const i=document.createElement("div");i.textContent=c,d.appendChild(i);const r=document.createElement("button");return r.classList.add("modal__header_btn"),r.textContent="×",r.addEventListener("click",(t=>{t.preventDefault(),(0,n.O)(e)})),d.appendChild(r),d}},8264:(e,t,a)=>{function n(e){const t=document.createElement("button");return t.classList.add("btn","btn__cancel"),t.textContent=e,t}a.d(t,{T:()=>n})},8316:(e,t,a)=>{function n(){return document.cookie.split("; ").find((e=>e.startsWith("csrftoken=")))?.split("=")[1]}a.d(t,{m:()=>n})},8645:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{l:()=>i});var d=a(1057),c=e([d]);async function i(e,t,a,n){const c=e.querySelector(".catalogue__content");c.innerHTML="",await(0,d.D)(c,t.checked?0:1,a.checked?0:1,0,n,0)}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},8664:(e,t,a)=>{function n(e){let t,a,n=!1;e.querySelector(".modal__header").addEventListener("mousedown",(d=>{n=!0,t=d.clientX-e.offsetLeft,a=d.clientY-e.offsetTop,e.style.cursor="grabbing"})),document.addEventListener("mousemove",(d=>{n&&(e.style.left=d.clientX-t+"px",e.style.top=d.clientY-a+"px")})),document.addEventListener("mouseup",(()=>{n=!1,e.style.cursor="grab"}))}a.d(t,{Y:()=>n})},8833:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{h:()=>l});var d=a(7310),c=a(4859),i=a(1211),r=a(3757),o=a(7674),s=e([d,o]);async function l(e,t){const a=document.querySelector(".dictionary-frame__header_right"),n=a.querySelector(".dictionary-frame__input"),c=a.querySelector(".btn__save"),i=a.querySelector(".btn__cancel");n.disabled=!0,c.disabled=!0,c.classList.add("btn__disabled"),i.disabled=!0,i.classList.add("btn__disabled");const o=document.createElement("div");o.classList.add("price-content");const s=await p(),l=d.e+"printing_price_data/"+e;let _;return(await(0,r.D)(l)).priceData.forEach((e=>{const t=document.createElement("div");t.classList.add("type-table"),_="2fr repeat("+e.print_volume_length+", 1fr)",t.appendChild(u(e,_)),e.print_groups.forEach((a=>{t.appendChild(m(a,_,e.print_volume_data))})),o.appendChild(t)})),{form:o,header:s}}async function p(){const e=document.createElement("div");e.classList.add("print-header");const t=(0,c.C)("Загрузить csv");e.appendChild(t);const a=(0,i.E)("Сохранить");return e.appendChild(a),a.addEventListener("click",await o.c),e}function u(e,t){let a;const n=document.createElement("div");return n.classList.add("type-table__row","type-table__header"),n.style.gridTemplateColumns=t,a=document.createElement("div"),n.appendChild(a),a.textContent=e.print_type__name,e.print_volume_data.forEach((e=>{a=document.createElement("div"),a.textContent="до "+e.quantity,n.appendChild(a)})),n}function m(e,t,a){const n=document.createElement("div");n.classList.add("type-table__row"),n.style.gridTemplateColumns=t;const d=document.createElement("div");return d.classList.add("type-table__item"),d.textContent=e.print_price_group__name,n.appendChild(d),a.forEach((t=>{n.appendChild(_(e,t))})),n}function _(e,t){const a=document.createElement("input");a.type="number",a.classList.add("type-table__input","price-row__item_disabled"),a.readOnly=!0,a.addEventListener("dblclick",(e=>{e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled")}));const n=e.prices.find((e=>e.print_volume__id===t.print_volume_id));return a.dataset.id=n?n.price__id:"",a.dataset.print_volume__id=t.print_volume_id,a.dataset.print_price_group__id=e.print_price_group__id,a.value=n?.price,a}[d,o]=s.then?(await s)():s,n()}catch(h){n(h)}}))},8846:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{f:()=>i});var d=a(3682),c=e([d]);function i(e,t){e.style.flexDirection="row";const a=document.createElement("div");a.classList.add("content__left"),e.appendChild(a);const n=document.createElement("div");n.classList.add("content__right"),e.appendChild(n),JSON.parse(t).forEach((e=>{let t=document.createElement("details");t.classList.add("section-left");let n=document.createElement("summary");n.textContent=e.section_name,t.appendChild(n),e.cms_settings.forEach((e=>{let a=document.createElement("li");a.textContent=e.setting,a.dataset.class=e.setting_class,a.dataset.upload=e.upload,a.dataset.new=e.new,a.classList.add("section-left__content"),t.appendChild(a)}));const c=t.querySelectorAll("li");c.forEach((e=>{e.addEventListener("click",(()=>(0,d.V)(e,e.dataset.class,JSON.parse(e.dataset.upload),JSON.parse(e.dataset.new),t,c)))})),a.appendChild(t)}))}d=(c.then?(await c)():c)[0],n()}catch(r){n(r)}}))},9132:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{n:()=>o});var d=a(2830),c=a(4708),i=a(8645),r=e([i,d]);async function o(e,t){const a=e.closest(".dictionary-frame__header").parentElement,n=a.querySelector(".dictionary-frame__input").value,r=a.querySelector(".check-deleted"),o=a.querySelector(".check-new");"Catalogue"===t?await(0,i.l)(a,r,o,(0,c.Z)(n)):await(0,d.n)(a,t,r,o,(0,c.Z)(n))}[i,d]=r.then?(await r)():r,n()}catch(s){n(s)}}))},9227:(e,t,a)=>{a.d(t,{r:()=>d});var n=a(2952);function d(e){const t=(0,n.k)("checkbox");return t.checked=e.fieldValue,t.id=e.fieldName.field+"Input",t.name=e.fieldName.field,t}},9336:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{C:()=>l});var d=a(7728),c=a(8063),i=a(1211),r=a(9635),o=a(8664),s=e([r]);async function l(e){const t=document.querySelector(".service"),a=document.createElement("dialog");a.classList.add("catalogue__modal"),a.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,d.O)(a)}));const n=(0,c.h)(a,"",0);n.firstElementChild.textContent="Новый прайс лист",a.appendChild(n);const s=document.createElement("form");s.id="priceDialog",s.classList.add("modal__form");const l=document.createElement("div");l.classList.add("price__modal_row");const p=document.createElement("label");p.classList.add("price__modal_label"),p.textContent="дата прайс-листа",p.htmlFor="priceDate";const u=document.createElement("input");u.classList.add("price__modal_date"),u.type="date",u.id="priceDate",u.name="priceDate",l.appendChild(p),l.appendChild(u),s.appendChild(l);const m=document.createElement("div");m.classList.add("price__modal_row");const _=document.createElement("label");_.classList.add("price__modal_label"),_.textContent="акция",_.htmlFor="promoCheck";const h=document.createElement("input");h.classList.add("price__modal_check"),h.type="checkbox",h.id="promoCheck",h.name="promoCheck";const y=document.createElement("label");y.classList.add("price__modal_label"),y.textContent="окончание",y.htmlFor="promoDate";const f=document.createElement("input");f.classList.add("price__modal_date"),f.type="date",f.id="promoDate",f.name="promoDate",m.appendChild(_),m.appendChild(h),m.appendChild(y),m.appendChild(f),s.appendChild(m);const v=(0,i.E)("Записать");v.addEventListener("click",r.R),v.classList.add("price__modal_btn"),s.appendChild(v),a.appendChild(s),t.appendChild(a),a.showModal(),(0,o.Y)(a)}r=(s.then?(await s)():s)[0],n()}catch(p){n(p)}}))},9370:(e,t,a)=>{function n(e){const t=e.target.closest("form");if(t.querySelector("textarea").value){const e=t.querySelector(".btn__save");e.disabled=!1,e.classList.remove("btn__disabled");const a=t.querySelector(".btn__cancel");a.disabled=!1,a.classList.remove("btn__disabled")}}a.d(t,{W:()=>n})},9410:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{c:()=>o});var d=a(7310),c=a(3757),i=a(8316),r=e([d]);async function o(e,t){t.disabled=!0,t.classList.add("btn__disabled");const a=t.closest("form"),n=a.querySelector('input[name="id"]').value,r=document.querySelector(".catalogue__title").querySelector(".btn__save");r.disabled=!1,r.classList.remove("btn__disabled");const o=new FormData(a),s=Object.fromEntries(o.entries());let l=!1;if("0"!==n){const e=d.e+"catalogue_record/"+n,t=await(0,c.D)(e);for(const e in s)if(t.values[0][e]!==s[e]){l=!0;break}}if("0"===n||l){e.preventDefault();const t=d.e+"save_catalogue_item/"+n;await fetch(t,{method:"POST",headers:{"X-CSRFToken":(0,i.m)()},body:o}).then((e=>e.json())).then((e=>{"0"===n&&(a.querySelector('input[name="id"]').value=e.id);const t=a.querySelector(".btn__cancel");t.disabled=!0,t.classList.add("btn__disabled")}))}}d=(r.then?(await r)():r)[0],n()}catch(s){n(s)}}))},9546:(e,t,a)=>{a.d(t,{_:()=>i});var n=a(8264),d=a(1211),c=a(7728);function i(e,t){const a=document.createElement("div");a.classList.add("modal__button-block");const i=(0,n.T)("Отменить");i.type="button",i.addEventListener("click",(t=>{t.preventDefault(),(0,c.O)(e)}));const r=(0,d.E)("Записать");return r.type="button",r.classList.add("submit"),r.dataset.id=t,a.appendChild(i),a.appendChild(r),a}},9550:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{Z:()=>r});var d=a(2814),c=a(7502),i=e([c]);async function r(e){const t=document.createElement("div");t.classList.add("dictionary-content__title","dictionary-content__row"),t.appendChild((0,d.N)()),e.forEach((e=>{let a=document.createElement("div");a.classList.add("dictionary-content__title_item"),a.textContent=e.label,t.appendChild(a)}));const a=document.createElement("button");return a.classList.add("btn","btn__save"),a.textContent="Создать",a.dataset.itemId="0",a.addEventListener("click",(e=>(0,c.w)(e))),t.appendChild(a),t}c=(i.then?(await i)():i)[0],n()}catch(o){n(o)}}))},9635:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{R:()=>s});var d=a(483),c=a(7310),i=a(7728),r=a(8316),o=e([c,d]);async function s(e){e.preventDefault();const t=e.target.closest("form"),a=document.getElementById("promoCheck"),n=document.getElementById("promoDate");n.addEventListener("click",(()=>{n.classList.remove("price__modal_border-alert")})),a.addEventListener("click",(()=>{n.classList.remove("price__modal_border-alert")}));const o=document.getElementById("priceDate");if(o.addEventListener("click",(()=>{o.classList.remove("price__modal_border-alert")})),o.value)if(a.checked&&!n.value)n.classList.add("price__modal_border-alert");else{const a=new FormData(t),n=c.e+"save_new_price_date";await fetch(n,{method:"POST",headers:{"X-CSRFToken":(0,r.m)()},body:a}).then((e=>e.json())).then((async t=>{const a=document.querySelector(".dictionary-frame__header_left"),n=a.querySelector(".dropdown__list"),c=a.querySelector(".price-dropdown__input"),r=a.querySelector('input[name="priceDateId"]'),o=e.target.closest("dialog");await(0,d.X4)(t,n,c,r),(0,i.O)(o)}))}else o.classList.add("price__modal_border-alert")}[c,d]=o.then?(await o)():o,n()}catch(l){n(l)}}))},9712:(e,t,a)=>{a.d(t,{O:()=>d});var n=a(3757);async function d(e,t=0,a="",c=!1,i,r,o){null==a&&(a="");const s=await async function(e=0,t="",a=!1,d){try{const c=new URLSearchParams({last_record:e});t&&c.append("search",t),a&&c.append("new","1");const i=await(0,n.D)(`${d}?${c.toString()}`);return i&&"object"==typeof i?(Array.isArray(i.dataList)||(i.dataList=[]),i):{dataList:[],last_record:e}}catch(t){return console.error("Failed to fetch user data:",t),{dataList:[],last_record:e}}}(t,a,c,o),l=s&&s.dataList?s.dataList:[];if(l&&l.length>0){let n=1;l.forEach((s=>{const l=document.createElement("div");l.classList.add("dictionary-content__row",r),l.dataset.id=s.id,e.appendChild(l),i(l,s),n++,20===n&&(l.dataset.last=(t+20).toString(),l.addEventListener("mouseover",(()=>{!async function(e,t,a,n,c,i,r,o){null==n&&(n=""),await d(t,a,n,c,i,r,o);const s=e.cloneNode(!0);e.parentNode.replaceChild(s,e)}(l,e,t+20,a,c,i,r,o)})))}))}}},9857:(e,t,a)=>{a.a(e,(async(e,n)=>{try{a.d(t,{H:()=>r});var d=a(2907),c=a(7310),i=e([d,c]);async function r(e,t,a){e.style.flexDirection="column";const n=JSON.parse(t)[0],i=n.cms_settings[0].setting,r=n.cms_settings[0].setting_class,o=n.cms_settings[0].upload,s=n.cms_settings[0].new,l=n.cms_settings[0].delete,p=(0,d.I)(r,i,o,s,l);e.appendChild(p);const u=await c.G[a](r);e.appendChild(u)}[d,c]=i.then?(await i)():i,n()}catch(o){n(o)}}))}},c={};function i(e){var t=c[e];if(void 0!==t)return t.exports;var a=c[e]={exports:{}};return d[e](a,a.exports,i),a.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",n=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(d,c,i)=>{var r;i&&((r=[]).d=-1);var o,s,l,p=new Set,u=d.exports,m=new Promise(((e,t)=>{l=t,s=e}));m[t]=u,m[e]=e=>(r&&e(r),p.forEach(e),m.catch((e=>{}))),d.exports=m,c((d=>{var c;o=(d=>d.map((d=>{if(null!==d&&"object"==typeof d){if(d[e])return d;if(d.then){var c=[];c.d=0,d.then((e=>{i[t]=e,n(c)}),(e=>{i[a]=e,n(c)}));var i={};return i[e]=e=>e(c),i}}var r={};return r[e]=e=>{},r[t]=d,r})))(d);var i=()=>o.map((e=>{if(e[a])throw e[a];return e[t]})),s=new Promise((t=>{(c=()=>t(i)).r=0;var a=e=>e!==r&&!p.has(e)&&(p.add(e),e&&!e.d&&(c.r++,e.push(c)));o.map((t=>t[e](a)))}));return c.r?s:i()}),(e=>(e?l(m[a]=e):s(u),n(r)))),r&&r.d<0&&(r.d=0)},i.d=(e,t)=>{for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(7310)})();