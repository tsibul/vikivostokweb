(()=>{"use strict";var e,t,n,a,c={304:(e,t,n)=>{n.d(t,{I:()=>c});var a=n(2952);function c(e){const t=(0,a.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t.step="0.0001",t}},313:(e,t,n)=>{n.d(t,{a:()=>i});var a=n(3757);async function c(e,t=0,n="",d=!1){const i=document.createElement("div");i.classList.add("dictionary-content__rows");try{const r=await async function(e=0,t="",n=!1){try{const c=new URLSearchParams({last_record:e});return t&&c.append("search",t),n&&c.append("new","1"),await(0,a.D)(`/cms/json/user_extension?${c.toString()}`)}catch(t){return console.error("Failed to fetch user data:",t),{userList:[],last_record:e}}}(t,n,d);console.log("User data received:",r);const o=r.userList||[],s=r.last_record||t;if(o&&o.length>0){if(o.forEach((e=>{const t=document.createElement("div");t.classList.add("dictionary-content__row","user-element__header"),t.dataset.id=e.id;const n=document.createElement("div");n.classList.add("dictionary-content__row_item","user-element__cell","user-element__cell-lastname"),n.textContent=e.last_name||"",t.appendChild(n);const a=document.createElement("div");a.classList.add("dictionary-content__row_item","user-element__cell","user-element__cell-firstname"),a.textContent=e.first_name||"",t.appendChild(a);const c=document.createElement("div");c.classList.add("dictionary-content__row_item","user-element__cell","user-element__cell-email"),c.textContent=e.email||"",t.appendChild(c);const d=document.createElement("div");d.classList.add("dictionary-content__row_item","user-element__cell","user-element__cell-phone"),d.textContent=e.phone||"",t.appendChild(d);const r=document.createElement("div");r.classList.add("dictionary-content__row_item","user-element__cell","user-element__cell-alias"),r.textContent=e.alias||"",t.appendChild(r);const o=document.createElement("div");o.classList.add("dictionary-content__row_item","user-element__cell","user-element__cell-new");const s=document.createElement("input");s.type="checkbox",s.classList.add("check"),s.checked=e.new||!1,s.disabled=!0,o.appendChild(s),t.appendChild(o);const l=document.createElement("div");l.classList.add("dictionary-content__row_item","user-element__cell","user-element__cell-manager"),l.textContent=e.manager_letter||"",t.appendChild(l);const u=document.createElement("div");u.classList.add("dictionary-content__row_item","user-element__cell","user-element__cell-customer"),u.textContent=e.customer||"",t.appendChild(u);const m=document.createElement("div");m.classList.add("user-element__cell");const p=document.createElement("button");p.classList.add("btn","btn__save"),p.textContent="Изм.",m.appendChild(p),t.appendChild(m),i.appendChild(t)})),20===o.length){const t=document.createElement("div");t.classList.add("dictionary-content__row","user-element__row","load-more-trigger"),t.addEventListener("mouseover",(()=>{!async function(e,t,n,a,d){const i=e.closest(".dictionary-content__rows");[...(await c(t,d,a,n)).children].forEach((e=>{i.appendChild(e)}));const r=e.cloneNode(!0);e.parentNode.replaceChild(r,e)}(t,e,d,n,s)}));const a=10;for(let e=0;e<a;e++){const n=document.createElement("div");n.classList.add("dictionary-content__row_item","user-element__cell"),4===e&&(n.textContent="Загрузка дополнительных записей..."),t.appendChild(n)}i.appendChild(t)}}else{const e=document.createElement("div");e.classList.add("dictionary-content__row","user-element__row");const t=document.createElement("div");t.classList.add("dictionary-content__row_item","user-element__cell","user-element__cell-no-results"),t.textContent="Пользователи не найдены",e.appendChild(t),i.appendChild(e)}}catch(e){console.error("Error creating user rows:",e);const t=document.createElement("div");t.classList.add("dictionary-content__row","user-element__row");const n=document.createElement("div");n.classList.add("dictionary-content__row_item","user-element__cell","user-element__cell-no-results"),n.textContent="Ошибка загрузки данных пользователей",t.appendChild(n),i.appendChild(t)}return i}async function d(e,t=0,n="",a=!1){const d=document.createElement("div");d.classList.add("dictionary-content");const i=function(){const e=document.createElement("div");return e.classList.add("dictionary-content__title","user-element__header"),[{title:"Фамилия"},{title:"Имя"},{title:"Email"},{title:"Телефон"},{title:"Email-алиас"},{title:"Новый"},{title:"Менеджер"},{title:"Клиент"},{title:""}].forEach((t=>{const n=document.createElement("div");n.classList.add("dictionary-content__title_item","user-element__header-item"),n.textContent=t.title,e.appendChild(n)})),e}();d.appendChild(i);const r=await c(e,t,n,a);return d.appendChild(r),d}async function i(e){const t=await d(e);return t.id=e,t}},449:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{p:()=>s});var c=n(4708),d=n(4189),i=n(5800),r=n(8833),o=e([d,i,r]);async function s(e,t,n){switch(t){case"1":return(0,d.N)(e,(0,c.Z)(n));case"2":return(0,i.s)(e,(0,c.Z)(n));case"3":return(0,r.h)(e,(0,c.Z)(n))}}[d,i,r]=o.then?(await o)():o,a()}catch(l){a(l)}}))},483:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{X4:()=>s,n6:()=>l,nA:()=>o});var c=n(7310),d=n(3757),i=n(816),r=e([c,i]);async function o(){const e=c.e+"dropdown_list/Price";return l(await(0,d.D)(e))}function s(e,t,n,a){t.innerHTML="",e.forEach((c=>{(0,i.p)(c,t,n,a),n.value=e[0].value,a.value=e[0].id}))}function l(e){const t=document.createElement("div");t.classList.add("price-dropdown");const n=document.createElement("div");n.classList.add("price-dropdown__frame");const a=document.createElement("input");a.classList.add("price-dropdown__input"),a.readOnly=!0,n.appendChild(a),a.insertAdjacentHTML("afterend",'<i class="fa-solid fa-chevron-down"></i>');const c=document.createElement("input");c.hidden=!0,c.type="text",c.name="priceDateId",t.appendChild(n),t.appendChild(c);const d=document.createElement("ul");return d.classList.add("dropdown__list","invisible"),t.appendChild(d),e[0]&&(a.value=e[0].value,c.value=e[0].id),s(e,d,a,c),t.addEventListener("click",(e=>{d.classList.remove("invisible")})),document.addEventListener("click",(e=>{n.contains(e.target)||d.classList.contains("invisible")||d.classList.add("invisible")})),t}[c,i]=r.then?(await r)():r,a()}catch(u){a(u)}}))},816:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{M:()=>o,p:()=>l});var c=n(2952),d=n(3757),i=n(7310),r=e([i]);async function o(e,t,n){const a=document.createElement("div");a.classList.add("dropdown");const r=(0,c.k)("text"),o=document.createElement("input");o.hidden=!0,o.type="text",r.classList.add("dropdown__input"),a.appendChild(r),a.appendChild(o),a.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-chevron-down dropdown__input_icon"></i>');const l=document.createElement("ul");l.classList.add("dropdown__list","invisible");const u=i.e+"dropdown_list/"+e,m=await(0,d.D)(u);if(t){let e=m.find((e=>e.id===t));r.value=e.value,o.value=e.id}else m[0]&&!n&&(r.value=m[0].value,o.value=m[0].id);return s(m,l,r,o,n),r.addEventListener("click",(()=>{l.classList.toggle("invisible")})),a.appendChild(l),r.addEventListener("keyup",(e=>{let t=e.target.value.toUpperCase();const n=m.filter((e=>e.value.toUpperCase().indexOf(t)>-1));l.innerHTML="",s(n,l,r,o)})),a}function s(e,t,n,a,c){c&&l({id:"",value:""},t,n,a),e.forEach((e=>{l(e,t,n,a)}))}function l(e,t,n,a){const c=document.createElement("li");c.classList.add("dropdown__list_item"),c.value=e.id,c.textContent=e.value,c.addEventListener("click",(e=>{n.value=e.target.textContent,a.value=e.target.value,a.dispatchEvent(new Event("change",{bubbles:!0})),t.classList.add("invisible")})),t.appendChild(c)}i=(r.then?(await r)():r)[0],a()}catch(u){a(u)}}))},897:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{Q:()=>o});var c=n(9550),d=n(6723),i=n(6825),r=e([i,c,d]);async function o(e,t,n,a,r){const o=await(0,i.G)(e),s=document.createElement("div");s.classList.add("dictionary-content");const l=await(0,c.Z)(o);l.style.gridTemplateColumns=t,s.appendChild(l);const u=await(0,d.Y)(e,n,a,0,r,t);return s.appendChild(u),s.dataset.grid=t,s}[i,c,d]=r.then?(await r)():r,a()}catch(s){a(s)}}))},905:(e,t,n)=>{function a(e){const t=document.createElement("label");return t.classList.add("modal__content_label"),t.htmlFor=e.field+"Input",t.textContent=e.label+(e.null?"":"*"),t}n.d(t,{d:()=>a})},1057:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{D:()=>s});var c=n(7310),d=n(3757),i=n(2428),r=n(3126),o=e([c,r,i]);async function s(e,t,n,a,o,s){const l=c.e+"catalogue_data/"+t+"/"+n+"/"+a+"/"+o+"/"+s,u=(await(0,d.D)(l)).values;let m,p=0;const _=e.querySelector(`form[data-last-id="${a}"]`);_&&_.removeEventListener("mouseover",r.y);for(const t of u)m=document.createElement("form"),await(0,i.I)(t,m),e.appendChild(await m),p++,20===p&&(m.dataset.lastId=Number.parseInt(a)+p,m.addEventListener("mouseover",r.y))}[c,r,i]=o.then?(await o)():o,a()}catch(l){a(l)}}))},1211:(e,t,n)=>{function a(e){const t=document.createElement("button");return t.classList.add("btn","btn__save"),t.textContent=e,t}n.d(t,{E:()=>a})},1316:(e,t,n)=>{n.d(t,{K:()=>c});var a=n(2952);function c(e){const t=(0,a.k)("text");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},1369:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{b:()=>o});var c=n(7310),d=n(3757),i=n(1499),r=e([c]);async function o(e,t,n,a,r){const o=e.target.closest("form"),s=o.querySelector('input[name="id"]'),l=o.querySelector('input[name="colors"]'),u=o.querySelector('input[name="goods_option__id"]'),m=o.querySelector('textarea[name="name"]'),p=o.querySelector('input[name="item_article"]'),_=o.querySelector('input[name="main_color__id"]'),h=o.querySelector(".main_color_text"),y=o.querySelector(".goods_option__name"),f=o.querySelector(".btn__save");function v(){t.textContent="",r.src="",m.value="",p.value="",_.value="",h.textContent="",u.value="",y.textContent="",l.value="",f.disabled=!0,f.classList.contains("btn__disabled")||f.classList.add("btn__disabled")}if(l.value="",u.value="",/(\.jpg|\.jpeg|\.png)$/i.exec(e.target.value)){const o=e.target.files[0],E=new FileReader;E.onload=function(e){r.src=e.target.result},E.readAsDataURL(o),t.textContent=e.target.value.split("\\").pop();const C=t.textContent.split(".")[0],g=c.e+"parse_file_data/"+n+"/"+a+"/"+C+"/"+s.value,b=await(0,d.D)(g);b.error?v():(m.value=b.values.name,p.value=b.values.item_article,_.value=b.values.main_color__id,h.textContent=b.values.main_color_text,u.value=b.values.goods_option__id,y.textContent=b.values.goods_option__name,(0,i.D)(b.values.colors,l),f.disabled=!1,f.classList.remove("btn__disabled"))}else e.target.value="",v()}c=(r.then?(await r)():r)[0],a()}catch(s){a(s)}}))},1401:(e,t,n)=>{n.d(t,{J:()=>c});var a=n(1211);function c(e){const t=document.createElement("dialog");t.classList.add("alert");const n=document.createElement("header");n.classList.add("modal__header");const c=document.createElement("h4");c.textContent="Результат загрузки",n.appendChild(c);const o=document.createElement("div");o.innerHTML="&times;",o.addEventListener("click",(()=>{t.remove()})),n.appendChild(o),t.appendChild(n);const s=d(),l=i("Ошибки",e.recordErrorLength);s.appendChild(l),e.recordError.forEach((e=>{s.appendChild(r(e))})),t.appendChild(s);const u=d(),m=i("Дубли",e.recordDoubleLength);u.appendChild(m),e.recordDouble.forEach((e=>{u.appendChild(r(e))})),t.appendChild(u);const p=d(),_=i("Успешно",e.recordSuccessLength);p.appendChild(_),e.recordSuccess.forEach((e=>{p.appendChild(r(e))})),t.appendChild(p);const h=(0,a.E)("Ok");return h.classList.add("alert__btn"),h.addEventListener("click",(()=>{t.remove()})),t.appendChild(h),t}function d(){const e=document.createElement("details");return e.classList.add("alert__details"),e}function i(e,t){const n=document.createElement("summary");return n.classList.add("alert__summary"),n.textContent=e+" "+t,n}function r(e){const t=document.createElement("div");t.classList.add("alert__element");const n=document.createElement("div");n.textContent="артикул";const a=document.createElement("div");a.textContent=e.item;const c=document.createElement("div");c.textContent="результат";const d=document.createElement("div");return d.textContent=e.message,t.appendChild(n),t.appendChild(a),t.appendChild(c),t.appendChild(d),t}},1499:(e,t,n)=>{function a(e,t){t.value=JSON.stringify(e)}n.d(t,{D:()=>a})},1836:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{i:()=>m,j:()=>u});var c=n(7728),d=n(8063),i=n(9546),r=n(8664),o=n(8007),s=n(6872),l=e([s,o]);function u(){const e=p("Загрузить csv файл");e.fileInput.name="csv_file",e.fileInput.accept=".csv",e.buttonSubmit.addEventListener("click",s.O)}async function m(){const e=p("Загрузить несколько фото"),t=await(0,o.h)({fieldName:{field:"goods",foreignClass:"Goods",null:!1}});t.style.marginTop="8px",e.form.querySelector(".modal__button-block").insertAdjacentElement("beforebegin",t),e.fileInput.name="files",e.fileInput.accept="image/png, image/jpeg, image/jpg",e.fileInput.multiple=!0,e.buttonSubmit.addEventListener("click",s.f)}function p(e){const t=document.querySelector(".service"),n=document.createElement("dialog");n.classList.add("catalogue__modal"),n.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,c.O)(n)}));const a=(0,d.h)(n,"",0);a.firstElementChild.textContent=e,n.appendChild(a);const o=document.createElement("form");o.id="catalogueDialog",o.classList.add("modal__form"),o.enctype="multipart/form-data";const s=document.createElement("div");s.classList.add("catalogue__input-frame");const l=document.createElement("input");l.classList.add("catalogue__modal_file-input"),l.type="file",s.appendChild(l),o.appendChild(s);const u=document.createElement("div");u.classList.add("error-message"),u.textContent="Error",o.appendChild(u),o.appendChild((0,i._)(n,0)),n.appendChild(o);const m=o.querySelector(".submit");return t.appendChild(n),l.addEventListener("change",(()=>{u.textContent="",u.style.display="none"})),n.showModal(),(0,r.Y)(n),{form:o,fileInput:l,buttonSubmit:m}}[s,o]=l.then?(await l)():l,a()}catch(_){a(_)}}))},2428:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{I:()=>h});var c=n(816),d=n(1211),i=n(8264),r=n(5597),o=n(1499),s=n(1369),l=n(3797),u=n(6352),m=n(9370),p=n(9410),_=e([c,s,p,l]);async function h(e,t){t.enctype="multipart/form-data",t.classList.add("catalogue","catalogue__row"),t.appendChild((0,r.t)("number","id",e.id));const n=(0,r.t)("checkbox","deleted",e.deleted);n.addEventListener("change",(e=>(0,m.W)(e))),t.appendChild(n);const a=document.createElement("textarea");a.value=e.name,a.name="name",a.classList.add("catalogue__input"),a.readOnly=!0,t.appendChild(a),t.appendChild((0,r.t)("text","item_article",e.item_article));const _=document.createElement("div");_.classList.add("catalogue__input","main_color_text"),_.textContent=e.main_color_text,t.appendChild(_),t.appendChild((0,r.t)("text","main_color__id",e.main_color__id)),t.appendChild((0,r.t)("number","goods_option__id",e.goods_option__id));const h=document.createElement("div");h.classList.add("catalogue__input","goods_option__name"),h.textContent=e.goods_option__name,t.appendChild(h);const y=document.createElement("img");y.classList.add("catalogue__img"),y.alt=e.item_article,y.loading="lazy",y.src="/static/viki_web_cms/files/item_photo/"+e.image,t.appendChild(y);const f=(0,r.t)("checkbox","simple_article",e.simple_article);0===e.id&&(f.checked=!0),f.addEventListener("change",(e=>(0,u.O)(e))),t.appendChild(f);const v=await(0,c.M)("Goods",e.goods__id,!1);t.appendChild(v);const E=v.querySelector("input[hidden]");E.name="goods__id",E.addEventListener("change",(e=>(0,u.O)(e)));const C=document.createElement("div");C.classList.add("catalogue__file");const g=document.createElement("div");g.textContent=e.image,g.classList.add("catalogue__file_text"),C.appendChild(g);const b=document.createElement("div");b.classList.add("catalogue__input-frame");const L=document.createElement("input");L.classList.add("catalogue__file_input"),L.type="file",L.name="image",L.accept="image/png, image/jpeg, image/jpg",L.addEventListener("change",(async e=>await(0,s.b)(e,g,E.value,f.checked?1:0,y))),b.appendChild(L),C.appendChild(b),t.appendChild(C);const w=document.createElement("div");w.classList.add("catalogue__btn-block");const S=(0,d.E)("");S.disabled=!0,S.classList.add("tooltip","btn__disabled"),S.innerHTML='<i class="catalogue__icon fa-solid fa-check"></i><span class="tooltip-text">сохранить</span>',S.addEventListener("click",(e=>(0,p.c)(e,S)));const k=(0,i.T)("");k.classList.add("tooltip","btn__disabled"),k.disabled=!0,k.innerHTML='<i class="catalogue__icon fa-solid fa-x"></i><span class="tooltip-text">отменить</span>',k.addEventListener("click",(e=>(0,l.N)(e))),w.appendChild(S),w.appendChild(k),t.appendChild(w);const x=(0,r.t)("text","colors","");x.hidden=!0,t.appendChild(x),e.colors&&(0,o.D)(e.colors,x)}[c,s,p,l]=_.then?(await _)():_,a()}catch(y){a(y)}}))},2472:(e,t,n)=>{function a(e){const t=document.createElement("img");return t.classList.add("modal__content_image"),t.src=e.url+e.fieldValue,t.alt=e.fieldName.field,t}n.d(t,{O:()=>a})},2788:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{x:()=>o});var c=n(2830),d=n(4708),i=n(8645),r=e([i,c]);async function o(e,t){const n=t.closest(".dictionary-frame__header").parentElement,a=n.querySelector(".dictionary-frame__input").value,r=(0,d.Z)(a),o=n.querySelector(".check-deleted");"Catalogue"===e?await(0,i.l)(n,o,t,r):await(0,c.n)(n,e,o,t,r)}[i,c]=r.then?(await r)():r,a()}catch(s){a(s)}}))},2814:(e,t,n)=>{function a(){const e=document.createElement("div");return e.classList.add("dictionary-content__square"),e}n.d(t,{N:()=>a})},2830:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{n:()=>i});var c=n(897),d=e([c]);async function i(e,t,n,a,d){let i=e.querySelector(".dictionary-content");const r=i.dataset.grid;i.remove();const o=a&&a.checked?1:0;i=await(0,c.Q)(t,r,n.checked?0:1,o,d),e.appendChild(i)}c=(d.then?(await d)():d)[0],a()}catch(r){a(r)}}))},2868:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{Q:()=>i});var c=n(1836),d=e([c]);async function i(e){"Catalogue"===e&&(0,c.j)()}c=(d.then?(await d)():d)[0],a()}catch(r){a(r)}}))},2907:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{I:()=>h});var c=n(4859),d=n(2868),i=n(7847),r=n(4087),o=n(6467),s=n(1211),l=n(9132),u=n(8264),m=n(5095),p=n(2788),_=e([d,p,r,l,m]);function h(e,t,n,a,_=!0){const h=document.createElement("div");h.classList.add("dictionary-frame__header");const y=document.createElement("div");y.classList.add("dictionary-frame__header_left"),y.textContent=t,h.appendChild(y);const f=document.createElement("div");if(f.classList.add("dictionary-frame__header_right"),n){const t=(0,c.C)("Загрузить CSV");t.addEventListener("click",(()=>(0,d.Q)(e))),f.appendChild(t)}if(a){const t=(0,i.G)(!1);t.id=e+"-new",t.addEventListener("change",(()=>(0,p.x)(e,t))),t.classList.add("check-new"),f.appendChild(t);const n=document.createElement("label");n.htmlFor=e+"-new",n.classList.add("dictionary-frame__label"),n.textContent="только новые",f.appendChild(n)}if(_){const t=(0,i.G)(!0);t.id=e+"-deleted",t.addEventListener("change",(()=>(0,r.m)(e,t))),t.classList.add("check-deleted"),f.appendChild(t);const n=document.createElement("label");n.htmlFor=e+"-deleted",n.classList.add("dictionary-frame__label"),n.textContent="скрыть удаленные",f.appendChild(n)}f.insertAdjacentHTML("beforeend",o.q);const v=document.createElement("input");v.classList.add("dictionary-frame__input"),v.type="text",v.placeholder="поиск...",v.addEventListener("keypress",(t=>{"Enter"===t.key&&(0,l.n)(t.target,e)})),f.appendChild(v);const E=(0,s.E)("Поиск");E.addEventListener("click",(t=>(0,l.n)(t.target,e)));const C=(0,u.T)("Очистить");return C.addEventListener("click",(t=>(0,m.k)(t.target,e))),f.appendChild(E),f.appendChild(C),h.appendChild(f),h.dataset.class=e,h.dataset.title=t,h}[d,p,r,l,m]=_.then?(await _)():_,a()}catch(y){a(y)}}))},2952:(e,t,n)=>{function a(e){const t=document.createElement("input");return t.type=e,t.classList.add("modal__content_"+e),t}n.d(t,{k:()=>a})},3002:(e,t,n)=>{async function a(e){return document.createElement("div")}n.d(t,{r:()=>a})},3126:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{y:()=>r});var c=n(1057),d=n(4708),i=e([c]);async function r(e){const t=e.target,n=t.dataset.lastId,a=t.closest(".content"),i=a.querySelector(".dictionary-frame__input").value,r=a.querySelector(".check-deleted"),o=a.querySelector(".check-new"),s=a.querySelector(".catalogue__content");await(0,c.D)(s,r.checked?1:0,o.checked?1:0,n,(0,d.Z)(i),0)}c=(i.then?(await i)():i)[0],a()}catch(o){a(o)}}))},3232:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{o:()=>m});var c=n(4449),d=n(9336),i=n(4859),r=n(483),o=n(449),s=n(8264),l=n(1211),u=e([r,c,d,o]);async function m(e){const t=document.querySelector(".dictionary-frame__header_left"),n=await(0,r.nA)();t.appendChild(n);const a=n.querySelector("input"),u=n.querySelector("input[hidden]"),m=(0,i.C)("Новый прайс");t.appendChild(m);const p=(0,s.T)("Выгрузить прайс");t.appendChild(p),u.addEventListener("change",await c.h),m.addEventListener("click",d.C);const _=document.querySelector(".dictionary-frame__header_right");_.firstElementChild.remove(),_.firstElementChild.remove();const h=document.createElement("label");h.htmlFor="priceType",h.textContent="тип цены";const y=(0,r.n6)([{id:1,value:"стандарт"},{id:2,value:"от объема"},{id:3,value:"нанесение"}]);y.id="priceType",y.addEventListener("change",await c.h),_.insertAdjacentElement("afterbegin",y),_.insertAdjacentElement("afterbegin",h);const f=document.createElement("div");f.classList.add("price-block");const v=y.querySelector("input[hidden]").value,E=await(0,o.p)(a.value,v,"None");f.appendChild(E.header),f.appendChild(E.form),_.querySelector(".dictionary-frame__input").remove(),_.querySelector(".btn__save").remove(),_.querySelector(".btn__cancel").remove();const C=document.createElement("input");C.classList.add("dictionary-frame__input"),C.type="text",C.placeholder="поиск...",C.addEventListener("keypress",(e=>{"Enter"===e.key&&e.target.value&&(0,c.h)()})),_.appendChild(C);const g=(0,l.E)("Поиск");g.addEventListener("click",c.h),_.appendChild(g);const b=(0,s.T)("Очистить");return b.addEventListener("click",(e=>{C.value="",(0,c.h)()})),_.appendChild(b),f}[r,c,d,o]=u.then?(await u)():u,a()}catch(p){a(p)}}))},3682:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{V:()=>l});var c=n(6744),d=n(7245),i=n(897),r=n(6332),o=n(6825),s=e([d,o,i]);async function l(e,t,n,a,s,l){if(e.classList.toggle("text-active"),document.getElementById(t))document.getElementById(t).classList.toggle("invisible");else{const c=document.querySelector(".content__right"),s=await(0,d.K)(t,e.textContent,n,a),l=await(0,o.G)(t),u=(0,r.I)(l),m=await(0,i.Q)(t,u,0,0,"None");s.appendChild(m),c.appendChild(s)}(0,c.P)(s,l)}[d,o,i]=s.then?(await s)():s,a()}catch(u){a(u)}}))},3757:(e,t,n)=>{n.d(t,{D:()=>c});var a=n(8316);function c(e){return fetch(e,{method:"GET",headers:{"Content-Type":"application/json","X-CSRFToken":(0,a.m)()}}).then((e=>e.json()))}},3797:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{N:()=>o});var c=n(7310),d=n(3757),i=n(2428),r=e([c,i]);async function o(e){const t=e.target.closest("form"),n=t.querySelector('input[name="id"]').value;if("0"===n){t.remove();const e=document.querySelector(".catalogue__title").querySelector(".btn__save");e.disabled=!1,e.classList.remove("btn__disabled")}else{t.innerHTML="";const e=c.e+"catalogue_record/"+n,a=await(0,d.D)(e);await(0,i.I)(a.values[0],t)}}[c,i]=r.then?(await r)():r,a()}catch(s){a(s)}}))},3913:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{N:()=>o});var c=n(7310),d=n(4449),i=n(8316),r=e([c,d]);async function o(e){const t=document.querySelector(".content"),n=t.querySelector(".dictionary-frame__header_left").querySelector("input[hidden]").value,a=(t.querySelector(".dictionary-frame__header_right").querySelector("input[hidden]").value,document.querySelectorAll("input.price-row__item:not(.price-row__item_disabled)")),r=Array.from(a),o={goods:[],item:[]};let s;r.forEach((e=>{s={},Object.entries(e.dataset).forEach((([e,t])=>{Number.parseInt(t)?s[e]=Number.parseInt(t):s[e]=t})),s.Price__price_list__id=Number.parseInt(n),s.price=Number.parseFloat(e.value),delete s.discount,o[e.dataset.class].push(s),delete s.class}));const l=c.e+"price_list_save";fetch(l,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,i.m)()},body:JSON.stringify(o)}).then((e=>e.json())).then((e=>{e.error||(0,d.h)()}))}[c,d]=r.then?(await r)():r,a()}catch(s){a(s)}}))},4085:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{H:()=>C});var c=n(1316),d=n(9227),i=n(7164),r=n(8007),o=n(2472),s=n(6825),l=n(7310),u=n(3757),m=n(6977),p=n(905),_=n(7541),h=n(304),y=n(7475),f=n(4821),v=e([r,s,l]);[r,s,l]=v.then?(await v)():v;const E={string:c.K,boolean:d.r,number:i.y,float:_.P,precise:h.I,foreign:r.h,image:o.O,file:m.B,date:y.d,textarea:f.n};async function C(e,t,n){const a=document.createElement("div");a.classList.add("modal__content");const c=await(0,s.G)(t);let d;const i=l.e+"record_info/"+t+"/"+n,r=await(0,u.D)(i);for(const e of c){let t={fieldName:e,fieldValue:null,url:r.url};"0"!==n&&("foreign"!==e.type?e.property_off?t.fieldValue=r.record[e.property_off]:t.fieldValue=r.record[e.field]:t.fieldValue=r.record[e.field+"_id"]),a.appendChild((0,p.d)(e)),d=await E[e.type](t),a.appendChild(d)}return a}a()}catch(g){a(g)}}))},4087:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{m:()=>o});var c=n(2830),d=n(4708),i=n(8645),r=e([i,c]);async function o(e,t){const n=t.closest(".dictionary-frame__header").parentElement,a=n.querySelector(".dictionary-frame__input").value,r=n.querySelector(".check-new"),o=(0,d.Z)(a);"Catalogue"===e?await(0,i.l)(n,t,r,o):await(0,c.n)(n,e,t,r,o)}[i,c]=r.then?(await r)():r,a()}catch(s){a(s)}}))},4114:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{f:()=>i});var c=n(897),d=e([c]);async function i(e){const t="14px 1.5fr 4fr 1fr 1fr 1fr 3fr 3fr 3fr 2fr 2fr 1fr 1fr 1fr 1fr 1fr 1.5fr",n=await(0,c.Q)(e,t,0,0,"None");return n.id=e,n.dataset.grid=t,n}c=(d.then?(await d)():d)[0],a()}catch(r){a(r)}}))},4189:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{N:()=>p,R:()=>_});var c=n(7310),d=n(3757),i=n(483),r=n(1211),o=n(4859),s=n(8264),l=n(3913),u=n(8316),m=e([c,l,i]);async function p(e,t){const n=document.createElement("div");n.classList.add("price-content");const a=c.e+"standard_price_data/"+e+"/"+t,i=await(0,d.D)(a),r="0.8fr 3.2fr repeat("+i.price_type_length+", 1fr) 160px 120px",o=await(0,d.D)(c.e+"all_items_all_items_for_dropdown"),s=await _(i.header,r);return await h(i.form,n,i.header,o,r),{form:n,header:s}}async function _(e,t){const n=document.createElement("header");n.classList.add("price-header"),n.style.gridTemplateColumns=t;const a=document.createElement("div");a.classList.add("price-header__item"),a.textContent="Артикул",n.appendChild(a);const c=document.createElement("div");let d;c.classList.add("price-header__item"),c.textContent="Товар",n.appendChild(c),e.forEach((e=>{d=document.createElement("div"),d.textContent=e.price_name__name,d.classList.add("price-header__item"),n.appendChild(d)}));const i=(0,o.C)("Загрузить csv");n.appendChild(i);const s=(0,r.E)("Сохранить");return n.appendChild(s),s.addEventListener("click",await l.N),n}function h(e,t,n,a,c){let d,i,r;e.goods.forEach((o=>{d=y(o,n,a,c),t.appendChild(d),r=e.items.filter((e=>o.id===e.goods__id&&"[]"!==e.price)),r.forEach((e=>{i=f(e,n,c),t.appendChild(i)}))}))}function y(e,t,n,a){const c=v(e,t,"goods","goods",a),d=n.filter((t=>t.goods__id===e.id));c.appendChild((0,i.n6)(d));const r=(0,s.T)("Добавить цвет");return r.addEventListener("click",(()=>{const e=c.querySelector(".price-dropdown").querySelector("input[hidden]").value,n=c.querySelector(".price-dropdown__input").value,[a,...d]=n.split(" ");if(!Array.from(document.querySelectorAll('div[data-type="item"] input[hidden]')).find((t=>t.value===e))){const n={id:e,article:a,name:d.join(" "),price:"[]"};c.insertAdjacentElement("afterend",f(n,t))}})),c.appendChild(r),c}function f(e,t,n){const a=v(e,t,"item","catalogue_item",n);a.classList.add("price-row__item-row"),a.style.gridTemplateColumns=n;const d=(0,s.T)("Убрать позицию");return d.addEventListener("click",(async e=>{e.preventDefault();const t=a.querySelector('input[name="id"]').value;fetch(c.e+"delete_item_price_row/"+t,{headers:{"X-CSRFToken":(0,u.m)()}}).then((e=>e.json())).then((e=>{e&&a.remove()}))})),a.appendChild(d),a}function v(e,t,n,a,c){const d=document.createElement("div");d.dataset.type=n,d.classList.add("price-row"),d.style.gridTemplateColumns=c;const i=document.createElement("input");i.type="text",i.hidden=!0,i.name="id",i.value=e.id,d.appendChild(i);const r=document.createElement("div");r.classList.add("price-row__name"),r.textContent=e.article,d.appendChild(r);const o=document.createElement("div");let s;return o.classList.add("price-row__name"),o.textContent=e.name,d.appendChild(o),t.forEach((t=>{s=document.createElement("input"),s.classList.add("price-row__item","price-row__item_disabled"),s.type="number",s.step="0.01",s.lang="en";const c=JSON.parse(e.price).find((e=>"price_type__id"in e&&e.price_type__id===t.price_name__id));s.dataset.class=n,s.dataset.id=c?c.id:"",s.setAttribute("data-"+a+"__"+n+"__id",e.id),s.dataset.standard_price_type__price_type__id=t.price_name__id,s.dataset.discount=t.discount,s.value=c?c.price:"",s.readOnly=!0,s.addEventListener("dblclick",(e=>{const t=document.querySelector(".dictionary-frame__header_right"),n=t.querySelector(".dictionary-frame__input"),a=t.querySelector(".btn__save");e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled"),n.disabled=!0,a.disabled=!0,a.classList.add("btn__disabled")})),s.addEventListener("change",(e=>{e.target.readOnly=!0})),"1"===s.dataset.discount&&s.addEventListener("change",(e=>{d.querySelectorAll('input[type="number"]').forEach((t=>{"1"!==t.dataset.discount&&(t.value=(Math.ceil(e.target.value*Number.parseFloat(t.dataset.discount)*100)/100).toFixed(2),t.dispatchEvent(new Event("dblclick",{bubbles:!0})),e.target.classList.remove("price-row__item_disabled"))}))})),d.appendChild(s)})),d}[c,l,i]=m.then?(await m)():m,a()}catch(E){a(E)}}))},4256:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{g:()=>u});var c=n(1211),d=n(7979),i=n(1057),r=n(2428),o=n(4859),s=n(1836),l=e([s,r,i]);async function u(e){const t=document.querySelector(".dictionary-frame__header_right"),n=(0,o.C)("Загрузить несколько фото");n.addEventListener("click",await s.i),t.insertAdjacentElement("afterbegin",n);const a=document.createElement("div"),l=document.createElement("div");let u;l.classList.add("catalogue","catalogue__title"),d.t.forEach((e=>{u=document.createElement("p"),u.classList.add("catalogue__title-item"),u.textContent=e.label,l.appendChild(u)}));const m=(0,c.E)("Новый");m.addEventListener("click",(async e=>{e.target.disabled=!0,e.target.classList.add("btn__disabled");const t=document.createElement("form");await(0,r.I)({id:0},t);const n=t.querySelector(".btn__cancel");n.disabled=!1,n.classList.remove("btn__disabled"),p.insertAdjacentElement("afterbegin",t),t.scrollIntoView({behavior:"smooth"}),t.focus()})),l.appendChild(m),a.appendChild(l);const p=document.createElement("div");return p.classList.add("catalogue__content"),await(0,i.D)(p,0,0,0,"None",0),a.appendChild(p),a}[s,r,i]=l.then?(await l)():l,a()}catch(m){a(m)}}))},4449:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{h:()=>i});var c=n(449),d=e([c]);async function i(e){const t=document.querySelector(".content"),n=t.querySelector(".dictionary-frame__header_right"),a=n.querySelector(".dictionary-frame__input"),d=n.querySelector(".btn__save");a.disabled=!1,d.disabled=!1,d.classList.remove("btn__disabled");const i=t.querySelector(".price-block"),r=t.querySelector(".dictionary-frame__header_left").querySelector(".price-dropdown__input").value,o=a.value,s=t.querySelector(".dictionary-frame__header_right").querySelector("input[hidden]").value;i&&(i.innerHTML="");const l=await(0,c.p)(r,s,o);i.appendChild(l.header),i.appendChild(l.form)}c=(d.then?(await d)():d)[0],a()}catch(r){a(r)}}))},4708:(e,t,n)=>{function a(e){let t=e;return function(e){return/^[a-zA-Zа-яА-ЯёЁ0-9 ._#]*$/.test(e)}(e)&&e||(t="None"),t.replace(/ /g,"|")}n.d(t,{Z:()=>a})},4821:(e,t,n)=>{function a(e){const t=document.createElement("textarea");return t.classList.add("modal__content_textarea"),t.value=e.fieldValue,t.name=e.fieldName.field,t}n.d(t,{n:()=>a})},4859:(e,t,n)=>{function a(e){const t=document.createElement("button");return t.classList.add("btn","btn__neutral"),t.textContent=e,t}n.d(t,{C:()=>a})},5095:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{k:()=>r});var c=n(2830),d=n(8645),i=e([d,c]);async function r(e,t){const n=e.closest(".dictionary-frame__header").parentElement;n.querySelector(".dictionary-frame__input").value="";const a=n.querySelector(".check-deleted"),i=n.querySelector(".check-new");"Catalogue"===t?await(0,d.l)(n,a,i,"None"):await(0,c.n)(n,t,a,i,"None")}[d,c]=i.then?(await i)():i,a()}catch(o){a(o)}}))},5352:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>s});var c=n(6723),d=n(6332),i=n(6825),r=n(7502),o=e([i,c,r]);async function s(e,t,n,a,o,s){const l=await(0,i.G)(t),u="Goods"!==t?(0,d.I)(l):"14px 1.5fr 4fr 1fr 1fr 1fr 3fr 3fr 3fr 2fr 2fr 1fr 1fr 1fr 1fr 1fr 1.5fr",m=e.closest(".dictionary-content__rows");[...(await(0,c.Y)(t,n,a,s,o,u)).children].forEach((e=>{m.appendChild(e)}));const p=e.cloneNode(!0);e.parentNode.replaceChild(p,e),p.querySelector("button").addEventListener("click",(e=>(0,r.w)(e)))}[i,c,r]=o.then?(await o)():o,a()}catch(l){a(l)}}))},5364:(e,t,n)=>{async function a(e){return document.createElement("div")}n.d(t,{U:()=>a})},5597:(e,t,n)=>{function a(e,t,n){const a=document.createElement("input");return"precise"===e?(a.type="number",a.step="0.0001"):"float"===e?(a.type="number",a.step="0.01"):a.type=e,a.name=t,"id"===t.slice(-2)&&(a.hidden=!0),"checkbox"===e?(a.checked=n,a.classList.add("check","catalogue__check")):(a.value=n,a.readOnly=!0,a.classList.add("catalogue__input")),a}n.d(t,{t:()=>a})},5800:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{s:()=>o});var c=n(7310),d=n(3757),i=n(4189),r=e([c,i]);async function o(e,t){const n=document.createElement("div");n.classList.add("price-content");const a=c.e+"volume_price_data/"+e+"/"+t,r=await(0,d.D)(a),o="0.8fr 3.2fr repeat("+r.price_type_length+", 1fr) 120px 102px",l=await(0,i.R)(r.header,o);return s(r.form,n,r.header,r.form.volumes,o),{form:n,header:l}}function s(e,t,n,a,c){a.forEach((a=>{const d=document.createElement("div");d.classList.add("price-content__volume-header"),d.textContent="Количество "+a.name+" шт",t.appendChild(d);const i=document.createElement("div");i.appendChild(l(e,n,a,c)),t.appendChild(i)}))}function l(e,t,n,a){const c=document.createElement("div");return e.goods.forEach((e=>{c.appendChild(u(e,t,n,a))})),c}function u(e,t,n,a){const c=document.createElement("div");c.classList.add("price-row"),c.style.gridTemplateColumns=a;const d=document.createElement("input");d.type="text",d.hidden=!0,d.name="id",d.value=e.id,c.appendChild(d);const i=document.createElement("div");i.classList.add("price-row__name"),i.textContent=e.article,c.appendChild(i);const r=document.createElement("div");let o;return r.classList.add("price-row__name"),r.textContent=e.name,c.appendChild(r),t.forEach((t=>{o=document.createElement("input"),o.classList.add("price-row__item","price-row__item_disabled"),o.type="number",o.step="0.01",o.lang="en";const a=JSON.parse(e.price).find((e=>"price_type__id"in e&&e.price_type__id===t.price_name__id&&e.price_volume__id===n.id));o.dataset.class="goods",o.dataset.id=a?a.id:"",o.setAttribute("data-goods__goods__id",e.id),o.dataset.standard_price_type__price_type__id=t.price_name__id,o.dataset.price_goods_quantity__price_volume__id=n.id,o.value=a?a.price:"",o.readOnly=!0,o.addEventListener("dblclick",(e=>{const t=document.querySelector(".dictionary-frame__header_right"),n=t.querySelector(".dictionary-frame__input"),a=t.querySelector(".btn__save");e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled"),n.disabled=!0,a.disabled=!0,a.classList.add("btn__disabled")})),o.addEventListener("change",(e=>{e.target.readOnly=!0})),c.appendChild(o)})),c}[c,i]=r.then?(await r)():r,a()}catch(m){a(m)}}))},6332:(e,t,n)=>{function a(e){let t="14px 6fr ";return e.forEach((e=>{"name"!==e.field&&("boolean"===e.type||"number"===e.type||"float"===e.type||"precise"===e.type?t+="1fr ":"textarea"===e.type?t+="6fr ":t+="3fr ")})),t+="80px",t}n.d(t,{I:()=>a})},6352:(e,t,n)=>{function a(e){const t=e.target.closest("form").querySelector('input[type="file"]');t.value="",t.dispatchEvent(new Event("change",{bubbles:!0}))}n.d(t,{O:()=>a})},6467:(e,t,n)=>{n.d(t,{q:()=>a});const a='<i class="fa fa-solid fa-magnifying-glass"></i>'},6723:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{R:()=>m,Y:()=>u});var c=n(3757),d=n(7310),i=n(2814),r=n(5352),o=n(8264),s=n(7502),l=e([d,r,s]);async function u(e,t,n,a,i,o){const s=document.createElement("div");s.classList.add("dictionary-content__rows");const l=d.e+"field_values/"+e+"/"+t+"/"+n+"/"+a+"/"+i,u=await(0,c.D)(l);let p=0;return u.values.forEach((c=>{let d=document.createElement("div");m(d,c,u.field_params,e),d.style.gridTemplateColumns=o,s.appendChild(d),p++,20===p&&(d.dataset.lastRecord=a+20,d.addEventListener("mouseover",(c=>(0,r.Z)(c.target,e,t,n,i,a+20))))})),s}function m(e,t,n,a){e.classList.add("dictionary-content__row");const c=(0,i.N)();t.hex&&(c.style.backgroundColor=t.hex),e.appendChild(c),e.id=a+"_row_"+t.id,Object.keys(t).forEach(((a,c)=>{if("id"!==a){let c;Object.keys(n).includes(a)&&"image"===n[a].type?(c=document.createElement("img"),c.classList.add("dictionary-content__row_img"),c.src=n[a].url+t[a],c.alt=t[a]):Object.keys(n).includes(a)&&"boolean"===n[a].type?(c=document.createElement("input"),c.type="checkbox",c.checked=t[a],c.disabled=!0,c.classList.add("dictionary-content__check")):(c=document.createElement("div"),c.classList.add("dictionary-content__row_item"),c.textContent=t[a]),e.appendChild(c)}}));const d=(0,o.T)("Изм.");d.dataset.itemId=t.id,d.addEventListener("click",(e=>(0,s.w)(e))),e.appendChild(d)}[d,r,s]=l.then?(await l)():l,a()}catch(p){a(p)}}))},6744:(e,t,n)=>{function a(e,t){const n=e.querySelector("summary");Array.from(t).some((e=>e.classList.contains("text-active")))?n.classList.add("text-active"):n.classList.remove("text-active")}n.d(t,{P:()=>a})},6825:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{G:()=>r});var c=n(7310),d=n(3757),i=e([c]);async function r(e){const t=c.e+"field_names/"+e;return await(0,d.D)(t)}c=(i.then?(await i)():i)[0],a()}catch(o){a(o)}}))},6872:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{O:()=>m,f:()=>p});var c=n(4708),d=n(7310),i=n(7728),r=n(8645),o=n(1401),s=n(8664),l=n(8316),u=e([d,r]);async function m(e){e.preventDefault();const t=e.target.closest("form"),n=new FormData(t),a=Object.fromEntries(n.entries()).csv_file.name,c=t.querySelector(".error-message");a.endsWith(".csv")?await _(e,t,n,"catalogue_csv_load",c):(t.querySelector("input").value="",c.style.display="block",c.textContent="Неправильный формат файла")}async function p(e){e.preventDefault();const t=e.target.closest("form"),n=new FormData(t),a=t.querySelector(".error-message");await _(e,t,n,"catalogue_files_load",a)}async function _(e,t,n,a,u){const m=document.querySelector(".content"),p=m.querySelector(".dictionary-frame__input"),_=(0,c.Z)(p.value),h=m.querySelector(".check-deleted"),y=m.querySelector(".check-new"),f=e.target.closest("dialog"),v=d.e+a;await fetch(v,{method:"POST",headers:{"X-CSRFToken":(0,l.m)()},body:n}).then((e=>e.json())).then((e=>{if(e.error)t.querySelector("input").value="",u.style.display="block",u.textContent=e.error;else{(0,i.O)(f),(0,r.l)(m,h,y,_);const t=(0,o.J)(e);document.querySelector(".service").appendChild(t),t.showModal(),(0,s.Y)(t)}}))}[d,r]=u.then?(await u)():u,a()}catch(h){a(h)}}))},6977:(e,t,n)=>{n.d(t,{B:()=>c});var a=n(2952);function c(e){const t=document.createElement("div");t.classList.add("modal__content_file-frame");const n=(0,a.k)("file");return n.placeholder=e.fieldValue,n.name=e.fieldName.field,t.appendChild(n),t}},7090:(e,t,n)=>{function a(){const e=document.getElementById("userData"),t=JSON.parse(localStorage.getItem("userData"));return e.textContent=t.username,"Авторизуйтесь"!==t.username}n.d(t,{g:()=>a})},7164:(e,t,n)=>{n.d(t,{y:()=>c});var a=n(2952);function c(e){const t=(0,a.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},7245:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{K:()=>i});var c=n(2907),d=e([c]);async function i(e,t,n,a){const d=document.createElement("section");d.classList.add("dictionary-frame"),d.id=e;const i=(0,c.I)(e,t,n,a);return d.appendChild(i),d}c=(d.then?(await d)():d)[0],a()}catch(r){a(r)}}))},7310:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{G:()=>f,e:()=>y});var c=n(8846),d=n(9857),i=n(4114),r=n(4256),o=n(3232),s=n(3757),l=n(7090),u=n(8016),m=n(313),p=n(3002),_=n(5364),h=e([i,r,o,c,d]);[i,r,o,c,d]=h.then?(await h)():h;const y="./json/",f={Goods:i.f,Catalogue:r.g,PriceList:o.o,UserExtension:m.a,Order:p.r,CustomerGroup:_.U},v=y+"userdata",E=await(0,s.D)(v);localStorage.setItem("userData",JSON.stringify(E)),(0,l.g)()||document.querySelector(".menu__right").addEventListener("click",u.i);const C=document.querySelectorAll(".menu__item"),g=document.querySelector(".content");C.forEach((e=>{e.addEventListener("click",(async t=>{e.classList.contains("menu__item_bold")||(e.classList.add("menu__item_bold"),g.innerHTML="","Standard"===t.target.dataset.page?(0,c.f)(g,e.dataset.content):await(0,d.H)(g,e.dataset.content,t.target.dataset.page)),C.forEach((t=>{t!==e&&t.classList.remove("menu__item_bold")}))}))})),a()}catch(e){a(e)}}),1)},7475:(e,t,n)=>{n.d(t,{d:()=>c});var a=n(2952);function c(e){const t=(0,a.k)("date");return t.value=e.fieldValue,t.name=e.fieldName.field,t}},7502:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{w:()=>r});var c=n(7646),d=n(8664),i=e([c]);async function r(e){e.preventDefault();const t=e.target.closest(".dictionary-content").parentElement.querySelector(".dictionary-frame__header"),n=t.dataset.class,a=t.dataset.title,i=await(0,c.w)(n,a,e.target.dataset.itemId);document.querySelector(".service").appendChild(i),i.showModal(),(0,d.Y)(i),console.log()}c=(i.then?(await i)():i)[0],a()}catch(o){a(o)}}))},7541:(e,t,n)=>{n.d(t,{P:()=>c});var a=n(2952);function c(e){const t=(0,a.k)("number");return t.value=e.fieldValue,t.name=e.fieldName.field,t.step="0.01",t}},7646:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{w:()=>m});var c=n(8063),d=n(9546),i=n(4085),r=n(7310),o=n(7728),s=n(6723),l=n(8316),u=e([i,r,s]);async function m(e,t,n){const a=document.createElement("dialog");a.classList.add("modal"),a.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,o.O)(a)}));const r=(0,c.h)(a,t,n);a.appendChild(r);const s=document.createElement("form");s.id=e+"__form",s.classList.add("modal__form"),s.enctype="multipart/form-data";const l=await(0,i.H)(a,e,n);s.appendChild(l),s.appendChild((0,d._)(a,n)),a.appendChild(s);const u=new FormData(s);return s.querySelector(".submit").addEventListener("click",(t=>p(t,s,e,u))),a}async function p(e,t,n,a){e.preventDefault();const c=e.target.dataset.id,d=t.closest(".modal");d.querySelectorAll("input").forEach((e=>{e.classList.remove("border-alert")})),e.target.disabled=!0;const i=new FormData(t),u=d.querySelector('input[type="file"]');if(!_(i,a)||u){const t=r.e+"edit_dictionary/"+n+"/"+c;await fetch(t,{method:"POST",headers:{"X-CSRFToken":(0,l.m)()},body:i}).then((e=>e.json())).then((t=>{const a=t.errors;if(a){let t;a.forEach((n=>{e.target.disabled=!1,t=d.querySelector(`[name = "${n}"]`),t.hidden?t.previousElementSibling.classList.add("border-alert"):t.classList.add("border-alert"),e.target.scrollIntoView({behavior:"smooth",block:"center"})}))}else{let e;if("0"!==c)e=document.querySelector("#"+n+"_row_"+c),e.innerHTML="";else{let a;e=document.createElement("div"),e.id=n+"_row_"+t.values.id,e.classList.add("dictionary-content__row"),a=document.getElementById(n)?document.getElementById(n).querySelector(".dictionary-content__rows"):document.querySelector(".dictionary-content__rows"),a.insertAdjacentElement("afterbegin",e),e.style.gridTemplateColumns=a.closest(".dictionary-content").dataset.grid}(0,s.R)(e,t.values,t.params,n),e.scrollIntoView({behavior:"smooth",block:"center"}),e.focus(),(0,o.O)(d)}}))}}function _(e,t){const n=Array.from(t.values()),a=Array.from(e.values());return n.sort(),a.sort(),JSON.stringify(n)===JSON.stringify(a)}[i,r,s]=u.then?(await u)():u,a()}catch(h){a(h)}}))},7674:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{c:()=>o});var c=n(7310),d=n(4449),i=n(8316),r=e([c,d]);async function o(e){const t=document.querySelector(".content").querySelector(".dictionary-frame__header_left").querySelector("input[hidden]").value,n=document.querySelectorAll("input.type-table__input:not(.price-row__item_disabled)"),a=[];let r;[...n].forEach((e=>{r={},Object.entries(e.dataset).forEach((([e,t])=>{Number.parseInt(t)?r[e]=Number.parseInt(t):r[e]=t})),r.price_list__id=Number.parseInt(t),r.price=Number.parseFloat(e.value),a.push(r)}));const o=c.e+"printing_price_list_save";fetch(o,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":(0,i.m)()},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{e.error||(0,d.h)()}))}[c,d]=r.then?(await r)():r,a()}catch(s){a(s)}}))},7728:(e,t,n)=>{function a(e){e.close(),e.remove()}n.d(t,{O:()=>a})},7847:(e,t,n)=>{function a(e){const t=document.createElement("input");return t.type="checkbox",t.checked=e,t.classList.add("check"),t}n.d(t,{G:()=>a})},7979:(e,t,n)=>{n.d(t,{t:()=>a});const a=[{field:"deleted",type:"boolean",label:"уд."},{field:"name",type:"string",label:"название",null:!1},{field:"item_article",type:"string",label:"артикул",null:!1},{field:"main_color",type:"foreign",label:"осн. цвет",foreignClass:"Color",null:!1},{field:"goods_option",type:"foreign",label:"опция",foreignClass:"GoodsOption",null:!1},{field:"image",type:"img",label:"фото",url:"/static/viki_web_cms/files/item_photo/",null:!0},{field:"simple_article",type:"boolean",label:"ст. арт."},{field:"goods",type:"foreign",label:"номенклатура",foreignClass:"Goods",null:!1},{field:"image_file",type:"file",label:"файл",null:!0}]},8007:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{h:()=>i});var c=n(816),d=e([c]);async function i(e){const t=e.fieldName.foreignClass,n=e.fieldValue,a=await(0,c.M)(t,n,e.fieldName.null);return a.querySelector("[hidden]").name=e.fieldName.field+"_id",a}c=(d.then?(await d)():d)[0],a()}catch(r){a(r)}}))},8016:(e,t,n)=>{n.d(t,{i:()=>l});var a=n(8063),c=n(8664),d=n(8264),i=n(1211),r=n(7728),o=n(7090),s=n(8316);async function l(){const e=document.createElement("dialog");e.classList.add("login-cms");const t=(0,a.h)(e,"Вход",0);t.firstElementChild.textContent="Вход",e.appendChild(t);const n=document.createElement("input");n.type="text",n.classList.add("login-cms__input"),e.appendChild(n);const u=document.createElement("input");u.type="password",u.classList.add("login-cms__input"),e.appendChild(u),document.querySelector(".service").appendChild(e);const m=document.createElement("div");m.classList.add("login-cms__btn-block");const p=(0,d.T)("Закрыть");p.addEventListener("click",(t=>{(0,r.O)(e)})),m.appendChild(p);const _=(0,i.E)("Войти");_.addEventListener("click",(t=>{!async function(e,t,n,a){e.preventDefault(),await fetch("./user_login",{method:"POST",headers:{"X-CSRFToken":(0,s.m)()},body:JSON.stringify({username:t,password:n})}).then((e=>e.json())).then((e=>{localStorage.setItem("userData",JSON.stringify(e));const t=(0,o.g)(),n=document.querySelector(".menu__right");t?n.removeEventListener("click",l):n.addEventListener("click",l),(0,r.O)(a)}))}(t,n.value,u.value,e)})),m.appendChild(_),e.appendChild(m),e.showModal(),(0,c.Y)(e),document.querySelector(".menu-right")}},8063:(e,t,n)=>{n.d(t,{h:()=>c});var a=n(7728);function c(e,t,n){const c=document.createElement("div");c.classList.add("modal__header");let d=t;d="0"===n?"Создать "+d:"Изменить "+d;const i=document.createElement("div");i.textContent=d,c.appendChild(i);const r=document.createElement("button");return r.classList.add("modal__header_btn"),r.textContent="×",r.addEventListener("click",(t=>{t.preventDefault(),(0,a.O)(e)})),c.appendChild(r),c}},8264:(e,t,n)=>{function a(e){const t=document.createElement("button");return t.classList.add("btn","btn__cancel"),t.textContent=e,t}n.d(t,{T:()=>a})},8316:(e,t,n)=>{function a(){return document.cookie.split("; ").find((e=>e.startsWith("csrftoken=")))?.split("=")[1]}n.d(t,{m:()=>a})},8645:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{l:()=>i});var c=n(1057),d=e([c]);async function i(e,t,n,a){const d=e.querySelector(".catalogue__content");d.innerHTML="",await(0,c.D)(d,t.checked?0:1,n.checked?0:1,0,a,0)}c=(d.then?(await d)():d)[0],a()}catch(r){a(r)}}))},8664:(e,t,n)=>{function a(e){let t,n,a=!1;e.querySelector(".modal__header").addEventListener("mousedown",(c=>{a=!0,t=c.clientX-e.offsetLeft,n=c.clientY-e.offsetTop,e.style.cursor="grabbing"})),document.addEventListener("mousemove",(c=>{a&&(e.style.left=c.clientX-t+"px",e.style.top=c.clientY-n+"px")})),document.addEventListener("mouseup",(()=>{a=!1,e.style.cursor="grab"}))}n.d(t,{Y:()=>a})},8833:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{h:()=>l});var c=n(7310),d=n(4859),i=n(1211),r=n(3757),o=n(7674),s=e([c,o]);async function l(e,t){const n=document.querySelector(".dictionary-frame__header_right"),a=n.querySelector(".dictionary-frame__input"),d=n.querySelector(".btn__save"),i=n.querySelector(".btn__cancel");a.disabled=!0,d.disabled=!0,d.classList.add("btn__disabled"),i.disabled=!0,i.classList.add("btn__disabled");const o=document.createElement("div");o.classList.add("price-content");const s=await u(),l=c.e+"printing_price_data/"+e;let _;return(await(0,r.D)(l)).priceData.forEach((e=>{const t=document.createElement("div");t.classList.add("type-table"),_="2fr repeat("+e.print_volume_length+", 1fr)",t.appendChild(m(e,_)),e.print_groups.forEach((n=>{t.appendChild(p(n,_,e.print_volume_data))})),o.appendChild(t)})),{form:o,header:s}}async function u(){const e=document.createElement("div");e.classList.add("print-header");const t=(0,d.C)("Загрузить csv");e.appendChild(t);const n=(0,i.E)("Сохранить");return e.appendChild(n),n.addEventListener("click",await o.c),e}function m(e,t){let n;const a=document.createElement("div");return a.classList.add("type-table__row","type-table__header"),a.style.gridTemplateColumns=t,n=document.createElement("div"),a.appendChild(n),n.textContent=e.print_type__name,e.print_volume_data.forEach((e=>{n=document.createElement("div"),n.textContent="до "+e.quantity,a.appendChild(n)})),a}function p(e,t,n){const a=document.createElement("div");a.classList.add("type-table__row"),a.style.gridTemplateColumns=t;const c=document.createElement("div");return c.classList.add("type-table__item"),c.textContent=e.print_price_group__name,a.appendChild(c),n.forEach((t=>{a.appendChild(_(e,t))})),a}function _(e,t){const n=document.createElement("input");n.type="number",n.classList.add("type-table__input","price-row__item_disabled"),n.readOnly=!0,n.addEventListener("dblclick",(e=>{e.target.readOnly=!1,e.target.classList.remove("price-row__item_disabled")}));const a=e.prices.find((e=>e.print_volume__id===t.print_volume_id));return n.dataset.id=a?a.price__id:"",n.dataset.print_volume__id=t.print_volume_id,n.dataset.print_price_group__id=e.print_price_group__id,n.value=a?.price,n}[c,o]=s.then?(await s)():s,a()}catch(h){a(h)}}))},8846:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{f:()=>i});var c=n(3682),d=e([c]);function i(e,t){e.style.flexDirection="row";const n=document.createElement("div");n.classList.add("content__left"),e.appendChild(n);const a=document.createElement("div");a.classList.add("content__right"),e.appendChild(a),JSON.parse(t).forEach((e=>{let t=document.createElement("details");t.classList.add("section-left");let a=document.createElement("summary");a.textContent=e.section_name,t.appendChild(a),e.cms_settings.forEach((e=>{let n=document.createElement("li");n.textContent=e.setting,n.dataset.class=e.setting_class,n.dataset.upload=e.upload,n.dataset.new=e.new,n.classList.add("section-left__content"),t.appendChild(n)}));const d=t.querySelectorAll("li");d.forEach((e=>{e.addEventListener("click",(()=>(0,c.V)(e,e.dataset.class,JSON.parse(e.dataset.upload),JSON.parse(e.dataset.new),t,d)))})),n.appendChild(t)}))}c=(d.then?(await d)():d)[0],a()}catch(r){a(r)}}))},9132:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{n:()=>o});var c=n(2830),d=n(4708),i=n(8645),r=e([i,c]);async function o(e,t){const n=e.closest(".dictionary-frame__header").parentElement,a=n.querySelector(".dictionary-frame__input").value,r=n.querySelector(".check-deleted"),o=n.querySelector(".check-new");"Catalogue"===t?await(0,i.l)(n,r,o,(0,d.Z)(a)):await(0,c.n)(n,t,r,o,(0,d.Z)(a))}[i,c]=r.then?(await r)():r,a()}catch(s){a(s)}}))},9227:(e,t,n)=>{n.d(t,{r:()=>c});var a=n(2952);function c(e){const t=(0,a.k)("checkbox");return t.checked=e.fieldValue,t.id=e.fieldName.field+"Input",t.name=e.fieldName.field,t}},9336:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{C:()=>l});var c=n(7728),d=n(8063),i=n(1211),r=n(9635),o=n(8664),s=e([r]);async function l(e){const t=document.querySelector(".service"),n=document.createElement("dialog");n.classList.add("catalogue__modal"),n.addEventListener("keypress",(e=>{"Escape"===e.key&&(0,c.O)(n)}));const a=(0,d.h)(n,"",0);a.firstElementChild.textContent="Новый прайс лист",n.appendChild(a);const s=document.createElement("form");s.id="priceDialog",s.classList.add("modal__form");const l=document.createElement("div");l.classList.add("price__modal_row");const u=document.createElement("label");u.classList.add("price__modal_label"),u.textContent="дата прайс-листа",u.htmlFor="priceDate";const m=document.createElement("input");m.classList.add("price__modal_date"),m.type="date",m.id="priceDate",m.name="priceDate",l.appendChild(u),l.appendChild(m),s.appendChild(l);const p=document.createElement("div");p.classList.add("price__modal_row");const _=document.createElement("label");_.classList.add("price__modal_label"),_.textContent="акция",_.htmlFor="promoCheck";const h=document.createElement("input");h.classList.add("price__modal_check"),h.type="checkbox",h.id="promoCheck",h.name="promoCheck";const y=document.createElement("label");y.classList.add("price__modal_label"),y.textContent="окончание",y.htmlFor="promoDate";const f=document.createElement("input");f.classList.add("price__modal_date"),f.type="date",f.id="promoDate",f.name="promoDate",p.appendChild(_),p.appendChild(h),p.appendChild(y),p.appendChild(f),s.appendChild(p);const v=(0,i.E)("Записать");v.addEventListener("click",r.R),v.classList.add("price__modal_btn"),s.appendChild(v),n.appendChild(s),t.appendChild(n),n.showModal(),(0,o.Y)(n)}r=(s.then?(await s)():s)[0],a()}catch(u){a(u)}}))},9370:(e,t,n)=>{function a(e){const t=e.target.closest("form");if(t.querySelector("textarea").value){const e=t.querySelector(".btn__save");e.disabled=!1,e.classList.remove("btn__disabled");const n=t.querySelector(".btn__cancel");n.disabled=!1,n.classList.remove("btn__disabled")}}n.d(t,{W:()=>a})},9410:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{c:()=>o});var c=n(7310),d=n(3757),i=n(8316),r=e([c]);async function o(e,t){t.disabled=!0,t.classList.add("btn__disabled");const n=t.closest("form"),a=n.querySelector('input[name="id"]').value,r=document.querySelector(".catalogue__title").querySelector(".btn__save");r.disabled=!1,r.classList.remove("btn__disabled");const o=new FormData(n),s=Object.fromEntries(o.entries());let l=!1;if("0"!==a){const e=c.e+"catalogue_record/"+a,t=await(0,d.D)(e);for(const e in s)if(t.values[0][e]!==s[e]){l=!0;break}}if("0"===a||l){e.preventDefault();const t=c.e+"save_catalogue_item/"+a;await fetch(t,{method:"POST",headers:{"X-CSRFToken":(0,i.m)()},body:o}).then((e=>e.json())).then((e=>{"0"===a&&(n.querySelector('input[name="id"]').value=e.id);const t=n.querySelector(".btn__cancel");t.disabled=!0,t.classList.add("btn__disabled")}))}}c=(r.then?(await r)():r)[0],a()}catch(s){a(s)}}))},9546:(e,t,n)=>{n.d(t,{_:()=>i});var a=n(8264),c=n(1211),d=n(7728);function i(e,t){const n=document.createElement("div");n.classList.add("modal__button-block");const i=(0,a.T)("Отменить");i.type="button",i.addEventListener("click",(t=>{t.preventDefault(),(0,d.O)(e)}));const r=(0,c.E)("Записать");return r.type="button",r.classList.add("submit"),r.dataset.id=t,n.appendChild(i),n.appendChild(r),n}},9550:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{Z:()=>r});var c=n(2814),d=n(7502),i=e([d]);async function r(e){const t=document.createElement("div");t.classList.add("dictionary-content__title","dictionary-content__row"),t.appendChild((0,c.N)()),e.forEach((e=>{let n=document.createElement("div");n.classList.add("dictionary-content__title_item"),n.textContent=e.label,t.appendChild(n)}));const n=document.createElement("button");return n.classList.add("btn","btn__save"),n.textContent="Создать",n.dataset.itemId="0",n.addEventListener("click",(e=>(0,d.w)(e))),t.appendChild(n),t}d=(i.then?(await i)():i)[0],a()}catch(o){a(o)}}))},9635:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{R:()=>s});var c=n(483),d=n(7310),i=n(7728),r=n(8316),o=e([d,c]);async function s(e){e.preventDefault();const t=e.target.closest("form"),n=document.getElementById("promoCheck"),a=document.getElementById("promoDate");a.addEventListener("click",(()=>{a.classList.remove("price__modal_border-alert")})),n.addEventListener("click",(()=>{a.classList.remove("price__modal_border-alert")}));const o=document.getElementById("priceDate");if(o.addEventListener("click",(()=>{o.classList.remove("price__modal_border-alert")})),o.value)if(n.checked&&!a.value)a.classList.add("price__modal_border-alert");else{const n=new FormData(t),a=d.e+"save_new_price_date";await fetch(a,{method:"POST",headers:{"X-CSRFToken":(0,r.m)()},body:n}).then((e=>e.json())).then((async t=>{const n=document.querySelector(".dictionary-frame__header_left"),a=n.querySelector(".dropdown__list"),d=n.querySelector(".price-dropdown__input"),r=n.querySelector('input[name="priceDateId"]'),o=e.target.closest("dialog");await(0,c.X4)(t,a,d,r),(0,i.O)(o)}))}else o.classList.add("price__modal_border-alert")}[d,c]=o.then?(await o)():o,a()}catch(l){a(l)}}))},9857:(e,t,n)=>{n.a(e,(async(e,a)=>{try{n.d(t,{H:()=>r});var c=n(2907),d=n(7310),i=e([c,d]);async function r(e,t,n){e.style.flexDirection="column";const a=JSON.parse(t)[0],i=a.cms_settings[0].setting,r=a.cms_settings[0].setting_class,o=a.cms_settings[0].upload,s=a.cms_settings[0].new,l=a.cms_settings[0].delete,u=(0,c.I)(r,i,o,s,l);e.appendChild(u);const m=await d.G[n](r);e.appendChild(m)}[c,d]=i.then?(await i)():i,a()}catch(o){a(o)}}))}},d={};function i(e){var t=d[e];if(void 0!==t)return t.exports;var n=d[e]={exports:{}};return c[e](n,n.exports,i),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&e.d<1&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(c,d,i)=>{var r;i&&((r=[]).d=-1);var o,s,l,u=new Set,m=c.exports,p=new Promise(((e,t)=>{l=t,s=e}));p[t]=m,p[e]=e=>(r&&e(r),u.forEach(e),p.catch((e=>{}))),c.exports=p,d((c=>{var d;o=(c=>c.map((c=>{if(null!==c&&"object"==typeof c){if(c[e])return c;if(c.then){var d=[];d.d=0,c.then((e=>{i[t]=e,a(d)}),(e=>{i[n]=e,a(d)}));var i={};return i[e]=e=>e(d),i}}var r={};return r[e]=e=>{},r[t]=c,r})))(c);var i=()=>o.map((e=>{if(e[n])throw e[n];return e[t]})),s=new Promise((t=>{(d=()=>t(i)).r=0;var n=e=>e!==r&&!u.has(e)&&(u.add(e),e&&!e.d&&(d.r++,e.push(d)));o.map((t=>t[e](n)))}));return d.r?s:i()}),(e=>(e?l(p[n]=e):s(m),a(r)))),r&&r.d<0&&(r.d=0)},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(7310)})();