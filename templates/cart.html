{% extends 'header.html' %}
{% load static %}
{% block content %}
{#    <script src="{% static 'viki_web/js/layout.js' %}" defer type="module"></script>#}
    <script src="{% static 'viki_web/js/cart.js' %}" defer type="module"></script>

    <main>
        <div class="container">
            <h1 class="section-title">Корзина</h1>
            
            <div class="cart-page">
                <!-- Cart items -->
                <div class="cart-page__items">
                    <!-- Cart item 1 -->
                    <div class="cart-item">
                        <div class="cart-item__image">
                            <img src="{% static 'viki_web/icons/logo.svg' %}" alt="Товар 1">
                        </div>
                        <div class="cart-item__info">
                            <h3 class="cart-item__name">Ручка металлическая Premium</h3>
                            <p class="cart-item__article">Артикул: PEN-001</p>
                            <p class="cart-item__description">КОРПУС: Синий (PANTONE 286C) ДЕТАЛИ: Серебро</p>
                        </div>
                        <div class="cart-item__price">
                            <p class="cart-item__price-single">1,200 руб.</p>
                        </div>
                        <div class="cart-item__quantity">
                            <button class="cart-item__quantity-btn cart-item__quantity-decrease">-</button>
                            <input type="number" class="cart-item__quantity-input" value="2" min="1">
                            <button class="cart-item__quantity-btn cart-item__quantity-increase">+</button>
                        </div>
                        <div class="cart-item__total">
                            <p class="cart-item__total-price">2,400 руб.</p>
                        </div>
                        <div class="cart-item__actions">
                            <button class="cart-item__remove">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </div>
                        
                        <!-- Branding section -->
                        <div class="cart-item__branding">
                            <div class="branding-header">
                                <h4>Брендирование</h4>
                                <button class="branding-add-btn" data-item="PEN-001">+ Добавить</button>
                            </div>
                            
                            <div class="branding-items">
                                <div class="branding-item">
                                    <div class="branding-item__row">
                                        <div class="branding-field branding-field-type">
                                            <select class="branding-type">
                                                <option value="laser">Лазерная гравировка</option>
                                                <option value="uv">УФ-печать</option>
                                                <option value="tampo">Тампопечать</option>
                                            </select>
                                        </div>
                                        <div class="branding-field branding-field-location">
                                            <select class="branding-location">
                                                <option value="barrel">Корпус</option>
                                                <option value="cap">Колпачок</option>
                                                <option value="clip">Клип</option>
                                            </select>
                                        </div>
                                        <div class="branding-field branding-field-colors">
                                            <select class="branding-colors">
                                                <option value="1">1 цвет</option>
                                                <option value="2">2 цвета</option>
                                                <option value="3">3 цвета</option>
                                                <option value="4">4 цвета</option>
                                            </select>
                                        </div>
                                        <div class="branding-field branding-checkbox">
                                            <input type="checkbox" id="second-pass-1" class="branding-second-pass">
                                            <label for="second-pass-1">2й проход</label>
                                        </div>
                                        <div class="branding-field branding-field-price">
                                            <input type="number" class="branding-price" value="500" min="0">
                                            <span>руб.</span>
                                        </div>
                                        <div class="branding-field branding-field-total">
                                            <span class="branding-total-price">1,000 руб.</span>
                                        </div>
                                        <div class="branding-field branding-field-actions">
                                            <button class="branding-remove-btn"><i class="fa-solid fa-trash"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="branding-subtotal">
                                <span>Итого за нанесение:</span>
                                <span class="branding-subtotal-price">1,000 руб.</span>
                            </div>
                        </div>
                        <div class="cart-item__final-total">
                            <span>Итого за товар с нанесением:</span>
                            <span class="cart-item__final-total-price">3,400 руб.</span>
                        </div>
                    </div>

                    <!-- Cart item 2 -->
                    <div class="cart-item">
                        <div class="cart-item__image">
                            <img src="{% static 'viki_web/icons/logo.svg' %}" alt="Товар 2">
                        </div>
                        <div class="cart-item__info">
                            <h3 class="cart-item__name">Блокнот корпоративный</h3>
                            <p class="cart-item__article">Артикул: NB-345</p>
                            <p class="cart-item__description">ОБЛОЖКА: Красный (PANTONE 186C) СПИРАЛЬ: Серебро</p>
                        </div>
                        <div class="cart-item__price">
                            <p class="cart-item__price-single">800 руб.</p>
                        </div>
                        <div class="cart-item__quantity">
                            <button class="cart-item__quantity-btn cart-item__quantity-decrease">-</button>
                            <input type="number" class="cart-item__quantity-input" value="3" min="1">
                            <button class="cart-item__quantity-btn cart-item__quantity-increase">+</button>
                        </div>
                        <div class="cart-item__total">
                            <p class="cart-item__total-price">2,400 руб.</p>
                        </div>
                        <div class="cart-item__actions">
                            <button class="cart-item__remove">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </div>
                        
                        <!-- Branding section -->
                        <div class="cart-item__branding">
                            <div class="branding-header">
                                <h4>Брендирование</h4>
                                <button class="branding-add-btn" data-item="NB-345">+ Добавить</button>
                            </div>
                            
                            <div class="branding-items">
                                <div class="branding-item">
                                    <div class="branding-item__row">
                                        <div class="branding-field branding-field-type">
                                            <select class="branding-type">
                                                <option value="offset">Офсетная печать</option>
                                                <option value="digital">Цифровая печать</option>
                                                <option value="emboss">Тиснение</option>
                                            </select>
                                        </div>
                                        <div class="branding-field branding-field-location">
                                            <select class="branding-location">
                                                <option value="cover">Обложка</option>
                                                <option value="back">Задняя сторона</option>
                                                <option value="pages">Блок страниц</option>
                                            </select>
                                        </div>
                                        <div class="branding-field branding-field-colors">
                                            <select class="branding-colors">
                                                <option value="1">1 цвет</option>
                                                <option value="2">2 цвета</option>
                                                <option value="3">3 цвета</option>
                                                <option value="4">4 цвета</option>
                                            </select>
                                        </div>
                                        <div class="branding-field branding-checkbox">
                                            <input type="checkbox" id="second-pass-2" class="branding-second-pass">
                                            <label for="second-pass-2">2й проход</label>
                                        </div>
                                        <div class="branding-field branding-field-price">
                                            <input type="number" class="branding-price" value="800" min="0">
                                            <span>руб.</span>
                                        </div>
                                        <div class="branding-field branding-field-total">
                                            <span class="branding-total-price">2,400 руб.</span>
                                        </div>
                                        <div class="branding-field branding-field-actions">
                                            <button class="branding-remove-btn"><i class="fa-solid fa-trash"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="branding-subtotal">
                                <span>Итого за нанесение:</span>
                                <span class="branding-subtotal-price">2,400 руб.</span>
                            </div>
                        </div>
                        <div class="cart-item__final-total">
                            <span>Итого за товар с нанесением:</span>
                            <span class="cart-item__final-total-price">4,800 руб.</span>
                        </div>
                    </div>

                    <!-- Cart item 3 -->
                    <div class="cart-item">
                        <div class="cart-item__image">
                            <img src="{% static 'viki_web/icons/logo.svg' %}" alt="Товар 3">
                        </div>
                        <div class="cart-item__info">
                            <h3 class="cart-item__name">Кружка керамическая</h3>
                            <p class="cart-item__article">Артикул: MUG-102</p>
                            <p class="cart-item__description">ОСНОВА: Зеленый (PANTONE 354C) РУЧКА: Белый</p>
                        </div>
                        <div class="cart-item__price">
                            <p class="cart-item__price-single">550 руб.</p>
                        </div>
                        <div class="cart-item__quantity">
                            <button class="cart-item__quantity-btn cart-item__quantity-decrease">-</button>
                            <input type="number" class="cart-item__quantity-input" value="5" min="1">
                            <button class="cart-item__quantity-btn cart-item__quantity-increase">+</button>
                        </div>
                        <div class="cart-item__total">
                            <p class="cart-item__total-price">2,750 руб.</p>
                        </div>
                        <div class="cart-item__actions">
                            <button class="cart-item__remove">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </div>
                        
                        <!-- Branding section -->
                        <div class="cart-item__branding">
                            <div class="branding-header">
                                <h4>Брендирование</h4>
                                <button class="branding-add-btn" data-item="MUG-102">+ Добавить</button>
                            </div>
                            
                            <div class="branding-items">
                                <div class="branding-item">
                                    <div class="branding-item__row">
                                        <div class="branding-field branding-field-type">
                                            <select class="branding-type">
                                                <option value="sublimation">Сублимация</option>
                                                <option value="decal">Деколь</option>
                                                <option value="uv">УФ-печать</option>
                                            </select>
                                        </div>
                                        <div class="branding-field branding-field-location">
                                            <select class="branding-location">
                                                <option value="front">Лицевая сторона</option>
                                                <option value="back">Обратная сторона</option>
                                                <option value="handle">Ручка</option>
                                            </select>
                                        </div>
                                        <div class="branding-field branding-field-colors">
                                            <select class="branding-colors">
                                                <option value="1">1 цвет</option>
                                                <option value="2">2 цвета</option>
                                                <option value="3">3 цвета</option>
                                                <option value="4">4 цвета</option>
                                                <option value="full">Полноцвет</option>
                                            </select>
                                        </div>
                                        <div class="branding-field branding-checkbox">
                                            <input type="checkbox" id="second-pass-3" class="branding-second-pass">
                                            <label for="second-pass-3">2й проход</label>
                                        </div>
                                        <div class="branding-field branding-field-price">
                                            <input type="number" class="branding-price" value="350" min="0">
                                            <span>руб.</span>
                                        </div>
                                        <div class="branding-field branding-field-total">
                                            <span class="branding-total-price">1,750 руб.</span>
                                        </div>
                                        <div class="branding-field branding-field-actions">
                                            <button class="branding-remove-btn"><i class="fa-solid fa-trash"></i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="branding-subtotal">
                                <span>Итого за нанесение:</span>
                                <span class="branding-subtotal-price">1,750 руб.</span>
                            </div>
                        </div>
                        <div class="cart-item__final-total">
                            <span>Итого за товар с нанесением:</span>
                            <span class="cart-item__final-total-price">4,500 руб.</span>
                        </div>
                    </div>
                </div>

                <!-- Cart summary -->
                <div class="cart-summary">
                    <div class="cart-summary__info">
                        <p class="cart-summary__items">Товаров в корзине: <span>3</span></p>
                        <p class="cart-summary__subtotal">Стоимость товаров: <span>7,550 руб.</span></p>
                        <p class="cart-summary__branding-total">Стоимость нанесения: <span>5,150 руб.</span></p>
                        <p class="cart-summary__total">Итого: <span>12,700 руб.</span></p>
                    </div>
                    <div class="cart-summary__actions">
                        <button class="btn btn__cancel cart-summary__continue">Продолжить покупки</button>
                        <button class="btn btn__save cart-summary__checkout">Оформить заказ</button>
                    </div>
                </div>
            </div>
            
            <!-- Empty cart message -->
            <div class="cart-empty">
                <div class="cart-empty__icon">
                    <i class="fa-solid fa-cart-shopping"></i>
                </div>
                <h2 class="cart-empty__title">Ваша корзина пуста</h2>
                <p class="cart-empty__text">Добавьте товары в корзину, чтобы оформить заказ</p>
                <a href="/" class="btn btn__save cart-empty__button">Перейти к каталогу</a>
            </div>

            <!-- Секция "Вы смотрели" -->
            <section class="cart-page__recently-viewed">
                <h3 class="section-title">Вы смотрели</h3>
                <div class="recently-viewed">
                    <div class="recently-viewed__items">
                        <!-- Items will be populated dynamically from localStorage -->
                    </div>
                </div>
            </section>
        </div>
    </main>
{% endblock %}
